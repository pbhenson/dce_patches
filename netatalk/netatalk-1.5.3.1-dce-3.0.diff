diff -d -r -c netatalk-1.5.3.1/Makefile.in netatalk-1.5.3.1-dce-3.0/Makefile.in
*** netatalk-1.5.3.1/Makefile.in	Wed Mar 27 14:20:41 2002
--- netatalk-1.5.3.1-dce-3.0/Makefile.in	Mon Jun  3 17:14:50 2002
***************
*** 1,6 ****
! # Makefile.in generated automatically by automake 1.5 from Makefile.am.
  
! # Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
  # Free Software Foundation, Inc.
  # This Makefile.in is free software; the Free Software Foundation
  # gives unlimited permission to copy and/or distribute it,
--- 1,7 ----
! # Makefile.in generated by automake 1.6.1 from Makefile.am.
! # @configure_input@
  
! # Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
  # Free Software Foundation, Inc.
  # This Makefile.in is free software; the Free Software Foundation
  # gives unlimited permission to copy and/or distribute it,
***************
*** 14,20 ****
  @SET_MAKE@
  
  # Makefile.am for top level of netatalk package
- 
  SHELL = @SHELL@
  
  srcdir = @srcdir@
--- 15,20 ----
***************
*** 45,53 ****
--- 45,56 ----
  AUTOMAKE = @AUTOMAKE@
  AUTOHEADER = @AUTOHEADER@
  
+ am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
  INSTALL = @INSTALL@
  INSTALL_PROGRAM = @INSTALL_PROGRAM@
  INSTALL_DATA = @INSTALL_DATA@
+ install_sh_DATA = $(install_sh) -c -m 644
+ install_sh_PROGRAM = $(install_sh) -c
  INSTALL_SCRIPT = @INSTALL_SCRIPT@
  INSTALL_HEADER = $(INSTALL_DATA)
  transform = @program_transform_name@
***************
*** 63,68 ****
--- 66,75 ----
  host_triplet = @host@
  target_alias = @target_alias@
  target_triplet = @target@
+ 
+ EXEEXT = @EXEEXT@
+ OBJEXT = @OBJEXT@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
  AFPD_LIBS = @AFPD_LIBS@
  AFS_CFLAGS = @AFS_CFLAGS@
  AFS_LIBS = @AFS_LIBS@
***************
*** 77,83 ****
  DEPDIR = @DEPDIR@
  DLLTOOL = @DLLTOOL@
  ECHO = @ECHO@
- EXEEXT = @EXEEXT@
  GREP = @GREP@
  INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
  LIBS = @LIBS@
--- 84,89 ----
***************
*** 86,92 ****
  NETATALK_VERSION = @NETATALK_VERSION@
  NLSDIR = @NLSDIR@
  OBJDUMP = @OBJDUMP@
- OBJEXT = @OBJEXT@
  OVERWRITE_CONFIG = @OVERWRITE_CONFIG@
  PACKAGE = @PACKAGE@
  PAMDIR = @PAMDIR@
--- 92,97 ----
***************
*** 128,158 ****
  	uninstall-info-recursive all-recursive install-data-recursive \
  	install-exec-recursive installdirs-recursive install-recursive \
  	uninstall-recursive check-recursive installcheck-recursive
! DIST_COMMON = README ./stamp-h.in COPYING ChangeLog Makefile.am \
! 	Makefile.in NEWS TODO acconfig.h aclocal.m4 compile \
! 	config.guess config.h.in config.sub configure configure.in \
! 	depcomp install-sh ltmain.sh missing mkinstalldirs
  DIST_SUBDIRS = $(SUBDIRS)
  all: config.h
  	$(MAKE) $(AM_MAKEFLAGS) all-recursive
  
  .SUFFIXES:
- 
- mostlyclean-libtool:
- 	-rm -f *.lo
- 
- clean-libtool:
- 	-rm -rf .libs _libs
- 
- distclean-libtool:
- 	-rm -f libtool
  $(srcdir)/Makefile.in:  Makefile.am  $(top_srcdir)/configure.in $(ACLOCAL_M4)
  	cd $(top_srcdir) && \
  	  $(AUTOMAKE) --foreign  Makefile
  Makefile:  $(srcdir)/Makefile.in  $(top_builddir)/config.status
! 	cd $(top_builddir) && \
! 	  CONFIG_HEADERS= CONFIG_LINKS= \
! 	  CONFIG_FILES=$@ $(SHELL) ./config.status
  
  $(top_builddir)/config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
  	$(SHELL) ./config.status --recheck
--- 133,152 ----
  	uninstall-info-recursive all-recursive install-data-recursive \
  	install-exec-recursive installdirs-recursive install-recursive \
  	uninstall-recursive check-recursive installcheck-recursive
! DIST_COMMON = README COPYING ChangeLog Makefile.am Makefile.in NEWS \
! 	TODO acconfig.h aclocal.m4 compile config.guess config.h.in \
! 	config.sub configure configure.in depcomp install-sh ltmain.sh \
! 	missing mkinstalldirs
  DIST_SUBDIRS = $(SUBDIRS)
  all: config.h
  	$(MAKE) $(AM_MAKEFLAGS) all-recursive
  
  .SUFFIXES:
  $(srcdir)/Makefile.in:  Makefile.am  $(top_srcdir)/configure.in $(ACLOCAL_M4)
  	cd $(top_srcdir) && \
  	  $(AUTOMAKE) --foreign  Makefile
  Makefile:  $(srcdir)/Makefile.in  $(top_builddir)/config.status
! 	cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe)
  
  $(top_builddir)/config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
  	$(SHELL) ./config.status --recheck
***************
*** 161,191 ****
  
  $(ACLOCAL_M4):  configure.in macros/afs-check.m4 macros/config-checks.m4 macros/db3-check.m4 macros/grep-check.m4 macros/pam-check.m4 macros/perl-check.m4 macros/ps-check.m4 macros/quota-check.m4 macros/srvloc.m4 macros/ssl-check.m4
  	cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
! config.h: stamp-h
! 	@if test ! -f $@; then \
! 		rm -f stamp-h; \
! 		$(MAKE) stamp-h; \
! 	else :; fi
! stamp-h: $(srcdir)/config.h.in $(top_builddir)/config.status
! 	@rm -f stamp-h stamp-hT
! 	@echo timestamp > stamp-hT 2> /dev/null
! 	cd $(top_builddir) \
! 	  && CONFIG_FILES= CONFIG_HEADERS=config.h \
! 	     $(SHELL) ./config.status
! 	@mv stamp-hT stamp-h
! $(srcdir)/config.h.in:  $(srcdir)/./stamp-h.in
  	@if test ! -f $@; then \
! 		rm -f $(srcdir)/./stamp-h.in; \
! 		$(MAKE) $(srcdir)/./stamp-h.in; \
  	else :; fi
! $(srcdir)/./stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) $(top_srcdir)/acconfig.h
! 	@rm -f $(srcdir)/./stamp-h.in $(srcdir)/./stamp-h.inT
! 	@echo timestamp > $(srcdir)/./stamp-h.inT 2> /dev/null
  	cd $(top_srcdir) && $(AUTOHEADER)
! 	@mv $(srcdir)/./stamp-h.inT $(srcdir)/./stamp-h.in
  
  distclean-hdr:
  	-rm -f config.h
  uninstall-info-am:
  
  # This directory's subdirectories are mostly independent; you can cd
--- 155,186 ----
  
  $(ACLOCAL_M4):  configure.in macros/afs-check.m4 macros/config-checks.m4 macros/db3-check.m4 macros/grep-check.m4 macros/pam-check.m4 macros/perl-check.m4 macros/ps-check.m4 macros/quota-check.m4 macros/srvloc.m4 macros/ssl-check.m4
  	cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
! 
! config.h: stamp-h1
  	@if test ! -f $@; then \
! 	  rm -f stamp-h1; \
! 	  $(MAKE) stamp-h1; \
  	else :; fi
! 
! stamp-h1: $(srcdir)/config.h.in $(top_builddir)/config.status
! 	@rm -f stamp-h1
! 	cd $(top_builddir) && $(SHELL) ./config.status config.h
! 
! $(srcdir)/config.h.in:  $(top_srcdir)/configure.in $(ACLOCAL_M4) $(top_srcdir)/acconfig.h
  	cd $(top_srcdir) && $(AUTOHEADER)
! 	touch $(srcdir)/config.h.in
  
  distclean-hdr:
  	-rm -f config.h
+ 
+ mostlyclean-libtool:
+ 	-rm -f *.lo
+ 
+ clean-libtool:
+ 	-rm -rf .libs _libs
+ 
+ distclean-libtool:
+ 	-rm -f libtool
  uninstall-info-am:
  
  # This directory's subdirectories are mostly independent; you can cd
***************
*** 195,201 ****
  #     (which will cause the Makefiles to be regenerated when you run `make');
  # (2) otherwise, pass the desired values on the `make' command line.
  $(RECURSIVE_TARGETS):
! 	@set fnord $(MAKEFLAGS); amf=$$2; \
  	dot_seen=no; \
  	target=`echo $@ | sed s/-recursive//`; \
  	list='$(SUBDIRS)'; for subdir in $$list; do \
--- 190,196 ----
  #     (which will cause the Makefiles to be regenerated when you run `make');
  # (2) otherwise, pass the desired values on the `make' command line.
  $(RECURSIVE_TARGETS):
! 	@set fnord $$MAKEFLAGS; amf=$$2; \
  	dot_seen=no; \
  	target=`echo $@ | sed s/-recursive//`; \
  	list='$(SUBDIRS)'; for subdir in $$list; do \
***************
*** 215,221 ****
  
  mostlyclean-recursive clean-recursive distclean-recursive \
  maintainer-clean-recursive:
! 	@set fnord $(MAKEFLAGS); amf=$$2; \
  	dot_seen=no; \
  	case "$@" in \
  	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
--- 210,216 ----
  
  mostlyclean-recursive clean-recursive distclean-recursive \
  maintainer-clean-recursive:
! 	@set fnord $$MAKEFLAGS; amf=$$2; \
  	dot_seen=no; \
  	case "$@" in \
  	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
***************
*** 243,258 ****
  	  test "$$subdir" = . || (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) tags); \
  	done
  
  tags: TAGS
  
  ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
! 	list='$(SOURCES) $(HEADERS) $(TAGS_FILES)'; \
  	unique=`for i in $$list; do \
  	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
  	  done | \
  	  $(AWK) '    { files[$$0] = 1; } \
  	       END { for (i in files) print i; }'`; \
! 	mkid -fID $$unique $(LISP)
  
  TAGS: tags-recursive $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) \
  		$(TAGS_FILES) $(LISP)
--- 238,256 ----
  	  test "$$subdir" = . || (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) tags); \
  	done
  
+ ETAGS = etags
+ ETAGSFLAGS =
+ 
  tags: TAGS
  
  ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
! 	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
  	unique=`for i in $$list; do \
  	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
  	  done | \
  	  $(AWK) '    { files[$$0] = 1; } \
  	       END { for (i in files) print i; }'`; \
! 	mkid -fID $$unique
  
  TAGS: tags-recursive $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) \
  		$(TAGS_FILES) $(LISP)
***************
*** 263,313 ****
  	    test -f $$subdir/TAGS && tags="$$tags -i $$here/$$subdir/TAGS"; \
  	  fi; \
  	done; \
! 	list='$(SOURCES) $(HEADERS) $(TAGS_FILES)'; \
  	unique=`for i in $$list; do \
  	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
  	  done | \
  	  $(AWK) '    { files[$$0] = 1; } \
  	       END { for (i in files) print i; }'`; \
! 	test -z "$(ETAGS_ARGS)config.h.in$$unique$(LISP)$$tags" \
! 	  || etags $(ETAGS_ARGS) $$tags config.h.in $$unique $(LISP)
  
  GTAGS:
! 	here=`CDPATH=: && cd $(top_builddir) && pwd` \
  	  && cd $(top_srcdir) \
  	  && gtags -i $(GTAGS_ARGS) $$here
  
  distclean-tags:
  	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH
- 
  DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
  
  top_distdir = .
- # Avoid unsightly `./'.
  distdir = $(PACKAGE)-$(VERSION)
  
  GZIP_ENV = --best
  
  distdir: $(DISTFILES)
! 	-chmod -R a+w $(distdir) >/dev/null 2>&1; rm -rf $(distdir)
  	mkdir $(distdir)
  	$(mkinstalldirs) $(distdir)/bin/cnid $(distdir)/contrib/macusers $(distdir)/contrib/nu $(distdir)/contrib/shell_utils $(distdir)/distrib/config $(distdir)/sys/solaris
  	@for file in $(DISTFILES); do \
! 	  if test -f $$file; then d=.; else d=$(srcdir); fi; \
  	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
  	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
! 	    $(mkinstalldirs) "$(distdir)/$$dir"; \
  	  fi; \
  	  if test -d $$d/$$file; then \
! 	    cp -pR $$d/$$file $(distdir) \
! 	    || exit 1; \
  	  else \
  	    test -f $(distdir)/$$file \
  	    || cp -p $$d/$$file $(distdir)/$$file \
  	    || exit 1; \
  	  fi; \
  	done
! 	for subdir in $(SUBDIRS); do \
  	  if test "$$subdir" = .; then :; else \
  	    test -d $(distdir)/$$subdir \
  	    || mkdir $(distdir)/$$subdir \
--- 261,321 ----
  	    test -f $$subdir/TAGS && tags="$$tags -i $$here/$$subdir/TAGS"; \
  	  fi; \
  	done; \
! 	list='$(SOURCES) $(HEADERS) config.h.in $(LISP) $(TAGS_FILES)'; \
  	unique=`for i in $$list; do \
  	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
  	  done | \
  	  $(AWK) '    { files[$$0] = 1; } \
  	       END { for (i in files) print i; }'`; \
! 	test -z "$(ETAGS_ARGS)$$tags$$unique" \
! 	  || $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
! 	     $$tags $$unique
  
  GTAGS:
! 	here=`$(am__cd) $(top_builddir) && pwd` \
  	  && cd $(top_srcdir) \
  	  && gtags -i $(GTAGS_ARGS) $$here
  
  distclean-tags:
  	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH
  DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
  
  top_distdir = .
  distdir = $(PACKAGE)-$(VERSION)
  
+ am__remove_distdir = \
+   { test ! -d $(distdir) \
+     || { find $(distdir) -type d ! -perm -200 -exec chmod u+w {} ';' \
+          && rm -fr $(distdir); }; }
+ 
  GZIP_ENV = --best
+ distcleancheck_listfiles = find . -type f -print
  
  distdir: $(DISTFILES)
! 	$(am__remove_distdir)
  	mkdir $(distdir)
  	$(mkinstalldirs) $(distdir)/bin/cnid $(distdir)/contrib/macusers $(distdir)/contrib/nu $(distdir)/contrib/shell_utils $(distdir)/distrib/config $(distdir)/sys/solaris
  	@for file in $(DISTFILES); do \
! 	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
  	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
  	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
! 	    dir="/$$dir"; \
! 	    $(mkinstalldirs) "$(distdir)$$dir"; \
! 	  else \
! 	    dir=''; \
  	  fi; \
  	  if test -d $$d/$$file; then \
! 	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
! 	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
! 	    fi; \
! 	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
  	  else \
  	    test -f $(distdir)/$$file \
  	    || cp -p $$d/$$file $(distdir)/$$file \
  	    || exit 1; \
  	  fi; \
  	done
! 	list='$(SUBDIRS)'; for subdir in $$list; do \
  	  if test "$$subdir" = .; then :; else \
  	    test -d $(distdir)/$$subdir \
  	    || mkdir $(distdir)/$$subdir \
***************
*** 325,347 ****
  	  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  	  ! -type d ! -perm -444 -exec $(SHELL) $(install_sh) -c -m a+r {} {} \; \
  	|| chmod -R a+r $(distdir)
! dist: distdir
  	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
! 	-chmod -R a+w $(distdir) >/dev/null 2>&1; rm -rf $(distdir)
  
  # This target untars the dist file and tries a VPATH configuration.  Then
  # it guarantees that the distribution is self-contained by making another
  # tarfile.
  distcheck: dist
! 	-chmod -R a+w $(distdir) > /dev/null 2>&1; rm -rf $(distdir)
  	GZIP=$(GZIP_ENV) gunzip -c $(distdir).tar.gz | $(AMTAR) xf -
  	chmod -R a-w $(distdir); chmod a+w $(distdir)
  	mkdir $(distdir)/=build
  	mkdir $(distdir)/=inst
  	chmod a-w $(distdir)
! 	dc_install_base=`CDPATH=: && cd $(distdir)/=inst && pwd` \
  	  && cd $(distdir)/=build \
  	  && ../configure --srcdir=.. --prefix=$$dc_install_base \
  	  && $(MAKE) $(AM_MAKEFLAGS) \
  	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
  	  && $(MAKE) $(AM_MAKEFLAGS) check \
--- 333,360 ----
  	  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  	  ! -type d ! -perm -444 -exec $(SHELL) $(install_sh) -c -m a+r {} {} \; \
  	|| chmod -R a+r $(distdir)
! dist-gzip: distdir
  	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
! 	$(am__remove_distdir)
! 
! dist dist-all: distdir
! 	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
! 	$(am__remove_distdir)
  
  # This target untars the dist file and tries a VPATH configuration.  Then
  # it guarantees that the distribution is self-contained by making another
  # tarfile.
  distcheck: dist
! 	$(am__remove_distdir)
  	GZIP=$(GZIP_ENV) gunzip -c $(distdir).tar.gz | $(AMTAR) xf -
  	chmod -R a-w $(distdir); chmod a+w $(distdir)
  	mkdir $(distdir)/=build
  	mkdir $(distdir)/=inst
  	chmod a-w $(distdir)
! 	dc_install_base=`$(am__cd) $(distdir)/=inst && pwd` \
  	  && cd $(distdir)/=build \
  	  && ../configure --srcdir=.. --prefix=$$dc_install_base \
+ 	    $(DISTCHECK_CONFIGURE_FLAGS) \
  	  && $(MAKE) $(AM_MAKEFLAGS) \
  	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
  	  && $(MAKE) $(AM_MAKEFLAGS) check \
***************
*** 349,365 ****
  	  && $(MAKE) $(AM_MAKEFLAGS) installcheck \
  	  && $(MAKE) $(AM_MAKEFLAGS) uninstall \
  	  && (test `find $$dc_install_base -type f -print | wc -l` -le 1 \
! 	     || (echo "Error: files left after uninstall" 1>&2; \
! 	         exit 1) ) \
! 	  && $(MAKE) $(AM_MAKEFLAGS) dist \
! 	  && $(MAKE) $(AM_MAKEFLAGS) distclean \
  	  && rm -f $(distdir).tar.gz \
! 	  && (test `find . -type f -print | wc -l` -eq 0 \
! 	     || (echo "Error: files left after distclean" 1>&2; \
! 	         exit 1) )
! 	-chmod -R a+w $(distdir) > /dev/null 2>&1; rm -rf $(distdir)
  	@echo "$(distdir).tar.gz is ready for distribution" | \
  	  sed 'h;s/./=/g;p;x;p;x'
  check-am: all-am
  check: check-recursive
  all-am: Makefile config.h
--- 362,385 ----
  	  && $(MAKE) $(AM_MAKEFLAGS) installcheck \
  	  && $(MAKE) $(AM_MAKEFLAGS) uninstall \
  	  && (test `find $$dc_install_base -type f -print | wc -l` -le 1 \
! 	      || { echo "ERROR: files left after uninstall:" ; \
! 	           find $$dc_install_base -type f -print ; \
! 	           exit 1; } >&2 ) \
! 	  && $(MAKE) $(AM_MAKEFLAGS) dist-gzip \
  	  && rm -f $(distdir).tar.gz \
! 	  && $(MAKE) $(AM_MAKEFLAGS) distcleancheck
! 	$(am__remove_distdir)
  	@echo "$(distdir).tar.gz is ready for distribution" | \
  	  sed 'h;s/./=/g;p;x;p;x'
+ distcleancheck: distclean
+ 	if test '$(srcdir)' = . ; then \
+ 	  echo "ERROR: distcleancheck can only run from a VPATH build" ; \
+ 	  exit 1 ; \
+ 	fi
+ 	test `$(distcleancheck_listfiles) | wc -l` -eq 0 \
+ 	  || { echo "ERROR: files left after distclean:" ; \
+ 	       $(distcleancheck_listfiles) ; \
+ 	       exit 1; } >&2
  check-am: all-am
  check: check-recursive
  all-am: Makefile config.h
***************
*** 377,382 ****
--- 397,403 ----
  installcheck: installcheck-recursive
  install-strip:
  	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
+ 	  INSTALL_STRIP_FLAG=-s \
  	  `test -z '$(STRIP)' || \
  	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
  mostlyclean-generic:
***************
*** 393,401 ****
  
  clean-am: clean-generic clean-libtool mostlyclean-am
  
- dist-all: distdir
- 	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
- 	-chmod -R a+w $(distdir) >/dev/null 2>&1; rm -rf $(distdir)
  distclean: distclean-recursive
  	-rm -f config.status config.cache config.log
  distclean-am: clean-am distclean-generic distclean-hdr distclean-libtool \
--- 414,419 ----
***************
*** 433,450 ****
  
  .PHONY: $(RECURSIVE_TARGETS) GTAGS all all-am check check-am clean \
  	clean-generic clean-libtool clean-recursive dist dist-all \
! 	distcheck distclean distclean-generic distclean-hdr \
! 	distclean-libtool distclean-recursive distclean-tags distdir \
! 	dvi dvi-am dvi-recursive info info-am info-recursive install \
! 	install-am install-data install-data-am install-data-recursive \
! 	install-exec install-exec-am install-exec-recursive \
! 	install-info install-info-am install-info-recursive install-man \
! 	install-recursive install-strip installcheck installcheck-am \
! 	installdirs installdirs-am installdirs-recursive \
! 	maintainer-clean maintainer-clean-generic \
! 	maintainer-clean-recursive mostlyclean mostlyclean-generic \
! 	mostlyclean-libtool mostlyclean-recursive tags tags-recursive \
! 	uninstall uninstall-am uninstall-info-am \
  	uninstall-info-recursive uninstall-recursive
  
  # Tell versions [3.59,3.63) of GNU make to not export all variables.
--- 451,468 ----
  
  .PHONY: $(RECURSIVE_TARGETS) GTAGS all all-am check check-am clean \
  	clean-generic clean-libtool clean-recursive dist dist-all \
! 	dist-gzip distcheck distclean distclean-generic distclean-hdr \
! 	distclean-libtool distclean-recursive distclean-tags \
! 	distcleancheck distdir dvi dvi-am dvi-recursive info info-am \
! 	info-recursive install install-am install-data install-data-am \
! 	install-data-recursive install-exec install-exec-am \
! 	install-exec-recursive install-info install-info-am \
! 	install-info-recursive install-man install-recursive \
! 	install-strip installcheck installcheck-am installdirs \
! 	installdirs-am installdirs-recursive maintainer-clean \
! 	maintainer-clean-generic maintainer-clean-recursive mostlyclean \
! 	mostlyclean-generic mostlyclean-libtool mostlyclean-recursive \
! 	tags tags-recursive uninstall uninstall-am uninstall-info-am \
  	uninstall-info-recursive uninstall-recursive
  
  # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -d -r -c netatalk-1.5.3.1/acconfig.h netatalk-1.5.3.1-dce-3.0/acconfig.h
*** netatalk-1.5.3.1/acconfig.h	Thu Feb  7 13:04:49 2002
--- netatalk-1.5.3.1-dce-3.0/acconfig.h	Mon Jun  3 16:43:12 2002
***************
*** 44,46 ****
--- 44,52 ----
  #undef USE_MOUNT_H
  #undef USE_OLD_RQUOTA
  #undef USE_UFS_QUOTA_H
+ #undef WITH_DCE
+ #undef WITH_DCE_ENCRYPTED
+ #undef WITH_DCE_REFRESH
+ #undef WITH_DCE_IBM_KLUDGE
+ #undef WITH_DFS
+ 
diff -d -r -c netatalk-1.5.3.1/config.h.in netatalk-1.5.3.1-dce-3.0/config.h.in
*** netatalk-1.5.3.1/config.h.in	Fri Feb 15 14:08:20 2002
--- netatalk-1.5.3.1-dce-3.0/config.h.in	Mon Jun  3 17:21:29 2002
***************
*** 1,69 ****
! /* config.h.in.  Generated automatically from configure.in by autoheader 2.13.  */
! 
! /* Define to empty if the keyword does not work.  */
! #undef const
! 
! /* Define to the type of elements in the array set by `getgroups'.
!    Usually this is either `int' or `gid_t'.  */
! #undef GETGROUPS_T
! 
! /* Define to `int' if <sys/types.h> doesn't define.  */
! #undef gid_t
! 
! /* Define if you have a working `mmap' system call.  */
! #undef HAVE_MMAP
! 
! /* Define if your struct stat has st_rdev.  */
! #undef HAVE_ST_RDEV
! 
! /* Define if you have <sys/wait.h> that is POSIX.1 compatible.  */
! #undef HAVE_SYS_WAIT_H
! 
! /* Define if utime(file, NULL) sets file's timestamp to the present.  */
! #undef HAVE_UTIME_NULL
! 
! /* Define if you have the wait3 system call.  */
! #undef HAVE_WAIT3
! 
! /* Define as __inline if that's what the C compiler calls it.  */
! #undef inline
! 
! /* Define if major, minor, and makedev are declared in <mkdev.h>.  */
! #undef MAJOR_IN_MKDEV
! 
! /* Define if major, minor, and makedev are declared in <sysmacros.h>.  */
! #undef MAJOR_IN_SYSMACROS
! 
! /* Define to `int' if <sys/types.h> doesn't define.  */
! #undef mode_t
! 
! /* Define to `long' if <sys/types.h> doesn't define.  */
! #undef off_t
! 
! /* Define to `int' if <sys/types.h> doesn't define.  */
! #undef pid_t
! 
! /* Define as the return type of signal handlers (int or void).  */
! #undef RETSIGTYPE
! 
! /* Define if the `setpgrp' function takes no argument.  */
! #undef SETPGRP_VOID
! 
! /* Define to `unsigned' if <sys/types.h> doesn't define.  */
! #undef size_t
! 
! /* Define if you have the ANSI C header files.  */
! #undef STDC_HEADERS
! 
! /* Define if you can safely include both <sys/time.h> and <time.h>.  */
! #undef TIME_WITH_SYS_TIME
! 
! /* Define if your <sys/time.h> declares struct tm.  */
! #undef TM_IN_SYS_TIME
! 
! /* Define to `int' if <sys/types.h> doesn't define.  */
! #undef uid_t
! 
  #undef __svr4__
  #undef _ISOC9X_SOURCE
  #undef _PATH_CRACKLIB
--- 1,4 ----
! /* config.h.in.  Generated from configure.in by autoheader.  */
  #undef __svr4__
  #undef _ISOC9X_SOURCE
  #undef _PATH_CRACKLIB
***************
*** 110,344 ****
  #undef USE_MOUNT_H
  #undef USE_OLD_RQUOTA
  #undef USE_UFS_QUOTA_H
  
! /* Define if you have the access function.  */
  #undef HAVE_ACCESS
  
! /* Define if you have the flock function.  */
  #undef HAVE_FLOCK
  
! /* Define if you have the getcwd function.  */
  #undef HAVE_GETCWD
  
! /* Define if you have the gethostname function.  */
  #undef HAVE_GETHOSTNAME
  
! /* Define if you have the getpagesize function.  */
  #undef HAVE_GETPAGESIZE
  
! /* Define if you have the gettimeofday function.  */
  #undef HAVE_GETTIMEOFDAY
  
! /* Define if you have the getusershell function.  */
  #undef HAVE_GETUSERSHELL
  
! /* Define if you have the memcpy function.  */
! #undef HAVE_MEMCPY
  
! /* Define if you have the mkdir function.  */
! #undef HAVE_MKDIR
  
! /* Define if you have the rmdir function.  */
! #undef HAVE_RMDIR
  
! /* Define if you have the select function.  */
! #undef HAVE_SELECT
  
! /* Define if you have the setpgrp function.  */
! #undef HAVE_SETPGRP
  
! /* Define if you have the socket function.  */
! #undef HAVE_SOCKET
  
! /* Define if you have the strchr function.  */
! #undef HAVE_STRCHR
  
! /* Define if you have the strdup function.  */
! #undef HAVE_STRDUP
  
! /* Define if you have the strstr function.  */
! #undef HAVE_STRSTR
  
! /* Define if you have the strtoul function.  */
! #undef HAVE_STRTOUL
  
! /* Define if you have the <dirent.h> header file.  */
! #undef HAVE_DIRENT_H
  
! /* Define if you have the <dlfcn.h> header file.  */
! #undef HAVE_DLFCN_H
  
! /* Define if you have the <errno.h> header file.  */
! #undef HAVE_ERRNO_H
  
! /* Define if you have the <fcntl.h> header file.  */
! #undef HAVE_FCNTL_H
  
! /* Define if you have the <limits.h> header file.  */
  #undef HAVE_LIMITS_H
  
! /* Define if you have the <linux/quota.h> header file.  */
  #undef HAVE_LINUX_QUOTA_H
  
! /* Define if you have the <mntent.h> header file.  */
  #undef HAVE_MNTENT_H
  
! /* Define if you have the <mount.h> header file.  */
  #undef HAVE_MOUNT_H
  
! /* Define if you have the <ndir.h> header file.  */
  #undef HAVE_NDIR_H
  
! /* Define if you have the <netdb.h> header file.  */
  #undef HAVE_NETDB_H
  
! /* Define if you have the <sgtty.h> header file.  */
  #undef HAVE_SGTTY_H
  
! /* Define if you have the <statfs.h> header file.  */
  #undef HAVE_STATFS_H
  
! /* Define if you have the <stdint.h> header file.  */
  #undef HAVE_STDINT_H
  
! /* Define if you have the <strings.h> header file.  */
  #undef HAVE_STRINGS_H
  
! /* Define if you have the <sys/dir.h> header file.  */
  #undef HAVE_SYS_DIR_H
  
! /* Define if you have the <sys/errno.h> header file.  */
  #undef HAVE_SYS_ERRNO_H
  
! /* Define if you have the <sys/fcntl.h> header file.  */
  #undef HAVE_SYS_FCNTL_H
  
! /* Define if you have the <sys/file.h> header file.  */
  #undef HAVE_SYS_FILE_H
  
! /* Define if you have the <sys/ioctl.h> header file.  */
  #undef HAVE_SYS_IOCTL_H
  
! /* Define if you have the <sys/mnttab.h> header file.  */
  #undef HAVE_SYS_MNTTAB_H
  
! /* Define if you have the <sys/mount.h> header file.  */
  #undef HAVE_SYS_MOUNT_H
  
! /* Define if you have the <sys/ndir.h> header file.  */
  #undef HAVE_SYS_NDIR_H
  
! /* Define if you have the <sys/quota.h> header file.  */
  #undef HAVE_SYS_QUOTA_H
  
! /* Define if you have the <sys/stat.h> header file.  */
! #undef HAVE_SYS_STAT_H
! 
! /* Define if you have the <sys/statvfs.h> header file.  */
  #undef HAVE_SYS_STATVFS_H
  
! /* Define if you have the <sys/termios.h> header file.  */
  #undef HAVE_SYS_TERMIOS_H
  
! /* Define if you have the <sys/time.h> header file.  */
  #undef HAVE_SYS_TIME_H
  
! /* Define if you have the <sys/types.h> header file.  */
  #undef HAVE_SYS_TYPES_H
  
! /* Define if you have the <sys/vfs.h> header file.  */
  #undef HAVE_SYS_VFS_H
  
! /* Define if you have the <syslog.h> header file.  */
! #undef HAVE_SYSLOG_H
  
! /* Define if you have the <termios.h> header file.  */
  #undef HAVE_TERMIOS_H
  
! /* Define if you have the <ufs/quota.h> header file.  */
  #undef HAVE_UFS_QUOTA_H
  
! /* Define if you have the <unistd.h> header file.  */
  #undef HAVE_UNISTD_H
  
! /* Define if you have the abs library (-labs).  */
! #undef HAVE_LIBABS
! 
! /* Define if you have the afsauthent library (-lafsauthent).  */
! #undef HAVE_LIBAFSAUTHENT
  
! /* Define if you have the audit library (-laudit).  */
! #undef HAVE_LIBAUDIT
  
! /* Define if you have the auth library (-lauth).  */
! #undef HAVE_LIBAUTH
  
! /* Define if you have the cmd library (-lcmd).  */
! #undef HAVE_LIBCMD
  
! /* Define if you have the crypt library (-lcrypt).  */
! #undef HAVE_LIBCRYPT
  
! /* Define if you have the crypto library (-lcrypto).  */
! #undef HAVE_LIBCRYPTO
  
! /* Define if you have the d library (-ld).  */
! #undef HAVE_LIBD
  
! /* Define if you have the des library (-ldes).  */
! #undef HAVE_LIBDES
  
! /* Define if you have the dl library (-ldl).  */
! #undef HAVE_LIBDL
  
! /* Define if you have the kauth library (-lkauth).  */
! #undef HAVE_LIBKAUTH
  
! /* Define if you have the krb library (-lkrb).  */
! #undef HAVE_LIBKRB
  
! /* Define if you have the lwp library (-llwp).  */
! #undef HAVE_LIBLWP
  
! /* Define if you have the n library (-ln).  */
! #undef HAVE_LIBN
  
! /* Define if you have the nsl library (-lnsl).  */
! #undef HAVE_LIBNSL
  
! /* Define if you have the prot library (-lprot).  */
! #undef HAVE_LIBPROT
  
! /* Define if you have the rx library (-lrx).  */
! #undef HAVE_LIBRX
  
! /* Define if you have the rxkad library (-lrxkad).  */
! #undef HAVE_LIBRXKAD
  
! /* Define if you have the security library (-lsecurity).  */
! #undef HAVE_LIBSECURITY
  
! /* Define if you have the socket library (-lsocket).  */
! #undef HAVE_LIBSOCKET
  
! /* Define if you have the sys library (-lsys).  */
! #undef HAVE_LIBSYS
  
! /* Define if you have the ubik library (-lubik).  */
! #undef HAVE_LIBUBIK
  
! /* Name of package */
! #undef PACKAGE
  
! /* Version number of package */
! #undef VERSION
  
! /* path to cracklib dictionary */
! #undef _PATH_CRACKLIB
  
! /* path to message dir PKGCONF/msg */
! #undef SERVERTEXT
  
! /* path to UAMs default=PKGCONF/uams */
! #undef UAMS_PATH
  
--- 45,386 ----
  #undef USE_MOUNT_H
  #undef USE_OLD_RQUOTA
  #undef USE_UFS_QUOTA_H
+ #undef WITH_DCE
+ #undef WITH_DCE_ENCRYPTED
+ #undef WITH_DCE_REFRESH
+ #undef WITH_DCE_IBM_KLUDGE
+ #undef WITH_DFS
  
! 
! /* Define to the type of elements in the array set by `getgroups'. Usually
!    this is either `int' or `gid_t'. */
! #undef GETGROUPS_T
! 
! /* Define to 1 if you have the `access' function. */
  #undef HAVE_ACCESS
  
! /* Define to 1 if you have the <dirent.h> header file, and it defines `DIR'.
!    */
! #undef HAVE_DIRENT_H
! 
! /* Define to 1 if you have the <dlfcn.h> header file. */
! #undef HAVE_DLFCN_H
! 
! /* Define to 1 if you have the <errno.h> header file. */
! #undef HAVE_ERRNO_H
! 
! /* Define to 1 if you have the <fcntl.h> header file. */
! #undef HAVE_FCNTL_H
! 
! /* Define to 1 if you have the `flock' function. */
  #undef HAVE_FLOCK
  
! /* Define to 1 if you have the `getcwd' function. */
  #undef HAVE_GETCWD
  
! /* Define to 1 if you have the `gethostname' function. */
  #undef HAVE_GETHOSTNAME
  
! /* Define to 1 if you have the `getpagesize' function. */
  #undef HAVE_GETPAGESIZE
  
! /* Define to 1 if you have the `gettimeofday' function. */
  #undef HAVE_GETTIMEOFDAY
  
! /* Define to 1 if you have the `getusershell' function. */
  #undef HAVE_GETUSERSHELL
  
! /* Define to 1 if you have the <inttypes.h> header file. */
! #undef HAVE_INTTYPES_H
  
! /* Define to 1 if you have the `abs' library (-labs). */
! #undef HAVE_LIBABS
  
! /* Define to 1 if you have the `afsauthent' library (-lafsauthent). */
! #undef HAVE_LIBAFSAUTHENT
  
! /* Define to 1 if you have the `audit' library (-laudit). */
! #undef HAVE_LIBAUDIT
  
! /* Define to 1 if you have the `auth' library (-lauth). */
! #undef HAVE_LIBAUTH
  
! /* Define to 1 if you have the `cmd' library (-lcmd). */
! #undef HAVE_LIBCMD
  
! /* Define to 1 if you have the `crypt' library (-lcrypt). */
! #undef HAVE_LIBCRYPT
  
! /* Define to 1 if you have the `crypto' library (-lcrypto). */
! #undef HAVE_LIBCRYPTO
  
! /* Define to 1 if you have the `d' library (-ld). */
! #undef HAVE_LIBD
  
! /* Define to 1 if you have the `des' library (-ldes). */
! #undef HAVE_LIBDES
  
! /* Define to 1 if you have the `dl' library (-ldl). */
! #undef HAVE_LIBDL
  
! /* Define to 1 if you have the `kauth' library (-lkauth). */
! #undef HAVE_LIBKAUTH
  
! /* Define to 1 if you have the `krb' library (-lkrb). */
! #undef HAVE_LIBKRB
  
! /* Define to 1 if you have the `lwp' library (-llwp). */
! #undef HAVE_LIBLWP
  
! /* Define to 1 if you have the `n' library (-ln). */
! #undef HAVE_LIBN
! 
! /* Define to 1 if you have the `nsl' library (-lnsl). */
! #undef HAVE_LIBNSL
! 
! /* Define to 1 if you have the `prot' library (-lprot). */
! #undef HAVE_LIBPROT
! 
! /* Define to 1 if you have the `rx' library (-lrx). */
! #undef HAVE_LIBRX
! 
! /* Define to 1 if you have the `rxkad' library (-lrxkad). */
! #undef HAVE_LIBRXKAD
! 
! /* Define to 1 if you have the `security' library (-lsecurity). */
! #undef HAVE_LIBSECURITY
! 
! /* Define to 1 if you have the `socket' library (-lsocket). */
! #undef HAVE_LIBSOCKET
! 
! /* Define to 1 if you have the `sys' library (-lsys). */
! #undef HAVE_LIBSYS
! 
! /* Define to 1 if you have the `ubik' library (-lubik). */
! #undef HAVE_LIBUBIK
! 
! /* Define to 1 if you have the <limits.h> header file. */
  #undef HAVE_LIMITS_H
  
! /* Define to 1 if you have the <linux/quota.h> header file. */
  #undef HAVE_LINUX_QUOTA_H
  
! /* Define to 1 if you have the `memcpy' function. */
! #undef HAVE_MEMCPY
! 
! /* Define to 1 if you have the <memory.h> header file. */
! #undef HAVE_MEMORY_H
! 
! /* Define to 1 if you have the `mkdir' function. */
! #undef HAVE_MKDIR
! 
! /* Define to 1 if you have a working `mmap' system call. */
! #undef HAVE_MMAP
! 
! /* Define to 1 if you have the <mntent.h> header file. */
  #undef HAVE_MNTENT_H
  
! /* Define to 1 if you have the <mount.h> header file. */
  #undef HAVE_MOUNT_H
  
! /* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
  #undef HAVE_NDIR_H
  
! /* Define to 1 if you have the <netdb.h> header file. */
  #undef HAVE_NETDB_H
  
! /* Define to 1 if you have the `rmdir' function. */
! #undef HAVE_RMDIR
! 
! /* Define to 1 if you have the `select' function. */
! #undef HAVE_SELECT
! 
! /* Define to 1 if you have the `setpgrp' function. */
! #undef HAVE_SETPGRP
! 
! /* Define to 1 if you have the <sgtty.h> header file. */
  #undef HAVE_SGTTY_H
  
! /* Define to 1 if you have the `socket' function. */
! #undef HAVE_SOCKET
! 
! /* Define to 1 if you have the <statfs.h> header file. */
  #undef HAVE_STATFS_H
  
! /* Define to 1 if you have the <stdint.h> header file. */
  #undef HAVE_STDINT_H
  
! /* Define to 1 if you have the <stdlib.h> header file. */
! #undef HAVE_STDLIB_H
! 
! /* Define to 1 if you have the `strchr' function. */
! #undef HAVE_STRCHR
! 
! /* Define to 1 if you have the `strdup' function. */
! #undef HAVE_STRDUP
! 
! /* Define to 1 if you have the <strings.h> header file. */
  #undef HAVE_STRINGS_H
  
! /* Define to 1 if you have the <string.h> header file. */
! #undef HAVE_STRING_H
! 
! /* Define to 1 if you have the `strstr' function. */
! #undef HAVE_STRSTR
! 
! /* Define to 1 if you have the `strtoul' function. */
! #undef HAVE_STRTOUL
! 
! /* Define to 1 if `st_rdev' is member of `struct stat'. */
! #undef HAVE_STRUCT_STAT_ST_RDEV
! 
! /* Define to 1 if your `struct stat' has `st_rdev'. Deprecated, use
!    `HAVE_STRUCT_STAT_ST_RDEV' instead. */
! #undef HAVE_ST_RDEV
! 
! /* Define to 1 if you have the <syslog.h> header file. */
! #undef HAVE_SYSLOG_H
! 
! /* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.
!    */
  #undef HAVE_SYS_DIR_H
  
! /* Define to 1 if you have the <sys/errno.h> header file. */
  #undef HAVE_SYS_ERRNO_H
  
! /* Define to 1 if you have the <sys/fcntl.h> header file. */
  #undef HAVE_SYS_FCNTL_H
  
! /* Define to 1 if you have the <sys/file.h> header file. */
  #undef HAVE_SYS_FILE_H
  
! /* Define to 1 if you have the <sys/ioctl.h> header file. */
  #undef HAVE_SYS_IOCTL_H
  
! /* Define to 1 if you have the <sys/mnttab.h> header file. */
  #undef HAVE_SYS_MNTTAB_H
  
! /* Define to 1 if you have the <sys/mount.h> header file. */
  #undef HAVE_SYS_MOUNT_H
  
! /* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.
!    */
  #undef HAVE_SYS_NDIR_H
  
! /* Define to 1 if you have the <sys/quota.h> header file. */
  #undef HAVE_SYS_QUOTA_H
  
! /* Define to 1 if you have the <sys/statvfs.h> header file. */
  #undef HAVE_SYS_STATVFS_H
  
! /* Define to 1 if you have the <sys/stat.h> header file. */
! #undef HAVE_SYS_STAT_H
! 
! /* Define to 1 if you have the <sys/termios.h> header file. */
  #undef HAVE_SYS_TERMIOS_H
  
! /* Define to 1 if you have the <sys/time.h> header file. */
  #undef HAVE_SYS_TIME_H
  
! /* Define to 1 if you have the <sys/types.h> header file. */
  #undef HAVE_SYS_TYPES_H
  
! /* Define to 1 if you have the <sys/vfs.h> header file. */
  #undef HAVE_SYS_VFS_H
  
! /* Define to 1 if you have <sys/wait.h> that is POSIX.1 compatible. */
! #undef HAVE_SYS_WAIT_H
  
! /* Define to 1 if you have the <termios.h> header file. */
  #undef HAVE_TERMIOS_H
  
! /* Define to 1 if you have the <ufs/quota.h> header file. */
  #undef HAVE_UFS_QUOTA_H
  
! /* Define to 1 if you have the <unistd.h> header file. */
  #undef HAVE_UNISTD_H
  
! /* Define to 1 if `utime(file, NULL)' sets file's timestamp to the present. */
! #undef HAVE_UTIME_NULL
  
! /* Define to 1 if you have the `wait3' system call. Deprecated, you should no
!    longer depend upon `wait3'. */
! #undef HAVE_WAIT3
  
! /* Define to 1 if `major', `minor', and `makedev' are declared in <mkdev.h>.
!    */
! #undef MAJOR_IN_MKDEV
  
! /* Define to 1 if `major', `minor', and `makedev' are declared in
!    <sysmacros.h>. */
! #undef MAJOR_IN_SYSMACROS
  
! /* Name of package */
! #undef PACKAGE
  
! /* Define to the address where bug reports for this package should be sent. */
! #undef PACKAGE_BUGREPORT
  
! /* Define to the full name of this package. */
! #undef PACKAGE_NAME
  
! /* Define to the full name and version of this package. */
! #undef PACKAGE_STRING
  
! /* Define to the one symbol short name of this package. */
! #undef PACKAGE_TARNAME
  
! /* Define to the version of this package. */
! #undef PACKAGE_VERSION
  
! /* Define as the return type of signal handlers (`int' or `void'). */
! #undef RETSIGTYPE
  
! /* path to message dir [[PKGCONF/msg]] */
! #undef SERVERTEXT
  
! /* Define to 1 if the `setpgrp' function takes no argument. */
! #undef SETPGRP_VOID
  
! /* Define to 1 if you have the ANSI C header files. */
! #undef STDC_HEADERS
  
! /* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
! #undef TIME_WITH_SYS_TIME
  
! /* Define to 1 if your <sys/time.h> declares `struct tm'. */
! #undef TM_IN_SYS_TIME
  
! /* path to UAMs [default=PKGCONF/uams] */
! #undef UAMS_PATH
  
! /* Version number of package */
! #undef VERSION
  
! /* path to cracklib dictionary */
! #undef _PATH_CRACKLIB
  
! /* Define to empty if `const' does not conform to ANSI C. */
! #undef const
  
! /* Define to `int' if <sys/types.h> doesn't define. */
! #undef gid_t
  
! /* Define as `__inline' if that's what the C compiler calls it, or to nothing
!    if it is not supported. */
! #undef inline
  
! /* Define to `int' if <sys/types.h> does not define. */
! #undef mode_t
  
! /* Define to `long' if <sys/types.h> does not define. */
! #undef off_t
  
! /* Define to `int' if <sys/types.h> does not define. */
! #undef pid_t
  
! /* Define to `unsigned' if <sys/types.h> does not define. */
! #undef size_t
  
+ /* Define to `int' if <sys/types.h> doesn't define. */
+ #undef uid_t
diff -d -r -c netatalk-1.5.3.1/configure netatalk-1.5.3.1-dce-3.0/configure
*** netatalk-1.5.3.1/configure	Wed Mar 27 14:20:55 2002
--- netatalk-1.5.3.1-dce-3.0/configure	Mon Jun  3 17:15:09 2002
***************
*** 1,63 ****
  #! /bin/sh
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
  # Guess values for system-dependent variables and create Makefiles.
! # Generated automatically using autoconf version 2.13 
! # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
  #
  # This configure script is free software; the Free Software Foundation
  # gives unlimited permission to copy, distribute and modify it.
  
- # Defaults:
- ac_help=
- ac_default_prefix=/usr/local
- # Any additions from configure.in:
- ac_help="$ac_help
-   --disable-dependency-tracking Speeds up one-time builds
-   --enable-dependency-tracking  Do not reject slow dependency extractors"
- ac_help="$ac_help
-   --enable-shared[=PKGS]  build shared libraries [default=yes]"
- ac_help="$ac_help
-   --enable-static[=PKGS]  build static libraries [default=yes]"
- ac_help="$ac_help
-   --enable-fast-install[=PKGS]  optimize for fast installation [default=yes]"
- ac_help="$ac_help
-   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]"
- 
  # Find the correct PATH separator.  Usually this is `:', but
  # DJGPP uses `;' like DOS.
  if test "X${PATH_SEPARATOR+set}" != Xset; then
--- 1,12 ----
  #! /bin/sh
  # Guess values for system-dependent variables and create Makefiles.
! # Generated by GNU Autoconf 2.53.
  #
+ # Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
+ # Free Software Foundation, Inc.
  # This configure script is free software; the Free Software Foundation
  # gives unlimited permission to copy, distribute and modify it.
  
  # Find the correct PATH separator.  Usually this is `:', but
  # DJGPP uses `;' like DOS.
  if test "X${PATH_SEPARATOR+set}" != Xset; then
***************
*** 216,295 ****
  fi
  
  
! ac_help="$ac_help
!   --disable-libtool-lock  avoid locking (might break parallel builds)"
! ac_help="$ac_help
!   --with-pic              try to use only PIC/non-PIC objects [default=use both]"
! ac_help="$ac_help
!   --disable-admin-group   disable admin group"
! ac_help="$ac_help
!   --enable-afs            enable AFS support"
! ac_help="$ac_help
!   --with-pkgconfdir=DIR   package specific configuration in DIR
!                           [SYSCONF/netatalk]"
! ac_help="$ac_help
!   --with-nls-dir=PATH     path to NLS files [PKGCONF/nls]"
! ac_help="$ac_help
!   --with-cracklib=DICT    enable/set location of cracklib dictionary"
! ac_help="$ac_help
!   --disable-ddp           disable DDP"
! ac_help="$ac_help
!   --enable-debug          enable debug code"
! ac_help="$ac_help
!   --enable-dropkludge     enable the experimental dropbox fix (INSECURE!) "
! ac_help="$ac_help
!   --enable-force-uidgid   allow forcing of uid/gid per volume (BROKEN) "
! ac_help="$ac_help
!   --with-did=SCHEME       set DID scheme (last,hash,mtab,cnid)"
! ac_help="$ac_help
!   --with-db3=PATH         specify path to Berkeley DB3 installation"
! ac_help="$ac_help
!   --with-message-dir=PATH path to message files [[PKGCONF/msg]]"
! ac_help="$ac_help
!   --enable-srvloc[=DIR]   turn on Server Location Protocol support"
! ac_help="$ac_help
!   --with-pam=PATH         specify path to PAM installation"
! ac_help="$ac_help
!   --with-shadow           enable shadow password support"
! ac_help="$ac_help
!   --disable-shell-check   disable checking for a valid shell"
! ac_help="$ac_help
!   --with-flock-locks      enable flock locks support"
! ac_help="$ac_help
!   --with-tcp-wrappers     enable TCP wrappers support"
! ac_help="$ac_help
!   --enable-redhat         use redhat-style sysv configuration "
! ac_help="$ac_help
!   --enable-suse           use suse-style sysv configuration "
! ac_help="$ac_help
!   --enable-cobalt         use cobalt-style sysv configuration "
! ac_help="$ac_help
!   --enable-netbsd         use NetBSD-style rc.d configuration "
! ac_help="$ac_help
!   --enable-timelord       enable compilation of timelord server"
! ac_help="$ac_help
!   --with-uams-path=PATH   path to UAMs [[PKGCONF/uams]]"
! ac_help="$ac_help
!   --enable-fhs            use Filesystem Hierarchy Standard (FHS) compatibility"
! ac_help="$ac_help
!   --with-ssl-dir=PATH     specify path to OpenSSL installation (must contain
!                           lib and include dirs)"
! ac_help="$ac_help
!   --enable-pgp-uam        enable build of PGP UAM module"
! ac_help="$ac_help
!   --enable-krb4-uam       enable build of Kerberos v4 UAM module"
! ac_help="$ac_help
!   --enable-overwrite      overwrite configuration files during installation"
  
  # Initialize some variables set by options.
  # The variables have the same names as the options, with
  # dashes changed to underlines.
! build=NONE
! cache_file=./config.cache
  exec_prefix=NONE
- host=NONE
  no_create=
- nonopt=NONE
  no_recursion=
  prefix=NONE
  program_prefix=NONE
--- 165,469 ----
  fi
  
  
! 
! if expr a : '\(a\)' >/dev/null 2>&1; then
!   as_expr=expr
! else
!   as_expr=false
! fi
! 
! 
! ## --------------------- ##
! ## M4sh Initialization.  ##
! ## --------------------- ##
! 
! # Be Bourne compatible
! if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
!   emulate sh
!   NULLCMD=:
! elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
!   set -o posix
! fi
! 
! # NLS nuisances.
! # Support unset when possible.
! if (FOO=FOO; unset FOO) >/dev/null 2>&1; then
!   as_unset=unset
! else
!   as_unset=false
! fi
! 
! (set +x; test -n "`(LANG=C; export LANG) 2>&1`") &&
!     { $as_unset LANG || test "${LANG+set}" != set; } ||
!       { LANG=C; export LANG; }
! (set +x; test -n "`(LC_ALL=C; export LC_ALL) 2>&1`") &&
!     { $as_unset LC_ALL || test "${LC_ALL+set}" != set; } ||
!       { LC_ALL=C; export LC_ALL; }
! (set +x; test -n "`(LC_TIME=C; export LC_TIME) 2>&1`") &&
!     { $as_unset LC_TIME || test "${LC_TIME+set}" != set; } ||
!       { LC_TIME=C; export LC_TIME; }
! (set +x; test -n "`(LC_CTYPE=C; export LC_CTYPE) 2>&1`") &&
!     { $as_unset LC_CTYPE || test "${LC_CTYPE+set}" != set; } ||
!       { LC_CTYPE=C; export LC_CTYPE; }
! (set +x; test -n "`(LANGUAGE=C; export LANGUAGE) 2>&1`") &&
!     { $as_unset LANGUAGE || test "${LANGUAGE+set}" != set; } ||
!       { LANGUAGE=C; export LANGUAGE; }
! (set +x; test -n "`(LC_COLLATE=C; export LC_COLLATE) 2>&1`") &&
!     { $as_unset LC_COLLATE || test "${LC_COLLATE+set}" != set; } ||
!       { LC_COLLATE=C; export LC_COLLATE; }
! (set +x; test -n "`(LC_NUMERIC=C; export LC_NUMERIC) 2>&1`") &&
!     { $as_unset LC_NUMERIC || test "${LC_NUMERIC+set}" != set; } ||
!       { LC_NUMERIC=C; export LC_NUMERIC; }
! (set +x; test -n "`(LC_MESSAGES=C; export LC_MESSAGES) 2>&1`") &&
!     { $as_unset LC_MESSAGES || test "${LC_MESSAGES+set}" != set; } ||
!       { LC_MESSAGES=C; export LC_MESSAGES; }
! 
! 
! # Name of the executable.
! as_me=`(basename "$0") 2>/dev/null ||
! $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
! 	 X"$0" : 'X\(//\)$' \| \
! 	 X"$0" : 'X\(/\)$' \| \
! 	 .     : '\(.\)' 2>/dev/null ||
! echo X/"$0" |
!     sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
!   	  /^X\/\(\/\/\)$/{ s//\1/; q; }
!   	  /^X\/\(\/\).*/{ s//\1/; q; }
!   	  s/.*/./; q'`
! 
! # PATH needs CR, and LINENO needs CR and PATH.
! # Avoid depending upon Character Ranges.
! as_cr_letters='abcdefghijklmnopqrstuvwxyz'
! as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
! as_cr_Letters=$as_cr_letters$as_cr_LETTERS
! as_cr_digits='0123456789'
! as_cr_alnum=$as_cr_Letters$as_cr_digits
! 
! # The user is always right.
! if test "${PATH_SEPARATOR+set}" != set; then
!   echo "#! /bin/sh" >conftest.sh
!   echo  "exit 0"   >>conftest.sh
!   chmod +x conftest.sh
!   if (PATH=".;."; conftest.sh) >/dev/null 2>&1; then
!     PATH_SEPARATOR=';'
!   else
!     PATH_SEPARATOR=:
!   fi
!   rm -f conftest.sh
! fi
! 
! 
!   as_lineno_1=$LINENO
!   as_lineno_2=$LINENO
!   as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
!   test "x$as_lineno_1" != "x$as_lineno_2" &&
!   test "x$as_lineno_3"  = "x$as_lineno_2"  || {
!   # Find who we are.  Look in the path if we contain no path at all
!   # relative or not.
!   case $0 in
!     *[\\/]* ) as_myself=$0 ;;
!     *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
! done
! 
!        ;;
!   esac
!   # We did not find ourselves, most probably we were run as `sh COMMAND'
!   # in which case we are not to be found in the path.
!   if test "x$as_myself" = x; then
!     as_myself=$0
!   fi
!   if test ! -f "$as_myself"; then
!     { echo "$as_me: error: cannot find myself; rerun with an absolute path" >&2
!    { (exit 1); exit 1; }; }
!   fi
!   case $CONFIG_SHELL in
!   '')
!     as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for as_base in sh bash ksh sh5; do
! 	 case $as_dir in
! 	 /*)
! 	   if ("$as_dir/$as_base" -c '
!   as_lineno_1=$LINENO
!   as_lineno_2=$LINENO
!   as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
!   test "x$as_lineno_1" != "x$as_lineno_2" &&
!   test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
! 	     CONFIG_SHELL=$as_dir/$as_base
! 	     export CONFIG_SHELL
! 	     exec "$CONFIG_SHELL" "$0" ${1+"$@"}
! 	   fi;;
! 	 esac
!        done
! done
! ;;
!   esac
! 
!   # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
!   # uniformly replaced by the line number.  The first 'sed' inserts a
!   # line-number line before each line; the second 'sed' does the real
!   # work.  The second script uses 'N' to pair each line-number line
!   # with the numbered line, and appends trailing '-' during
!   # substitution so that $LINENO is not a special case at line end.
!   # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
!   # second 'sed' script.  Blame Lee E. McMahon for sed's syntax.  :-)
!   sed '=' <$as_myself |
!     sed '
!       N
!       s,$,-,
!       : loop
!       s,^\(['$as_cr_digits']*\)\(.*\)[$]LINENO\([^'$as_cr_alnum'_]\),\1\2\1\3,
!       t loop
!       s,-$,,
!       s,^['$as_cr_digits']*\n,,
!     ' >$as_me.lineno &&
!   chmod +x $as_me.lineno ||
!     { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
!    { (exit 1); exit 1; }; }
! 
!   # Don't try to exec as it changes $[0], causing all sort of problems
!   # (the dirname of $[0] is not the place where we might find the
!   # original and so on.  Autoconf is especially sensible to this).
!   . ./$as_me.lineno
!   # Exit status is that of the last command.
!   exit
! }
! 
! 
! case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
!   *c*,-n*) ECHO_N= ECHO_C='
! ' ECHO_T='	' ;;
!   *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
!   *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
! esac
! 
! if expr a : '\(a\)' >/dev/null 2>&1; then
!   as_expr=expr
! else
!   as_expr=false
! fi
! 
! rm -f conf$$ conf$$.exe conf$$.file
! echo >conf$$.file
! if ln -s conf$$.file conf$$ 2>/dev/null; then
!   # We could just check for DJGPP; but this test a) works b) is more generic
!   # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
!   if test -f conf$$.exe; then
!     # Don't use ln at all; we don't have any links
!     as_ln_s='cp -p'
!   else
!     as_ln_s='ln -s'
!   fi
! elif ln conf$$.file conf$$ 2>/dev/null; then
!   as_ln_s=ln
! else
!   as_ln_s='cp -p'
! fi
! rm -f conf$$ conf$$.exe conf$$.file
! 
! as_executable_p="test -f"
! 
! # Sed expression to map a string onto a valid CPP name.
! as_tr_cpp="sed y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g"
! 
! # Sed expression to map a string onto a valid variable name.
! as_tr_sh="sed y%*+%pp%;s%[^_$as_cr_alnum]%_%g"
! 
! 
! # IFS
! # We need space, tab and new line, in precisely that order.
! as_nl='
! '
! IFS=" 	$as_nl"
! 
! # CDPATH.
! $as_unset CDPATH || test "${CDPATH+set}" != set || { CDPATH=$PATH_SEPARATOR; export CDPATH; }
! 
! 
! # Name of the host.
! # hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
! # so uname gets run too.
! ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
! 
! exec 6>&1
! 
! #
! # Initializations.
! #
! ac_default_prefix=/usr/local
! cross_compiling=no
! subdirs=
! MFLAGS=
! MAKEFLAGS=
! SHELL=${CONFIG_SHELL-/bin/sh}
! 
! # Maximum number of lines to put in a shell here document.
! # This variable seems obsolete.  It should probably be removed, and
! # only ac_max_sed_lines should be used.
! : ${ac_max_here_lines=38}
! 
! # Identity of this package.
! PACKAGE_NAME=
! PACKAGE_TARNAME=
! PACKAGE_VERSION=
! PACKAGE_STRING=
! PACKAGE_BUGREPORT=
! 
! ac_unique_file="bin/adv1tov2/adv1tov2.c"
! # Factoring default headers for most tests.
! ac_includes_default="\
! #include <stdio.h>
! #if HAVE_SYS_TYPES_H
! # include <sys/types.h>
! #endif
! #if HAVE_SYS_STAT_H
! # include <sys/stat.h>
! #endif
! #if STDC_HEADERS
! # include <stdlib.h>
! # include <stddef.h>
! #else
! # if HAVE_STDLIB_H
! #  include <stdlib.h>
! # endif
! #endif
! #if HAVE_STRING_H
! # if !STDC_HEADERS && HAVE_MEMORY_H
! #  include <memory.h>
! # endif
! # include <string.h>
! #endif
! #if HAVE_STRINGS_H
! # include <strings.h>
! #endif
! #if HAVE_INTTYPES_H
! # include <inttypes.h>
! #else
! # if HAVE_STDINT_H
! #  include <stdint.h>
! # endif
! #endif
! #if HAVE_UNISTD_H
! # include <unistd.h>
! #endif"
! 
  
  # Initialize some variables set by options.
+ ac_init_help=
+ ac_init_version=false
  # The variables have the same names as the options, with
  # dashes changed to underlines.
! cache_file=/dev/null
  exec_prefix=NONE
  no_create=
  no_recursion=
  prefix=NONE
  program_prefix=NONE
***************
*** 298,307 ****
  silent=
  site=
  srcdir=
- target=NONE
  verbose=
  x_includes=NONE
  x_libraries=NONE
  bindir='${exec_prefix}/bin'
  sbindir='${exec_prefix}/sbin'
  libexecdir='${exec_prefix}/libexec'
--- 472,486 ----
  silent=
  site=
  srcdir=
  verbose=
  x_includes=NONE
  x_libraries=NONE
+ 
+ # Installation directory options.
+ # These are left unexpanded so users can "make install exec_prefix=/foo"
+ # and all the variables that are supposed to be based on exec_prefix
+ # by default will actually change.
+ # Use braces instead of parens because sh, perl, etc. also accept them.
  bindir='${exec_prefix}/bin'
  sbindir='${exec_prefix}/sbin'
  libexecdir='${exec_prefix}/libexec'
***************
*** 315,331 ****
  infodir='${prefix}/info'
  mandir='${prefix}/man'
  
- # Initialize some other variables.
- subdirs=
- MFLAGS= MAKEFLAGS=
- SHELL=${CONFIG_SHELL-/bin/sh}
- # Maximum number of lines to put in a shell here document.
- ac_max_here_lines=12
- 
  ac_prev=
  for ac_option
  do
- 
    # If the previous option needs an argument, assign it.
    if test -n "$ac_prev"; then
      eval "$ac_prev=\$ac_option"
--- 494,502 ----
***************
*** 333,391 ****
      continue
    fi
  
!   case "$ac_option" in
!   -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
!   *) ac_optarg= ;;
!   esac
  
    # Accept the important Cygnus configure options, so we can diagnose typos.
  
!   case "$ac_option" in
  
    -bindir | --bindir | --bindi | --bind | --bin | --bi)
      ac_prev=bindir ;;
    -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
!     bindir="$ac_optarg" ;;
  
    -build | --build | --buil | --bui | --bu)
!     ac_prev=build ;;
    -build=* | --build=* | --buil=* | --bui=* | --bu=*)
!     build="$ac_optarg" ;;
  
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
!     cache_file="$ac_optarg" ;;
  
    -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
      ac_prev=datadir ;;
    -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
    | --da=*)
!     datadir="$ac_optarg" ;;
  
    -disable-* | --disable-*)
!     ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
      # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
!       { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
!     fi
!     ac_feature=`echo $ac_feature| sed 's/-/_/g'`
!     eval "enable_${ac_feature}=no" ;;
  
    -enable-* | --enable-*)
!     ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
      # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
!       { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
!     fi
!     ac_feature=`echo $ac_feature| sed 's/-/_/g'`
!     case "$ac_option" in
!       *=*) ;;
        *) ac_optarg=yes ;;
      esac
!     eval "enable_${ac_feature}='$ac_optarg'" ;;
  
    -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
    | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
--- 504,562 ----
      continue
    fi
  
!   ac_optarg=`expr "x$ac_option" : 'x[^=]*=\(.*\)'`
  
    # Accept the important Cygnus configure options, so we can diagnose typos.
  
!   case $ac_option in
  
    -bindir | --bindir | --bindi | --bind | --bin | --bi)
      ac_prev=bindir ;;
    -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
!     bindir=$ac_optarg ;;
  
    -build | --build | --buil | --bui | --bu)
!     ac_prev=build_alias ;;
    -build=* | --build=* | --buil=* | --bui=* | --bu=*)
!     build_alias=$ac_optarg ;;
  
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
!     cache_file=$ac_optarg ;;
! 
!   --config-cache | -C)
!     cache_file=config.cache ;;
  
    -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
      ac_prev=datadir ;;
    -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
    | --da=*)
!     datadir=$ac_optarg ;;
  
    -disable-* | --disable-*)
!     ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
!    { (exit 1); exit 1; }; }
!     ac_feature=`echo $ac_feature | sed 's/-/_/g'`
!     eval "enable_$ac_feature=no" ;;
  
    -enable-* | --enable-*)
!     ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
!    { (exit 1); exit 1; }; }
!     ac_feature=`echo $ac_feature | sed 's/-/_/g'`
!     case $ac_option in
!       *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
        *) ac_optarg=yes ;;
      esac
!     eval "enable_$ac_feature='$ac_optarg'" ;;
  
    -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
    | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
***************
*** 394,488 ****
    -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
    | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
    | --exec=* | --exe=* | --ex=*)
!     exec_prefix="$ac_optarg" ;;
  
    -gas | --gas | --ga | --g)
      # Obsolete; use --with-gas.
      with_gas=yes ;;
  
!   -help | --help | --hel | --he)
!     # Omit some internal or obsolete options to make the list less imposing.
!     # This message is too long to be a string in the A/UX 3.1 sh.
!     cat << EOF
! Usage: configure [options] [host]
! Options: [defaults in brackets after descriptions]
! Configuration:
!   --cache-file=FILE       cache test results in FILE
!   --help                  print this message
!   --no-create             do not create output files
!   --quiet, --silent       do not print \`checking...' messages
!   --version               print the version of autoconf that created configure
! Directory and file names:
!   --prefix=PREFIX         install architecture-independent files in PREFIX
!                           [$ac_default_prefix]
!   --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
!                           [same as prefix]
!   --bindir=DIR            user executables in DIR [EPREFIX/bin]
!   --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
!   --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
!   --datadir=DIR           read-only architecture-independent data in DIR
!                           [PREFIX/share]
!   --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
!   --sharedstatedir=DIR    modifiable architecture-independent data in DIR
!                           [PREFIX/com]
!   --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
!   --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
!   --includedir=DIR        C header files in DIR [PREFIX/include]
!   --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
!   --infodir=DIR           info documentation in DIR [PREFIX/info]
!   --mandir=DIR            man documentation in DIR [PREFIX/man]
!   --srcdir=DIR            find the sources in DIR [configure dir or ..]
!   --program-prefix=PREFIX prepend PREFIX to installed program names
!   --program-suffix=SUFFIX append SUFFIX to installed program names
!   --program-transform-name=PROGRAM
!                           run sed PROGRAM on installed program names
! EOF
!     cat << EOF
! Host type:
!   --build=BUILD           configure for building on BUILD [BUILD=HOST]
!   --host=HOST             configure for HOST [guessed]
!   --target=TARGET         configure for TARGET [TARGET=HOST]
! Features and packages:
!   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
!   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
!   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
!   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
!   --x-includes=DIR        X include files are in DIR
!   --x-libraries=DIR       X library files are in DIR
! EOF
!     if test -n "$ac_help"; then
!       echo "--enable and --with options recognized:$ac_help"
!     fi
!     exit 0 ;;
  
    -host | --host | --hos | --ho)
!     ac_prev=host ;;
    -host=* | --host=* | --hos=* | --ho=*)
!     host="$ac_optarg" ;;
  
    -includedir | --includedir | --includedi | --included | --include \
    | --includ | --inclu | --incl | --inc)
      ac_prev=includedir ;;
    -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
    | --includ=* | --inclu=* | --incl=* | --inc=*)
!     includedir="$ac_optarg" ;;
  
    -infodir | --infodir | --infodi | --infod | --info | --inf)
      ac_prev=infodir ;;
    -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
!     infodir="$ac_optarg" ;;
  
    -libdir | --libdir | --libdi | --libd)
      ac_prev=libdir ;;
    -libdir=* | --libdir=* | --libdi=* | --libd=*)
!     libdir="$ac_optarg" ;;
  
    -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
    | --libexe | --libex | --libe)
      ac_prev=libexecdir ;;
    -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
    | --libexe=* | --libex=* | --libe=*)
!     libexecdir="$ac_optarg" ;;
  
    -localstatedir | --localstatedir | --localstatedi | --localstated \
    | --localstate | --localstat | --localsta | --localst \
--- 565,611 ----
    -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
    | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
    | --exec=* | --exe=* | --ex=*)
!     exec_prefix=$ac_optarg ;;
  
    -gas | --gas | --ga | --g)
      # Obsolete; use --with-gas.
      with_gas=yes ;;
  
!   -help | --help | --hel | --he | -h)
!     ac_init_help=long ;;
!   -help=r* | --help=r* | --hel=r* | --he=r* | -hr*)
!     ac_init_help=recursive ;;
!   -help=s* | --help=s* | --hel=s* | --he=s* | -hs*)
!     ac_init_help=short ;;
  
    -host | --host | --hos | --ho)
!     ac_prev=host_alias ;;
    -host=* | --host=* | --hos=* | --ho=*)
!     host_alias=$ac_optarg ;;
  
    -includedir | --includedir | --includedi | --included | --include \
    | --includ | --inclu | --incl | --inc)
      ac_prev=includedir ;;
    -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
    | --includ=* | --inclu=* | --incl=* | --inc=*)
!     includedir=$ac_optarg ;;
  
    -infodir | --infodir | --infodi | --infod | --info | --inf)
      ac_prev=infodir ;;
    -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
!     infodir=$ac_optarg ;;
  
    -libdir | --libdir | --libdi | --libd)
      ac_prev=libdir ;;
    -libdir=* | --libdir=* | --libdi=* | --libd=*)
!     libdir=$ac_optarg ;;
  
    -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
    | --libexe | --libex | --libe)
      ac_prev=libexecdir ;;
    -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
    | --libexe=* | --libex=* | --libe=*)
!     libexecdir=$ac_optarg ;;
  
    -localstatedir | --localstatedir | --localstatedi | --localstated \
    | --localstate | --localstat | --localsta | --localst \
***************
*** 491,509 ****
    -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
    | --localstate=* | --localstat=* | --localsta=* | --localst=* \
    | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
!     localstatedir="$ac_optarg" ;;
  
    -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
      ac_prev=mandir ;;
    -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
!     mandir="$ac_optarg" ;;
  
    -nfp | --nfp | --nf)
      # Obsolete; use --without-fp.
      with_fp=no ;;
  
    -no-create | --no-create | --no-creat | --no-crea | --no-cre \
!   | --no-cr | --no-c)
      no_create=yes ;;
  
    -no-recursion | --no-recursion | --no-recursio | --no-recursi \
--- 614,632 ----
    -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
    | --localstate=* | --localstat=* | --localsta=* | --localst=* \
    | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
!     localstatedir=$ac_optarg ;;
  
    -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
      ac_prev=mandir ;;
    -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
!     mandir=$ac_optarg ;;
  
    -nfp | --nfp | --nf)
      # Obsolete; use --without-fp.
      with_fp=no ;;
  
    -no-create | --no-create | --no-creat | --no-crea | --no-cre \
!   | --no-cr | --no-c | -n)
      no_create=yes ;;
  
    -no-recursion | --no-recursion | --no-recursio | --no-recursi \
***************
*** 517,542 ****
    -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
    | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
    | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
!     oldincludedir="$ac_optarg" ;;
  
    -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
      ac_prev=prefix ;;
    -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
!     prefix="$ac_optarg" ;;
  
    -program-prefix | --program-prefix | --program-prefi | --program-pref \
    | --program-pre | --program-pr | --program-p)
      ac_prev=program_prefix ;;
    -program-prefix=* | --program-prefix=* | --program-prefi=* \
    | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
!     program_prefix="$ac_optarg" ;;
  
    -program-suffix | --program-suffix | --program-suffi | --program-suff \
    | --program-suf | --program-su | --program-s)
      ac_prev=program_suffix ;;
    -program-suffix=* | --program-suffix=* | --program-suffi=* \
    | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
!     program_suffix="$ac_optarg" ;;
  
    -program-transform-name | --program-transform-name \
    | --program-transform-nam | --program-transform-na \
--- 640,665 ----
    -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
    | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
    | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
!     oldincludedir=$ac_optarg ;;
  
    -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
      ac_prev=prefix ;;
    -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
!     prefix=$ac_optarg ;;
  
    -program-prefix | --program-prefix | --program-prefi | --program-pref \
    | --program-pre | --program-pr | --program-p)
      ac_prev=program_prefix ;;
    -program-prefix=* | --program-prefix=* | --program-prefi=* \
    | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
!     program_prefix=$ac_optarg ;;
  
    -program-suffix | --program-suffix | --program-suffi | --program-suff \
    | --program-suf | --program-su | --program-s)
      ac_prev=program_suffix ;;
    -program-suffix=* | --program-suffix=* | --program-suffi=* \
    | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
!     program_suffix=$ac_optarg ;;
  
    -program-transform-name | --program-transform-name \
    | --program-transform-nam | --program-transform-na \
***************
*** 553,559 ****
    | --program-transfo=* | --program-transf=* \
    | --program-trans=* | --program-tran=* \
    | --progr-tra=* | --program-tr=* | --program-t=*)
!     program_transform_name="$ac_optarg" ;;
  
    -q | -quiet | --quiet | --quie | --qui | --qu | --q \
    | -silent | --silent | --silen | --sile | --sil)
--- 676,682 ----
    | --program-transfo=* | --program-transf=* \
    | --program-trans=* | --program-tran=* \
    | --progr-tra=* | --program-tr=* | --program-t=*)
!     program_transform_name=$ac_optarg ;;
  
    -q | -quiet | --quiet | --quie | --qui | --qu | --q \
    | -silent | --silent | --silen | --sile | --sil)
***************
*** 563,569 ****
      ac_prev=sbindir ;;
    -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
    | --sbi=* | --sb=*)
!     sbindir="$ac_optarg" ;;
  
    -sharedstatedir | --sharedstatedir | --sharedstatedi \
    | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
--- 686,692 ----
      ac_prev=sbindir ;;
    -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
    | --sbi=* | --sb=*)
!     sbindir=$ac_optarg ;;
  
    -sharedstatedir | --sharedstatedir | --sharedstatedi \
    | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
***************
*** 574,631 ****
    | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
    | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
    | --sha=* | --sh=*)
!     sharedstatedir="$ac_optarg" ;;
  
    -site | --site | --sit)
      ac_prev=site ;;
    -site=* | --site=* | --sit=*)
!     site="$ac_optarg" ;;
  
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
!     srcdir="$ac_optarg" ;;
  
    -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
    | --syscon | --sysco | --sysc | --sys | --sy)
      ac_prev=sysconfdir ;;
    -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
    | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
!     sysconfdir="$ac_optarg" ;;
  
    -target | --target | --targe | --targ | --tar | --ta | --t)
!     ac_prev=target ;;
    -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
!     target="$ac_optarg" ;;
  
    -v | -verbose | --verbose | --verbos | --verbo | --verb)
      verbose=yes ;;
  
!   -version | --version | --versio | --versi | --vers)
!     echo "configure generated by autoconf version 2.13"
!     exit 0 ;;
  
    -with-* | --with-*)
!     ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
      # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
!       { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
!     fi
      ac_package=`echo $ac_package| sed 's/-/_/g'`
!     case "$ac_option" in
!       *=*) ;;
        *) ac_optarg=yes ;;
      esac
!     eval "with_${ac_package}='$ac_optarg'" ;;
  
    -without-* | --without-*)
!     ac_package=`echo $ac_option|sed -e 's/-*without-//'`
      # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
!       { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
!     fi
!     ac_package=`echo $ac_package| sed 's/-/_/g'`
!     eval "with_${ac_package}=no" ;;
  
    --x)
      # Obsolete; use --with-x.
--- 697,753 ----
    | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
    | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
    | --sha=* | --sh=*)
!     sharedstatedir=$ac_optarg ;;
  
    -site | --site | --sit)
      ac_prev=site ;;
    -site=* | --site=* | --sit=*)
!     site=$ac_optarg ;;
  
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
!     srcdir=$ac_optarg ;;
  
    -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
    | --syscon | --sysco | --sysc | --sys | --sy)
      ac_prev=sysconfdir ;;
    -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
    | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
!     sysconfdir=$ac_optarg ;;
  
    -target | --target | --targe | --targ | --tar | --ta | --t)
!     ac_prev=target_alias ;;
    -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
!     target_alias=$ac_optarg ;;
  
    -v | -verbose | --verbose | --verbos | --verbo | --verb)
      verbose=yes ;;
  
!   -version | --version | --versio | --versi | --vers | -V)
!     ac_init_version=: ;;
  
    -with-* | --with-*)
!     ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid package name: $ac_package" >&2
!    { (exit 1); exit 1; }; }
      ac_package=`echo $ac_package| sed 's/-/_/g'`
!     case $ac_option in
!       *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
        *) ac_optarg=yes ;;
      esac
!     eval "with_$ac_package='$ac_optarg'" ;;
  
    -without-* | --without-*)
!     ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
      # Reject names that are not valid shell variable names.
!     expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
!       { echo "$as_me: error: invalid package name: $ac_package" >&2
!    { (exit 1); exit 1; }; }
!     ac_package=`echo $ac_package | sed 's/-/_/g'`
!     eval "with_$ac_package=no" ;;
  
    --x)
      # Obsolete; use --with-x.
***************
*** 636,734 ****
      ac_prev=x_includes ;;
    -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
    | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
!     x_includes="$ac_optarg" ;;
  
    -x-libraries | --x-libraries | --x-librarie | --x-librari \
    | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
      ac_prev=x_libraries ;;
    -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
    | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
!     x_libraries="$ac_optarg" ;;
  
!   -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
      ;;
  
    *)
!     if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
!       echo "configure: warning: $ac_option: invalid host type" 1>&2
!     fi
!     if test "x$nonopt" != xNONE; then
!       { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
!     fi
!     nonopt="$ac_option"
      ;;
  
    esac
  done
  
  if test -n "$ac_prev"; then
!   { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
! fi
! 
! trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15
! 
! # File descriptor usage:
! # 0 standard input
! # 1 file creation
! # 2 errors and warnings
! # 3 some systems may open it to /dev/tty
! # 4 used on the Kubota Titan
! # 6 checking for... messages and results
! # 5 compiler messages saved in config.log
! if test "$silent" = yes; then
!   exec 6>/dev/null
! else
!   exec 6>&1
  fi
- exec 5>./config.log
  
! echo "\
! This file contains any messages produced by compilers while
! running configure, to aid debugging if configure makes a mistake.
! " 1>&5
  
! # Strip out --no-create and --no-recursion so they do not pile up.
! # Also quote any args containing shell metacharacters.
! ac_configure_args=
! for ac_arg
  do
!   case "$ac_arg" in
!   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
!   | --no-cr | --no-c) ;;
!   -no-recursion | --no-recursion | --no-recursio | --no-recursi \
!   | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
!   *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
!   ac_configure_args="$ac_configure_args '$ac_arg'" ;;
!   *) ac_configure_args="$ac_configure_args $ac_arg" ;;
    esac
  done
  
! # NLS nuisances.
! # Only set these to C if already set.  These must not be set unconditionally
! # because not all systems understand e.g. LANG=C (notably SCO).
! # Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
! # Non-C LC_CTYPE values break the ctype check.
! if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
! if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
! if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
! if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi
  
! # confdefs.h avoids OS command line length limits that DEFS can exceed.
! rm -rf conftest* confdefs.h
! # AIX cpp loses on an empty file, so make sure it contains at least a newline.
! echo > confdefs.h
  
- # A filename unique to this package, relative to the directory that
- # configure is in, which we can look for to find out if srcdir is correct.
- ac_unique_file=bin/adv1tov2/adv1tov2.c
  
  # Find the source files, if location was not specified.
  if test -z "$srcdir"; then
    ac_srcdir_defaulted=yes
    # Try the directory containing this script, then its parent.
!   ac_prog=$0
!   ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
!   test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
    srcdir=$ac_confdir
    if test ! -r $srcdir/$ac_unique_file; then
      srcdir=..
--- 758,867 ----
      ac_prev=x_includes ;;
    -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
    | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
!     x_includes=$ac_optarg ;;
  
    -x-libraries | --x-libraries | --x-librarie | --x-librari \
    | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
      ac_prev=x_libraries ;;
    -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
    | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
!     x_libraries=$ac_optarg ;;
  
!   -*) { echo "$as_me: error: unrecognized option: $ac_option
! Try \`$0 --help' for more information." >&2
!    { (exit 1); exit 1; }; }
      ;;
  
+   *=*)
+     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
+     # Reject names that are not valid shell variable names.
+     expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+       { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
+    { (exit 1); exit 1; }; }
+     ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`
+     eval "$ac_envvar='$ac_optarg'"
+     export $ac_envvar ;;
+ 
    *)
!     # FIXME: should be removed in autoconf 3.0.
!     echo "$as_me: WARNING: you should use --build, --host, --target" >&2
!     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
!       echo "$as_me: WARNING: invalid host type: $ac_option" >&2
!     : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
      ;;
  
    esac
  done
  
  if test -n "$ac_prev"; then
!   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
!   { echo "$as_me: error: missing argument to $ac_option" >&2
!    { (exit 1); exit 1; }; }
  fi
  
! # Be sure to have absolute paths.
! for ac_var in exec_prefix prefix
! do
!   eval ac_val=$`echo $ac_var`
!   case $ac_val in
!     [\\/$]* | ?:[\\/]* | NONE | '' ) ;;
!     *)  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
!    { (exit 1); exit 1; }; };;
!   esac
! done
  
! # Be sure to have absolute paths.
! for ac_var in bindir sbindir libexecdir datadir sysconfdir sharedstatedir \
!               localstatedir libdir includedir oldincludedir infodir mandir
  do
!   eval ac_val=$`echo $ac_var`
!   case $ac_val in
!     [\\/$]* | ?:[\\/]* ) ;;
!     *)  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
!    { (exit 1); exit 1; }; };;
    esac
  done
  
! # There might be people who depend on the old broken behavior: `$host'
! # used to hold the argument of --host etc.
! # FIXME: To remove some day.
! build=$build_alias
! host=$host_alias
! target=$target_alias
  
! # FIXME: To remove some day.
! if test "x$host_alias" != x; then
!   if test "x$build_alias" = x; then
!     cross_compiling=maybe
!     echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
!     If a cross compiler is detected then cross compile mode will be used." >&2
!   elif test "x$build_alias" != "x$host_alias"; then
!     cross_compiling=yes
!   fi
! fi
! 
! ac_tool_prefix=
! test -n "$host_alias" && ac_tool_prefix=$host_alias-
! 
! test "$silent" = yes && exec 6>/dev/null
  
  
  # Find the source files, if location was not specified.
  if test -z "$srcdir"; then
    ac_srcdir_defaulted=yes
    # Try the directory containing this script, then its parent.
!   ac_confdir=`(dirname "$0") 2>/dev/null ||
! $as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
!          X"$0" : 'X\(//\)[^/]' \| \
!          X"$0" : 'X\(//\)$' \| \
!          X"$0" : 'X\(/\)' \| \
!          .     : '\(.\)' 2>/dev/null ||
! echo X"$0" |
!     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
!   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
!   	  /^X\(\/\/\)$/{ s//\1/; q; }
!   	  /^X\(\/\).*/{ s//\1/; q; }
!   	  s/.*/./; q'`
    srcdir=$ac_confdir
    if test ! -r $srcdir/$ac_unique_file; then
      srcdir=..
***************
*** 738,750 ****
  fi
  if test ! -r $srcdir/$ac_unique_file; then
    if test "$ac_srcdir_defaulted" = yes; then
!     { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
    else
!     { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
    fi
  fi
! srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`
  
  # Prefer explicitly selected file to automatically selected ones.
  if test -z "$CONFIG_SITE"; then
    if test "x$prefix" != xNONE; then
--- 871,1299 ----
  fi
  if test ! -r $srcdir/$ac_unique_file; then
    if test "$ac_srcdir_defaulted" = yes; then
!     { echo "$as_me: error: cannot find sources ($ac_unique_file) in $ac_confdir or .." >&2
!    { (exit 1); exit 1; }; }
    else
!     { echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
!    { (exit 1); exit 1; }; }
    fi
  fi
! srcdir=`echo "$srcdir" | sed 's%\([^\\/]\)[\\/]*$%\1%'`
! ac_env_build_alias_set=${build_alias+set}
! ac_env_build_alias_value=$build_alias
! ac_cv_env_build_alias_set=${build_alias+set}
! ac_cv_env_build_alias_value=$build_alias
! ac_env_host_alias_set=${host_alias+set}
! ac_env_host_alias_value=$host_alias
! ac_cv_env_host_alias_set=${host_alias+set}
! ac_cv_env_host_alias_value=$host_alias
! ac_env_target_alias_set=${target_alias+set}
! ac_env_target_alias_value=$target_alias
! ac_cv_env_target_alias_set=${target_alias+set}
! ac_cv_env_target_alias_value=$target_alias
! ac_env_CC_set=${CC+set}
! ac_env_CC_value=$CC
! ac_cv_env_CC_set=${CC+set}
! ac_cv_env_CC_value=$CC
! ac_env_CFLAGS_set=${CFLAGS+set}
! ac_env_CFLAGS_value=$CFLAGS
! ac_cv_env_CFLAGS_set=${CFLAGS+set}
! ac_cv_env_CFLAGS_value=$CFLAGS
! ac_env_LDFLAGS_set=${LDFLAGS+set}
! ac_env_LDFLAGS_value=$LDFLAGS
! ac_cv_env_LDFLAGS_set=${LDFLAGS+set}
! ac_cv_env_LDFLAGS_value=$LDFLAGS
! ac_env_CPPFLAGS_set=${CPPFLAGS+set}
! ac_env_CPPFLAGS_value=$CPPFLAGS
! ac_cv_env_CPPFLAGS_set=${CPPFLAGS+set}
! ac_cv_env_CPPFLAGS_value=$CPPFLAGS
! ac_env_CPP_set=${CPP+set}
! ac_env_CPP_value=$CPP
! ac_cv_env_CPP_set=${CPP+set}
! ac_cv_env_CPP_value=$CPP
! 
! #
! # Report the --help message.
! #
! if test "$ac_init_help" = "long"; then
!   # Omit some internal or obsolete options to make the list less imposing.
!   # This message is too long to be a string in the A/UX 3.1 sh.
!   cat <<_ACEOF
! \`configure' configures this package to adapt to many kinds of systems.
! 
! Usage: $0 [OPTION]... [VAR=VALUE]...
! 
! To assign environment variables (e.g., CC, CFLAGS...), specify them as
! VAR=VALUE.  See below for descriptions of some of the useful variables.
! 
! Defaults for the options are specified in brackets.
! 
! Configuration:
!   -h, --help              display this help and exit
!       --help=short        display options specific to this package
!       --help=recursive    display the short help of all the included packages
!   -V, --version           display version information and exit
!   -q, --quiet, --silent   do not print \`checking...' messages
!       --cache-file=FILE   cache test results in FILE [disabled]
!   -C, --config-cache      alias for \`--cache-file=config.cache'
!   -n, --no-create         do not create output files
!       --srcdir=DIR        find the sources in DIR [configure dir or \`..']
! 
! _ACEOF
! 
!   cat <<_ACEOF
! Installation directories:
!   --prefix=PREFIX         install architecture-independent files in PREFIX
!                           [$ac_default_prefix]
!   --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
!                           [PREFIX]
! 
! By default, \`make install' will install all the files in
! \`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
! an installation prefix other than \`$ac_default_prefix' using \`--prefix',
! for instance \`--prefix=\$HOME'.
! 
! For better control, use the options below.
! 
! Fine tuning of the installation directories:
!   --bindir=DIR           user executables [EPREFIX/bin]
!   --sbindir=DIR          system admin executables [EPREFIX/sbin]
!   --libexecdir=DIR       program executables [EPREFIX/libexec]
!   --datadir=DIR          read-only architecture-independent data [PREFIX/share]
!   --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
!   --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
!   --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
!   --libdir=DIR           object code libraries [EPREFIX/lib]
!   --includedir=DIR       C header files [PREFIX/include]
!   --oldincludedir=DIR    C header files for non-gcc [/usr/include]
!   --infodir=DIR          info documentation [PREFIX/info]
!   --mandir=DIR           man documentation [PREFIX/man]
! _ACEOF
! 
!   cat <<\_ACEOF
! 
! Program names:
!   --program-prefix=PREFIX            prepend PREFIX to installed program names
!   --program-suffix=SUFFIX            append SUFFIX to installed program names
!   --program-transform-name=PROGRAM   run sed PROGRAM on installed program names
! 
! System types:
!   --build=BUILD     configure for building on BUILD [guessed]
!   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
!   --target=TARGET   configure for building compilers for TARGET [HOST]
! _ACEOF
! fi
! 
! if test -n "$ac_init_help"; then
! 
!   cat <<\_ACEOF
! 
! Optional Features:
!   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
!   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
!   --disable-dependency-tracking Speeds up one-time builds
!   --enable-dependency-tracking  Do not reject slow dependency extractors
!   --enable-shared=PKGS  build shared libraries default=yes
!   --enable-static=PKGS  build static libraries default=yes
!   --enable-fast-install=PKGS  optimize for fast installation default=yes
!   --disable-libtool-lock  avoid locking (might break parallel builds)
!   --enable-afs            enable AFS support
!   --disable-ddp           disable DDP
!   --enable-debug          enable debug code
!   --enable-dropkludge     enable the experimental dropbox fix (INSECURE!)
!   --enable-force-uidgid   allow forcing of uid/gid per volume (BROKEN)
!   --enable-srvloc=DIR   turn on Server Location Protocol support
!   --disable-shell-check   disable checking for a valid shell
!   --enable-redhat         use redhat-style sysv configuration
!   --enable-suse           use suse-style sysv configuration
!   --enable-cobalt         use cobalt-style sysv configuration
!   --enable-netbsd         use NetBSD-style rc.d configuration
!   --enable-timelord       enable compilation of timelord server
!   --enable-fhs            use Filesystem Hierarchy Standard (FHS) compatibility
!   --enable-pgp-uam        enable build of PGP UAM module
!   --enable-krb4-uam       enable build of Kerberos v4 UAM module
!   --enable-overwrite      overwrite configuration files during installation
! 
! Optional Packages:
!   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
!   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
!   --with-gnu-ld           assume the C compiler uses GNU ld default=no
!   --with-pic              try to use only PIC/non-PIC objects default=use both
!   --disable-admin-group   disable admin group
!   --with-pkgconfdir=DIR   package specific configuration in DIR
!                           SYSCONF/netatalk
!   --with-nls-dir=PATH     path to NLS files PKGCONF/nls
!   --with-cracklib=DICT    enable/set location of cracklib dictionary
!   --with-did=SCHEME       set DID scheme (last,hash,mtab,cnid)
!   --with-db3=PATH         specify path to Berkeley DB3 installation
!   --with-message-dir=PATH path to message files [PKGCONF/msg]
!   --with-pam=PATH         specify path to PAM installation
!   --with-shadow           enable shadow password support
!   --with-flock-locks      enable flock locks support
!   --with-tcp-wrappers     enable TCP wrappers support
!   --with-uams-path=PATH   path to UAMs [PKGCONF/uams]
!   --with-dce     Include DCE plaintext authentication support
!   --without-dce  Don't include DCE plaintext authentication support (default)
!   --with-dce-encrypted     Include DCE encrypted authentication support
!   --without-dce-encrypted  Don't include DCE encrypted authentication support (default)
!   --with-dce-refresh     Include DCE context refresh support
!   --without-dce-refresh  Don't include DCE context refresh support (default)
!   --with-dce-ibm-kludge  Work around broken IBM DCE security API
!   --without-dce-ibm-kludge Don't work around broken IBM DCE security API (default)
!   --with-dfs  Include DFS support
!   --without-dfs Don't include DFS support (default)
!   --with-ssl-dir=PATH     specify path to OpenSSL installation (must contain
!                           lib and include dirs)
! 
! Some influential environment variables:
!   CC          C compiler command
!   CFLAGS      C compiler flags
!   LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
!               nonstandard directory <lib dir>
!   CPPFLAGS    C/C++ preprocessor flags, e.g. -I<include dir> if you have
!               headers in a nonstandard directory <include dir>
!   CPP         C preprocessor
! 
! Use these variables to override the choices made by `configure' or to help
! it to find libraries and programs with nonstandard names/locations.
! 
! _ACEOF
! fi
! 
! if test "$ac_init_help" = "recursive"; then
!   # If there are subdirs, report their specific --help.
!   ac_popdir=`pwd`
!   for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
!     test -d $ac_dir || continue
!     ac_builddir=.
! 
! if test "$ac_dir" != .; then
!   ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
!   # A "../" for each directory in $ac_dir_suffix.
!   ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
! else
!   ac_dir_suffix= ac_top_builddir=
! fi
! 
! case $srcdir in
!   .)  # No --srcdir option.  We are building in place.
!     ac_srcdir=.
!     if test -z "$ac_top_builddir"; then
!        ac_top_srcdir=.
!     else
!        ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
!     fi ;;
!   [\\/]* | ?:[\\/]* )  # Absolute path.
!     ac_srcdir=$srcdir$ac_dir_suffix;
!     ac_top_srcdir=$srcdir ;;
!   *) # Relative path.
!     ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
!     ac_top_srcdir=$ac_top_builddir$srcdir ;;
! esac
! # Don't blindly perform a `cd "$ac_dir"/$ac_foo && pwd` since $ac_foo can be
! # absolute.
! ac_abs_builddir=`cd "$ac_dir" && cd $ac_builddir && pwd`
! ac_abs_top_builddir=`cd "$ac_dir" && cd $ac_top_builddir && pwd`
! ac_abs_srcdir=`cd "$ac_dir" && cd $ac_srcdir && pwd`
! ac_abs_top_srcdir=`cd "$ac_dir" && cd $ac_top_srcdir && pwd`
! 
!     cd $ac_dir
!     # Check for guested configure; otherwise get Cygnus style configure.
!     if test -f $ac_srcdir/configure.gnu; then
!       echo
!       $SHELL $ac_srcdir/configure.gnu  --help=recursive
!     elif test -f $ac_srcdir/configure; then
!       echo
!       $SHELL $ac_srcdir/configure  --help=recursive
!     elif test -f $ac_srcdir/configure.ac ||
!            test -f $ac_srcdir/configure.in; then
!       echo
!       $ac_configure --help
!     else
!       echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
!     fi
!     cd $ac_popdir
!   done
! fi
! 
! test -n "$ac_init_help" && exit 0
! if $ac_init_version; then
!   cat <<\_ACEOF
! 
! Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
! Free Software Foundation, Inc.
! This configure script is free software; the Free Software Foundation
! gives unlimited permission to copy, distribute and modify it.
! _ACEOF
!   exit 0
! fi
! exec 5>config.log
! cat >&5 <<_ACEOF
! This file contains any messages produced by compilers while
! running configure, to aid debugging if configure makes a mistake.
! 
! It was created by $as_me, which was
! generated by GNU Autoconf 2.53.  Invocation command line was
! 
!   $ $0 $@
  
+ _ACEOF
+ {
+ cat <<_ASUNAME
+ ## --------- ##
+ ## Platform. ##
+ ## --------- ##
+ 
+ hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
+ uname -m = `(uname -m) 2>/dev/null || echo unknown`
+ uname -r = `(uname -r) 2>/dev/null || echo unknown`
+ uname -s = `(uname -s) 2>/dev/null || echo unknown`
+ uname -v = `(uname -v) 2>/dev/null || echo unknown`
+ 
+ /usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
+ /bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
+ 
+ /bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
+ /usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
+ /usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
+ hostinfo               = `(hostinfo) 2>/dev/null               || echo unknown`
+ /bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
+ /usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
+ /bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
+ 
+ _ASUNAME
+ 
+ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+   echo "PATH: $as_dir"
+ done
+ 
+ } >&5
+ 
+ cat >&5 <<_ACEOF
+ 
+ 
+ ## ----------- ##
+ ## Core tests. ##
+ ## ----------- ##
+ 
+ _ACEOF
+ 
+ 
+ # Keep a trace of the command line.
+ # Strip out --no-create and --no-recursion so they do not pile up.
+ # Also quote any args containing shell meta-characters.
+ ac_configure_args=
+ ac_sep=
+ for ac_arg
+ do
+   case $ac_arg in
+   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
+   | --no-cr | --no-c | -n ) continue ;;
+   -no-recursion | --no-recursion | --no-recursio | --no-recursi \
+   | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
+     continue ;;
+   *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+     ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+   esac
+   case " $ac_configure_args " in
+     *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
+     *) ac_configure_args="$ac_configure_args$ac_sep'$ac_arg'"
+        ac_sep=" " ;;
+   esac
+   # Get rid of the leading space.
+ done
+ 
+ # When interrupted or exit'd, cleanup temporary files, and complete
+ # config.log.  We remove comments because anyway the quotes in there
+ # would cause problems or look ugly.
+ # WARNING: Be sure not to use single quotes in there, as some shells,
+ # such as our DU 5.0 friend, will then `close' the trap.
+ trap 'exit_status=$?
+   # Save into config.log some information that might help in debugging.
+   {
+     echo
+     cat <<\_ASBOX
+ ## ---------------- ##
+ ## Cache variables. ##
+ ## ---------------- ##
+ _ASBOX
+     echo
+     # The following way of writing the cache mishandles newlines in values,
+ {
+   (set) 2>&1 |
+     case `(ac_space='"'"' '"'"'; set | grep ac_space) 2>&1` in
+     *ac_space=\ *)
+       sed -n \
+         "s/'"'"'/'"'"'\\\\'"'"''"'"'/g;
+     	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='"'"'\\2'"'"'/p"
+       ;;
+     *)
+       sed -n \
+         "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+       ;;
+     esac;
+ }
+     echo
+     if test -s confdefs.h; then
+       cat <<\_ASBOX
+ ## ----------- ##
+ ## confdefs.h. ##
+ ## ----------- ##
+ _ASBOX
+       echo
+       sed "/^$/d" confdefs.h
+       echo
+     fi
+     test "$ac_signal" != 0 &&
+       echo "$as_me: caught signal $ac_signal"
+     echo "$as_me: exit $exit_status"
+   } >&5
+   rm -f core core.* *.core &&
+   rm -rf conftest* confdefs* conf$$* $ac_clean_files &&
+     exit $exit_status
+      ' 0
+ for ac_signal in 1 2 13 15; do
+   trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
+ done
+ ac_signal=0
+ 
+ # confdefs.h avoids OS command line length limits that DEFS can exceed.
+ rm -rf conftest* confdefs.h
+ # AIX cpp loses on an empty file, so make sure it contains at least a newline.
+ echo >confdefs.h
+ 
+ # Predefined preprocessor variables.
+ 
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_NAME "$PACKAGE_NAME"
+ _ACEOF
+ 
+ 
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_TARNAME "$PACKAGE_TARNAME"
+ _ACEOF
+ 
+ 
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_VERSION "$PACKAGE_VERSION"
+ _ACEOF
+ 
+ 
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_STRING "$PACKAGE_STRING"
+ _ACEOF
+ 
+ 
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
+ _ACEOF
+ 
+ 
+ # Let the site file select an alternate cache file if it wants to.
  # Prefer explicitly selected file to automatically selected ones.
  if test -z "$CONFIG_SITE"; then
    if test "x$prefix" != xNONE; then
***************
*** 755,793 ****
  fi
  for ac_site_file in $CONFIG_SITE; do
    if test -r "$ac_site_file"; then
!     echo "loading site script $ac_site_file"
      . "$ac_site_file"
    fi
  done
  
  if test -r "$cache_file"; then
!   echo "loading cache $cache_file"
!   . $cache_file
  else
!   echo "creating cache $cache_file"
!   > $cache_file
  fi
  
  ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
  ac_cpp='$CPP $CPPFLAGS'
! ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
! ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
! cross_compiling=$ac_cv_prog_cc_cross
  
- ac_exeext=
- ac_objext=o
- if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
-   # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
-   if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
-     ac_n= ac_c='
- ' ac_t='	'
-   else
-     ac_n=-n ac_c= ac_t=
-   fi
- else
-   ac_n= ac_c='\c' ac_t=
- fi
  
  
  
--- 1304,1405 ----
  fi
  for ac_site_file in $CONFIG_SITE; do
    if test -r "$ac_site_file"; then
!     { echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
! echo "$as_me: loading site script $ac_site_file" >&6;}
!     sed 's/^/| /' "$ac_site_file" >&5
      . "$ac_site_file"
    fi
  done
  
  if test -r "$cache_file"; then
!   # Some versions of bash will fail to source /dev/null (special
!   # files actually), so we avoid doing that.
!   if test -f "$cache_file"; then
!     { echo "$as_me:$LINENO: loading cache $cache_file" >&5
! echo "$as_me: loading cache $cache_file" >&6;}
!     case $cache_file in
!       [\\/]* | ?:[\\/]* ) . $cache_file;;
!       *)                      . ./$cache_file;;
!     esac
!   fi
  else
!   { echo "$as_me:$LINENO: creating cache $cache_file" >&5
! echo "$as_me: creating cache $cache_file" >&6;}
!   >$cache_file
! fi
! 
! # Check that the precious variables saved in the cache have kept the same
! # value.
! ac_cache_corrupted=false
! for ac_var in `(set) 2>&1 |
!                sed -n 's/^ac_env_\([a-zA-Z_0-9]*\)_set=.*/\1/p'`; do
!   eval ac_old_set=\$ac_cv_env_${ac_var}_set
!   eval ac_new_set=\$ac_env_${ac_var}_set
!   eval ac_old_val="\$ac_cv_env_${ac_var}_value"
!   eval ac_new_val="\$ac_env_${ac_var}_value"
!   case $ac_old_set,$ac_new_set in
!     set,)
!       { echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
! echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
!       ac_cache_corrupted=: ;;
!     ,set)
!       { echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
! echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
!       ac_cache_corrupted=: ;;
!     ,);;
!     *)
!       if test "x$ac_old_val" != "x$ac_new_val"; then
!         { echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
! echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
!         { echo "$as_me:$LINENO:   former value:  $ac_old_val" >&5
! echo "$as_me:   former value:  $ac_old_val" >&2;}
!         { echo "$as_me:$LINENO:   current value: $ac_new_val" >&5
! echo "$as_me:   current value: $ac_new_val" >&2;}
!         ac_cache_corrupted=:
!       fi;;
!   esac
!   # Pass precious variables to config.status.
!   if test "$ac_new_set" = set; then
!     case $ac_new_val in
!     *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
!       ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
!     *) ac_arg=$ac_var=$ac_new_val ;;
!     esac
!     case " $ac_configure_args " in
!       *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
!       *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
!     esac
!   fi
! done
! if $ac_cache_corrupted; then
!   { echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
! echo "$as_me: error: changes in the environment can compromise the build" >&2;}
!   { { echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
! echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
! ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
! ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
! ac_compiler_gnu=$ac_cv_c_compiler_gnu
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
  
  
  
  
***************
*** 804,911 ****
      ac_aux_dir=$ac_dir
      ac_install_sh="$ac_aux_dir/install.sh -c"
      break
    fi
  done
  if test -z "$ac_aux_dir"; then
!   { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
  fi
! ac_config_guess=$ac_aux_dir/config.guess
! ac_config_sub=$ac_aux_dir/config.sub
! ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.
! 
! 
! # Do some error checking and defaulting for the host and target type.
! # The inputs are:
! #    configure --host=HOST --target=TARGET --build=BUILD NONOPT
! #
! # The rules are:
! # 1. You are not allowed to specify --host, --target, and nonopt at the
! #    same time.
! # 2. Host defaults to nonopt.
! # 3. If nonopt is not specified, then host defaults to the current host,
! #    as determined by config.guess.
! # 4. Target and build default to nonopt.
! # 5. If nonopt is not specified, then target and build default to host.
! 
! # The aliases save the names the user supplied, while $host etc.
! # will get canonicalized.
! case $host---$target---$nonopt in
! NONE---*---* | *---NONE---* | *---*---NONE) ;;
! *) { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; } ;;
! esac
! 
  
  # Make sure we can run config.sub.
! if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
! else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
! fi
  
! echo $ac_n "checking host system type""... $ac_c" 1>&6
! echo "configure:845: checking host system type" >&5
  
! host_alias=$host
! case "$host_alias" in
! NONE)
!   case $nonopt in
!   NONE)
!     if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
!     else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
!     fi ;;
!   *) host_alias=$nonopt ;;
!   esac ;;
! esac
  
- host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
- host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
- host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
- host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
- echo "$ac_t""$host" 1>&6
  
! echo $ac_n "checking target system type""... $ac_c" 1>&6
! echo "configure:866: checking target system type" >&5
  
! target_alias=$target
! case "$target_alias" in
! NONE)
!   case $nonopt in
!   NONE) target_alias=$host_alias ;;
!   *) target_alias=$nonopt ;;
!   esac ;;
! esac
  
- target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`
- target_cpu=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
- target_vendor=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
- target_os=`echo $target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
- echo "$ac_t""$target" 1>&6
  
! echo $ac_n "checking build system type""... $ac_c" 1>&6
! echo "configure:884: checking build system type" >&5
  
! build_alias=$build
! case "$build_alias" in
! NONE)
!   case $nonopt in
!   NONE) build_alias=$host_alias ;;
!   *) build_alias=$nonopt ;;
!   esac ;;
! esac
  
- build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
- build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
- build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
- build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
- echo "$ac_t""$build" 1>&6
  
! test "$host_alias" != "$target_alias" &&
    test "$program_prefix$program_suffix$program_transform_name" = \
      NONENONEs,x,x, &&
    program_prefix=${target_alias}-
- 
- 
- # expand $ac_aux_dir to an absolute path
- am_aux_dir=`CDPATH=:; cd $ac_aux_dir && pwd`
- 
  # Find a good install program.  We prefer a C program (faster),
  # so one script is as good as another.  But avoid the broken or
  # incompatible versions:
--- 1416,1518 ----
      ac_aux_dir=$ac_dir
      ac_install_sh="$ac_aux_dir/install.sh -c"
      break
+   elif test -f $ac_dir/shtool; then
+     ac_aux_dir=$ac_dir
+     ac_install_sh="$ac_aux_dir/shtool install -c"
+     break
    fi
  done
  if test -z "$ac_aux_dir"; then
!   { { echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." >&5
! echo "$as_me: error: cannot find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." >&2;}
!    { (exit 1); exit 1; }; }
  fi
! ac_config_guess="$SHELL $ac_aux_dir/config.guess"
! ac_config_sub="$SHELL $ac_aux_dir/config.sub"
! ac_configure="$SHELL $ac_aux_dir/configure" # This should be Cygnus configure.
  
  # Make sure we can run config.sub.
! $ac_config_sub sun4 >/dev/null 2>&1 ||
!   { { echo "$as_me:$LINENO: error: cannot run $ac_config_sub" >&5
! echo "$as_me: error: cannot run $ac_config_sub" >&2;}
!    { (exit 1); exit 1; }; }
  
! echo "$as_me:$LINENO: checking build system type" >&5
! echo $ECHO_N "checking build system type... $ECHO_C" >&6
! if test "${ac_cv_build+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_build_alias=$build_alias
! test -z "$ac_cv_build_alias" &&
!   ac_cv_build_alias=`$ac_config_guess`
! test -z "$ac_cv_build_alias" &&
!   { { echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
! echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
!    { (exit 1); exit 1; }; }
! ac_cv_build=`$ac_config_sub $ac_cv_build_alias` ||
!   { { echo "$as_me:$LINENO: error: $ac_config_sub $ac_cv_build_alias failed" >&5
! echo "$as_me: error: $ac_config_sub $ac_cv_build_alias failed" >&2;}
!    { (exit 1); exit 1; }; }
  
! fi
! echo "$as_me:$LINENO: result: $ac_cv_build" >&5
! echo "${ECHO_T}$ac_cv_build" >&6
! build=$ac_cv_build
! build_cpu=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
! build_vendor=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
! build_os=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
  
  
! echo "$as_me:$LINENO: checking host system type" >&5
! echo $ECHO_N "checking host system type... $ECHO_C" >&6
! if test "${ac_cv_host+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_host_alias=$host_alias
! test -z "$ac_cv_host_alias" &&
!   ac_cv_host_alias=$ac_cv_build_alias
! ac_cv_host=`$ac_config_sub $ac_cv_host_alias` ||
!   { { echo "$as_me:$LINENO: error: $ac_config_sub $ac_cv_host_alias failed" >&5
! echo "$as_me: error: $ac_config_sub $ac_cv_host_alias failed" >&2;}
!    { (exit 1); exit 1; }; }
  
! fi
! echo "$as_me:$LINENO: result: $ac_cv_host" >&5
! echo "${ECHO_T}$ac_cv_host" >&6
! host=$ac_cv_host
! host_cpu=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
! host_vendor=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
! host_os=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
  
  
! echo "$as_me:$LINENO: checking target system type" >&5
! echo $ECHO_N "checking target system type... $ECHO_C" >&6
! if test "${ac_cv_target+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_target_alias=$target_alias
! test "x$ac_cv_target_alias" = "x" &&
!   ac_cv_target_alias=$ac_cv_host_alias
! ac_cv_target=`$ac_config_sub $ac_cv_target_alias` ||
!   { { echo "$as_me:$LINENO: error: $ac_config_sub $ac_cv_target_alias failed" >&5
! echo "$as_me: error: $ac_config_sub $ac_cv_target_alias failed" >&2;}
!    { (exit 1); exit 1; }; }
  
! fi
! echo "$as_me:$LINENO: result: $ac_cv_target" >&5
! echo "${ECHO_T}$ac_cv_target" >&6
! target=$ac_cv_target
! target_cpu=`echo $ac_cv_target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
! target_vendor=`echo $ac_cv_target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
! target_os=`echo $ac_cv_target | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
  
  
! # The aliases save the names the user supplied, while $host etc.
! # will get canonicalized.
! test -n "$target_alias" &&
    test "$program_prefix$program_suffix$program_transform_name" = \
      NONENONEs,x,x, &&
    program_prefix=${target_alias}-
  # Find a good install program.  We prefer a C program (faster),
  # so one script is as good as another.  But avoid the broken or
  # incompatible versions:
***************
*** 913,977 ****
  # SunOS /usr/etc/install
  # IRIX /sbin/install
  # AIX /bin/install
  # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
  # AFS /usr/afsws/bin/install, which mishandles nonexistent args
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # ./install, which can be erroneously created by make from ./install.sh.
! echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
! echo "configure:922: checking for a BSD compatible install" >&5
  if test -z "$INSTALL"; then
! if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!     IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
!   for ac_dir in $PATH; do
!     # Account for people who put trailing slashes in PATH elements.
!     case "$ac_dir/" in
!     /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
!     *)
!       # OSF1 and SCO ODT 3.0 have their own names for install.
!       # Don't use installbsd from OSF since it installs stuff as root
!       # by default.
!       for ac_prog in ginstall scoinst install; do
!         if test -f $ac_dir/$ac_prog; then
! 	  if test $ac_prog = install &&
!             grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
! 	    # AIX install.  It has an incompatible calling convention.
! 	    :
! 	  else
! 	    ac_cv_path_install="$ac_dir/$ac_prog -c"
! 	    break 2
! 	  fi
! 	fi
        done
!       ;;
!     esac
!   done
!   IFS="$ac_save_IFS"
  
  fi
    if test "${ac_cv_path_install+set}" = set; then
!     INSTALL="$ac_cv_path_install"
    else
      # As a last resort, use the slow shell script.  We don't cache a
      # path for INSTALL within a source directory, because that will
      # break other packages using the cache if that directory is
      # removed, or if the path is relative.
!     INSTALL="$ac_install_sh"
    fi
  fi
! echo "$ac_t""$INSTALL" 1>&6
  
  # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
  # It thinks the first close brace ends the variable substitution.
  test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
  
! test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
  
  test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
! echo $ac_n "checking whether build environment is sane""... $ac_c" 1>&6
! echo "configure:975: checking whether build environment is sane" >&5
  # Just in case
  sleep 1
  echo timestamp > conftest.file
--- 1520,1597 ----
  # SunOS /usr/etc/install
  # IRIX /sbin/install
  # AIX /bin/install
+ # AmigaOS /C/install, which installs bootblocks on floppy discs
  # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
  # AFS /usr/afsws/bin/install, which mishandles nonexistent args
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # ./install, which can be erroneously created by make from ./install.sh.
! echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
! echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6
  if test -z "$INSTALL"; then
! if test "${ac_cv_path_install+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   # Account for people who put trailing slashes in PATH elements.
! case $as_dir/ in
!   ./ | .// | /cC/* | \
!   /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
!   /usr/ucb/* ) ;;
!   *)
!     # OSF1 and SCO ODT 3.0 have their own names for install.
!     # Don't use installbsd from OSF since it installs stuff as root
!     # by default.
!     for ac_prog in ginstall scoinst install; do
!       for ac_exec_ext in '' $ac_executable_extensions; do
!         if $as_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
!           if test $ac_prog = install &&
!             grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
!             # AIX install.  It has an incompatible calling convention.
!             :
!           elif test $ac_prog = install &&
!             grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
!             # program-specific install script used by HP pwplus--don't use.
!             :
!           else
!             ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
!             break 3
!           fi
!         fi
        done
!     done
!     ;;
! esac
! done
! 
  
  fi
    if test "${ac_cv_path_install+set}" = set; then
!     INSTALL=$ac_cv_path_install
    else
      # As a last resort, use the slow shell script.  We don't cache a
      # path for INSTALL within a source directory, because that will
      # break other packages using the cache if that directory is
      # removed, or if the path is relative.
!     INSTALL=$ac_install_sh
    fi
  fi
! echo "$as_me:$LINENO: result: $INSTALL" >&5
! echo "${ECHO_T}$INSTALL" >&6
  
  # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
  # It thinks the first close brace ends the variable substitution.
  test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
  
! test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
  
  test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
! echo "$as_me:$LINENO: checking whether build environment is sane" >&5
! echo $ECHO_N "checking whether build environment is sane... $ECHO_C" >&6
  # Just in case
  sleep 1
  echo timestamp > conftest.file
***************
*** 994,1001 ****
        # if, for instance, CONFIG_SHELL is bash and it inherits a
        # broken ls alias from the environment.  This has actually
        # happened.  Such a system could not be considered "sane".
!       { echo "configure: error: ls -t appears to fail.  Make sure there is not a broken
! alias in your environment" 1>&2; exit 1; }
     fi
  
     test "$2" = conftest.file
--- 1614,1624 ----
        # if, for instance, CONFIG_SHELL is bash and it inherits a
        # broken ls alias from the environment.  This has actually
        # happened.  Such a system could not be considered "sane".
!       { { echo "$as_me:$LINENO: error: ls -t appears to fail.  Make sure there is not a broken
! alias in your environment" >&5
! echo "$as_me: error: ls -t appears to fail.  Make sure there is not a broken
! alias in your environment" >&2;}
!    { (exit 1); exit 1; }; }
     fi
  
     test "$2" = conftest.file
***************
*** 1004,1031 ****
     # Ok.
     :
  else
!    { echo "configure: error: newly created file is older than distributed files!
! Check your system clock" 1>&2; exit 1; }
! fi
! echo "$ac_t""yes" 1>&6
! if test "$program_transform_name" = s,x,x,; then
!   program_transform_name=
! else
!   # Double any \ or $.  echo might interpret backslashes.
!   cat <<\EOF_SED > conftestsed
! s,\\,\\\\,g; s,\$,$$,g
! EOF_SED
!   program_transform_name="`echo $program_transform_name|sed -f conftestsed`"
!   rm -f conftestsed
  fi
  test "$program_prefix" != NONE &&
!   program_transform_name="s,^,${program_prefix},; $program_transform_name"
  # Use a double $ so make ignores it.
  test "$program_suffix" != NONE &&
!   program_transform_name="s,\$\$,${program_suffix},; $program_transform_name"
  
! # sed with no file args requires a program.
! test "$program_transform_name" = "" && program_transform_name="s,x,x,"
  
  test x"${MISSING+set}" = xset || MISSING="\${SHELL} $am_aux_dir/missing"
  # Use eval to expand $SHELL
--- 1627,1656 ----
     # Ok.
     :
  else
!    { { echo "$as_me:$LINENO: error: newly created file is older than distributed files!
! Check your system clock" >&5
! echo "$as_me: error: newly created file is older than distributed files!
! Check your system clock" >&2;}
!    { (exit 1); exit 1; }; }
  fi
+ echo "$as_me:$LINENO: result: yes" >&5
+ echo "${ECHO_T}yes" >&6
  test "$program_prefix" != NONE &&
!   program_transform_name="s,^,$program_prefix,;$program_transform_name"
  # Use a double $ so make ignores it.
  test "$program_suffix" != NONE &&
!   program_transform_name="s,\$,$program_suffix,;$program_transform_name"
! # Double any \ or $.  echo might interpret backslashes.
! # By default was `s,x,x', remove it if useless.
! cat <<\_ACEOF >conftest.sed
! s/[\\$]/&&/g;s/;s,x,x,$//
! _ACEOF
! program_transform_name=`echo $program_transform_name | sed -f conftest.sed`
! rm conftest.sed
  
! 
! # expand $ac_aux_dir to an absolute path
! am_aux_dir=`CDPATH=:; cd $ac_aux_dir && pwd`
  
  test x"${MISSING+set}" = xset || MISSING="\${SHELL} $am_aux_dir/missing"
  # Use eval to expand $SHELL
***************
*** 1034,1109 ****
  else
    am_missing_run=
    am_backtick='`'
!   echo "configure: warning: ${am_backtick}missing' script is too old or missing" 1>&2
  fi
  
! for ac_prog in mawk gawk nawk awk
  do
! # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1046: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_AWK="$ac_prog"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
  fi
  fi
! AWK="$ac_cv_prog_AWK"
  if test -n "$AWK"; then
!   echo "$ac_t""$AWK" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! test -n "$AWK" && break
  done
  
! echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
! echo "configure:1076: checking whether ${MAKE-make} sets \${MAKE}" >&5
! set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftestmake <<\EOF
  all:
  	@echo 'ac_maketemp="${MAKE}"'
! EOF
  # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
! eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
  if test -n "$ac_maketemp"; then
    eval ac_cv_prog_make_${ac_make}_set=yes
  else
    eval ac_cv_prog_make_${ac_make}_set=no
  fi
! rm -f conftestmake
  fi
  if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    SET_MAKE=
  else
!   echo "$ac_t""no" 1>&6
    SET_MAKE="MAKE=${MAKE-make}"
  fi
  
  # Check whether --enable-dependency-tracking or --disable-dependency-tracking was given.
  if test "${enable_dependency_tracking+set}" = set; then
    enableval="$enable_dependency_tracking"
-   :
- fi
  
  if test "x$enable_dependency_tracking" != xno; then
    am_depcomp="$ac_aux_dir/depcomp"
    AMDEPBACKSLASH='\'
--- 1659,1742 ----
  else
    am_missing_run=
    am_backtick='`'
!   { echo "$as_me:$LINENO: WARNING: ${am_backtick}missing' script is too old or missing" >&5
! echo "$as_me: WARNING: ${am_backtick}missing' script is too old or missing" >&2;}
  fi
  
! for ac_prog in gawk mawk nawk awk
  do
!   # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_AWK+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_AWK="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
  fi
  fi
! AWK=$ac_cv_prog_AWK
  if test -n "$AWK"; then
!   echo "$as_me:$LINENO: result: $AWK" >&5
! echo "${ECHO_T}$AWK" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
!   test -n "$AWK" && break
  done
  
! echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \${MAKE}" >&5
! echo $ECHO_N "checking whether ${MAKE-make} sets \${MAKE}... $ECHO_C" >&6
! set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y,./+-,__p_,'`
! if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.make <<\_ACEOF
  all:
  	@echo 'ac_maketemp="${MAKE}"'
! _ACEOF
  # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
! eval `${MAKE-make} -f conftest.make 2>/dev/null | grep temp=`
  if test -n "$ac_maketemp"; then
    eval ac_cv_prog_make_${ac_make}_set=yes
  else
    eval ac_cv_prog_make_${ac_make}_set=no
  fi
! rm -f conftest.make
  fi
  if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
!   echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
    SET_MAKE=
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
    SET_MAKE="MAKE=${MAKE-make}"
  fi
  
  # Check whether --enable-dependency-tracking or --disable-dependency-tracking was given.
  if test "${enable_dependency_tracking+set}" = set; then
    enableval="$enable_dependency_tracking"
  
+ fi;
  if test "x$enable_dependency_tracking" != xno; then
    am_depcomp="$ac_aux_dir/depcomp"
    AMDEPBACKSLASH='\'
***************
*** 1135,1153 ****
  # test to see if srcdir already configured
  if test "`CDPATH=:; cd $srcdir && pwd`" != "`pwd`" &&
     test -f $srcdir/config.status; then
!   { echo "configure: error: source directory already configured; run \"make distclean\" there first" 1>&2; exit 1; }
  fi
  
  # Define the identity of the package.
  PACKAGE=netatalk
  VERSION=${NETATALK_VERSION}
! cat >> confdefs.h <<EOF
  #define PACKAGE "$PACKAGE"
! EOF
  
! cat >> confdefs.h <<EOF
  #define VERSION "$VERSION"
! EOF
  
  
  # Autoconf 2.50 wants to disallow AM_ names.  We explicitly allow
--- 1768,1790 ----
  # test to see if srcdir already configured
  if test "`CDPATH=:; cd $srcdir && pwd`" != "`pwd`" &&
     test -f $srcdir/config.status; then
!   { { echo "$as_me:$LINENO: error: source directory already configured; run \"make distclean\" there first" >&5
! echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  # Define the identity of the package.
  PACKAGE=netatalk
  VERSION=${NETATALK_VERSION}
! 
! cat >>confdefs.h <<_ACEOF
  #define PACKAGE "$PACKAGE"
! _ACEOF
  
! 
! cat >>confdefs.h <<_ACEOF
  #define VERSION "$VERSION"
! _ACEOF
  
  
  # Autoconf 2.50 wants to disallow AM_ names.  We explicitly allow
***************
*** 1189,1439 ****
  # some platforms.
  
  
-   
  
  
! for ac_prog in mawk gawk nawk awk
  do
! # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1201: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_AWK="$ac_prog"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
  fi
  fi
! AWK="$ac_cv_prog_AWK"
  if test -n "$AWK"; then
!   echo "$ac_t""$AWK" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! test -n "$AWK" && break
  done
  
! # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1233: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_CC="gcc"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
  fi
  fi
! CC="$ac_cv_prog_CC"
  if test -n "$CC"; then
!   echo "$ac_t""$CC" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
  if test -z "$CC"; then
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1263: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
  else
-   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
    ac_prog_rejected=no
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
!         ac_prog_rejected=yes
! 	continue
!       fi
!       ac_cv_prog_CC="cc"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
  if test $ac_prog_rejected = yes; then
    # We found a bogon in the path, so make sure we never use it.
    set dummy $ac_cv_prog_CC
    shift
!   if test $# -gt 0; then
      # We chose a different compiler from the bogus one.
      # However, it has the same basename, so the bogon will be chosen
      # first if we set CC to just the basename; use the full file name.
      shift
!     set dummy "$ac_dir/$ac_word" "$@"
      shift
      ac_cv_prog_CC="$@"
    fi
  fi
  fi
  fi
! CC="$ac_cv_prog_CC"
  if test -n "$CC"; then
!   echo "$ac_t""$CC" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
!   if test -z "$CC"; then
!     case "`uname -s`" in
!     *win32* | *WIN32*)
!       # Extract the first word of "cl", so it can be a program name with args.
! set dummy cl; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1314: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_CC="cl"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
  fi
  fi
! CC="$ac_cv_prog_CC"
  if test -n "$CC"; then
!   echo "$ac_t""$CC" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
!  ;;
!     esac
    fi
!   test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
  fi
  
! echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
! echo "configure:1346: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
  
! ac_ext=c
! # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
! ac_cpp='$CPP $CPPFLAGS'
! ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
! ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
! cross_compiling=$ac_cv_prog_cc_cross
  
! cat > conftest.$ac_ext << EOF
  
! #line 1357 "configure"
  #include "confdefs.h"
  
! main(){return(0);}
! EOF
! if { (eval echo configure:1362: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   ac_cv_prog_cc_works=yes
!   # If we can't run a trivial program, we are probably using a cross compiler.
!   if (./conftest; exit) 2>/dev/null; then
!     ac_cv_prog_cc_cross=no
    else
!     ac_cv_prog_cc_cross=yes
    fi
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   ac_cv_prog_cc_works=no
  fi
! rm -fr conftest*
! ac_ext=c
! # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
! ac_cpp='$CPP $CPPFLAGS'
! ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
! ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
! cross_compiling=$ac_cv_prog_cc_cross
  
! echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
! if test $ac_cv_prog_cc_works = no; then
!   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
  fi
- echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
- echo "configure:1388: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
- echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
- cross_compiling=$ac_cv_prog_cc_cross
  
! echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
! echo "configure:1393: checking whether we are using GNU C" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.c <<EOF
! #ifdef __GNUC__
!   yes;
  #endif
! EOF
! if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1402: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
!   ac_cv_prog_gcc=yes
  else
!   ac_cv_prog_gcc=no
  fi
  fi
  
! echo "$ac_t""$ac_cv_prog_gcc" 1>&6
  
! if test $ac_cv_prog_gcc = yes; then
!   GCC=yes
  else
!   GCC=
  fi
  
! ac_test_CFLAGS="${CFLAGS+set}"
! ac_save_CFLAGS="$CFLAGS"
! CFLAGS=
! echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
! echo "configure:1421: checking whether ${CC-cc} accepts -g" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   echo 'void f(){}' > conftest.c
! if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
    ac_cv_prog_cc_g=yes
  else
!   ac_cv_prog_cc_g=no
  fi
! rm -f conftest*
! 
  fi
! 
! echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
  if test "$ac_test_CFLAGS" = set; then
!   CFLAGS="$ac_save_CFLAGS"
  elif test $ac_cv_prog_cc_g = yes; then
    if test "$GCC" = yes; then
      CFLAGS="-g -O2"
--- 1826,2498 ----
  # some platforms.
  
  
  
  
! 		    		    		    ac_config_headers="$ac_config_headers config.h"
! 
! 
! for ac_prog in gawk mawk nawk awk
  do
!   # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_AWK+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$AWK"; then
    ac_cv_prog_AWK="$AWK" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_AWK="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
  fi
  fi
! AWK=$ac_cv_prog_AWK
  if test -n "$AWK"; then
!   echo "$as_me:$LINENO: result: $AWK" >&5
! echo "${ECHO_T}$AWK" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
!   test -n "$AWK" && break
  done
  
! ac_ext=c
! ac_cpp='$CPP $CPPFLAGS'
! ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
! ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
! ac_compiler_gnu=$ac_cv_c_compiler_gnu
! if test -n "$ac_tool_prefix"; then
!   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
! set dummy ${ac_tool_prefix}gcc; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   if test -n "$CC"; then
!   ac_cv_prog_CC="$CC" # Let the user override the test.
! else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_CC="${ac_tool_prefix}gcc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
! fi
! fi
! CC=$ac_cv_prog_CC
! if test -n "$CC"; then
!   echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! fi
! 
! fi
! if test -z "$ac_cv_prog_CC"; then
!   ac_ct_CC=$CC
!   # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   if test -n "$ac_ct_CC"; then
!   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
! else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_ac_ct_CC="gcc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
! fi
! fi
! ac_ct_CC=$ac_cv_prog_ac_ct_CC
! if test -n "$ac_ct_CC"; then
!   echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
! echo "${ECHO_T}$ac_ct_CC" >&6
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! fi
! 
!   CC=$ac_ct_CC
! else
!   CC="$ac_cv_prog_CC"
! fi
! 
! if test -z "$CC"; then
!   if test -n "$ac_tool_prefix"; then
!   # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
! set dummy ${ac_tool_prefix}cc; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_CC="${ac_tool_prefix}cc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
  fi
  fi
! CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
+ fi
+ if test -z "$ac_cv_prog_CC"; then
+   ac_ct_CC=$CC
+   # Extract the first word of "cc", so it can be a program name with args.
+ set dummy cc; ac_word=$2
+ echo "$as_me:$LINENO: checking for $ac_word" >&5
+ echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+ if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+   echo $ECHO_N "(cached) $ECHO_C" >&6
+ else
+   if test -n "$ac_ct_CC"; then
+   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+ else
+ as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+   for ac_exec_ext in '' $ac_executable_extensions; do
+   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+     ac_cv_prog_ac_ct_CC="cc"
+     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+ done
+ 
+ fi
+ fi
+ ac_ct_CC=$ac_cv_prog_ac_ct_CC
+ if test -n "$ac_ct_CC"; then
+   echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+ echo "${ECHO_T}$ac_ct_CC" >&6
+ else
+   echo "$as_me:$LINENO: result: no" >&5
+ echo "${ECHO_T}no" >&6
+ fi
+ 
+   CC=$ac_ct_CC
+ else
+   CC="$ac_cv_prog_CC"
+ fi
+ 
+ fi
  if test -z "$CC"; then
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
  else
    ac_prog_rejected=no
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
!        ac_prog_rejected=yes
!        continue
!      fi
!     ac_cv_prog_CC="cc"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
  if test $ac_prog_rejected = yes; then
    # We found a bogon in the path, so make sure we never use it.
    set dummy $ac_cv_prog_CC
    shift
!   if test $# != 0; then
      # We chose a different compiler from the bogus one.
      # However, it has the same basename, so the bogon will be chosen
      # first if we set CC to just the basename; use the full file name.
      shift
!     set dummy "$as_dir/$ac_word" ${1+"$@"}
      shift
      ac_cv_prog_CC="$@"
    fi
  fi
  fi
  fi
! CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
! fi
! if test -z "$CC"; then
!   if test -n "$ac_tool_prefix"; then
!   for ac_prog in cl
!   do
!     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
! set dummy $ac_tool_prefix$ac_prog; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$CC"; then
    ac_cv_prog_CC="$CC" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
  fi
  fi
! CC=$ac_cv_prog_CC
  if test -n "$CC"; then
!   echo "$as_me:$LINENO: result: $CC" >&5
! echo "${ECHO_T}$CC" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
! 
!     test -n "$CC" && break
!   done
! fi
! if test -z "$CC"; then
!   ac_ct_CC=$CC
!   for ac_prog in cl
! do
!   # Extract the first word of "$ac_prog", so it can be a program name with args.
! set dummy $ac_prog; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   if test -n "$ac_ct_CC"; then
!   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
! else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_ac_ct_CC="$ac_prog"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
    fi
! done
! done
! 
! fi
! fi
! ac_ct_CC=$ac_cv_prog_ac_ct_CC
! if test -n "$ac_ct_CC"; then
!   echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
! echo "${ECHO_T}$ac_ct_CC" >&6
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
!   test -n "$ac_ct_CC" && break
! done
  
!   CC=$ac_ct_CC
! fi
  
! fi
  
! 
! test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH" >&5
! echo "$as_me: error: no acceptable C compiler found in \$PATH" >&2;}
!    { (exit 1); exit 1; }; }
! 
! # Provide some information about the compiler.
! echo "$as_me:$LINENO:" \
!      "checking for C compiler version" >&5
! ac_compiler=`set X $ac_compile; echo $2`
! { (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
!   (eval $ac_compiler --version </dev/null >&5) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (eval echo "$as_me:$LINENO: \"$ac_compiler -v </dev/null >&5\"") >&5
!   (eval $ac_compiler -v </dev/null >&5) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! { (eval echo "$as_me:$LINENO: \"$ac_compiler -V </dev/null >&5\"") >&5
!   (eval $ac_compiler -V </dev/null >&5) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
! 
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! 
!   ;
!   return 0;
! }
! _ACEOF
! ac_clean_files_save=$ac_clean_files
! ac_clean_files="$ac_clean_files a.out a.exe"
! # Try to create an executable without -o first, disregard a.out.
! # It will help us diagnose broken compilers, and finding out an intuition
! # of exeext.
! echo "$as_me:$LINENO: checking for C compiler default output" >&5
! echo $ECHO_N "checking for C compiler default output... $ECHO_C" >&6
! ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
! if { (eval echo "$as_me:$LINENO: \"$ac_link_default\"") >&5
!   (eval $ac_link_default) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
!   # Find the output, starting from the most likely.  This scheme is
! # not robust to junk in `.', hence go to wildcards (a.*) only as a last
! # resort.
! 
! # Be careful to initialize this variable, since it used to be cached.
! # Otherwise an old cache value of `no' led to `EXEEXT = no' in a Makefile.
! ac_cv_exeext=
! for ac_file in `ls a_out.exe a.exe conftest.exe 2>/dev/null;
!                 ls a.out conftest 2>/dev/null;
!                 ls a.* conftest.* 2>/dev/null`; do
!   case $ac_file in
!     *.$ac_ext | *.o | *.obj | *.xcoff | *.tds | *.d | *.pdb | *.xSYM ) ;;
!     a.out ) # We found the default executable, but exeext='' is most
!             # certainly right.
!             break;;
!     *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
!           # FIXME: I believe we export ac_cv_exeext for Libtool --akim.
!           export ac_cv_exeext
!           break;;
!     * ) break;;
!   esac
! done
! else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! { { echo "$as_me:$LINENO: error: C compiler cannot create executables" >&5
! echo "$as_me: error: C compiler cannot create executables" >&2;}
!    { (exit 77); exit 77; }; }
! fi
! 
! ac_exeext=$ac_cv_exeext
! echo "$as_me:$LINENO: result: $ac_file" >&5
! echo "${ECHO_T}$ac_file" >&6
! 
! # Check the compiler produces executables we can run.  If not, either
! # the compiler is broken, or we cross compile.
! echo "$as_me:$LINENO: checking whether the C compiler works" >&5
! echo $ECHO_N "checking whether the C compiler works... $ECHO_C" >&6
! # FIXME: These cross compiler hacks should be removed for Autoconf 3.0
! # If not cross compiling, check that we can run a simple program.
! if test "$cross_compiling" != yes; then
!   if { ac_try='./$ac_file'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!     cross_compiling=no
    else
!     if test "$cross_compiling" = maybe; then
! 	cross_compiling=yes
!     else
! 	{ { echo "$as_me:$LINENO: error: cannot run C compiled programs.
! If you meant to cross compile, use \`--host'." >&5
! echo "$as_me: error: cannot run C compiled programs.
! If you meant to cross compile, use \`--host'." >&2;}
!    { (exit 1); exit 1; }; }
!     fi
    fi
  fi
! echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
  
! rm -f a.out a.exe conftest$ac_cv_exeext
! ac_clean_files=$ac_clean_files_save
! # Check the compiler produces executables we can run.  If not, either
! # the compiler is broken, or we cross compile.
! echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
! echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6
! echo "$as_me:$LINENO: result: $cross_compiling" >&5
! echo "${ECHO_T}$cross_compiling" >&6
! 
! echo "$as_me:$LINENO: checking for suffix of executables" >&5
! echo $ECHO_N "checking for suffix of executables... $ECHO_C" >&6
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
!   # If both `conftest.exe' and `conftest' are `present' (well, observable)
! # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
! # work properly (i.e., refer to `conftest.exe'), while it won't with
! # `rm'.
! for ac_file in `(ls conftest.exe; ls conftest; ls conftest.*) 2>/dev/null`; do
!   case $ac_file in
!     *.$ac_ext | *.o | *.obj | *.xcoff | *.tds | *.d | *.pdb ) ;;
!     *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
!           export ac_cv_exeext
!           break;;
!     * ) break;;
!   esac
! done
! else
!   { { echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link" >&5
! echo "$as_me: error: cannot compute suffix of executables: cannot compile and link" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
! rm -f conftest$ac_cv_exeext
! echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
! echo "${ECHO_T}$ac_cv_exeext" >&6
! 
! rm -f conftest.$ac_ext
! EXEEXT=$ac_cv_exeext
! ac_exeext=$EXEEXT
! echo "$as_me:$LINENO: checking for suffix of object files" >&5
! echo $ECHO_N "checking for suffix of object files... $ECHO_C" >&6
! if test "${ac_cv_objext+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
  #endif
! int
! main ()
! {
! 
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.o conftest.obj
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
!   for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do
!   case $ac_file in
!     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb ) ;;
!     *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
!        break;;
!   esac
! done
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! { { echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile" >&5
! echo "$as_me: error: cannot compute suffix of object files: cannot compile" >&2;}
!    { (exit 1); exit 1; }; }
  fi
+ 
+ rm -f conftest.$ac_cv_objext conftest.$ac_ext
  fi
+ echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
+ echo "${ECHO_T}$ac_cv_objext" >&6
+ OBJEXT=$ac_cv_objext
+ ac_objext=$OBJEXT
+ echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
+ echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
+ if test "${ac_cv_c_compiler_gnu+set}" = set; then
+   echo $ECHO_N "(cached) $ECHO_C" >&6
+ else
+   cat >conftest.$ac_ext <<_ACEOF
+ #line $LINENO "configure"
+ #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! #ifndef __GNUC__
!        choke me
! #endif
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_compiler_gnu=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_compiler_gnu=no
  fi
+ rm -f conftest.$ac_objext conftest.$ac_ext
+ ac_cv_c_compiler_gnu=$ac_compiler_gnu
  
! fi
! echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
! echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
! GCC=`test $ac_compiler_gnu = yes && echo yes`
! ac_test_CFLAGS=${CFLAGS+set}
! ac_save_CFLAGS=$CFLAGS
! CFLAGS="-g"
! echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
! echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
! if test "${ac_cv_prog_cc_g+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! 
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_prog_cc_g=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_prog_cc_g=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
  if test "$ac_test_CFLAGS" = set; then
!   CFLAGS=$ac_save_CFLAGS
  elif test $ac_cv_prog_cc_g = yes; then
    if test "$GCC" = yes; then
      CFLAGS="-g -O2"
***************
*** 1447,1453 ****
--- 2506,2635 ----
      CFLAGS=
    fi
  fi
+ # Some people use a C++ compiler to compile C.  Since we use `exit',
+ # in C++ we need to declare it.  In case someone uses the same compiler
+ # for both compiling C and C++ we need to have the C++ compiler decide
+ # the declaration of exit, since it's the most demanding environment.
+ cat >conftest.$ac_ext <<_ACEOF
+ #ifndef __cplusplus
+   choke me
+ #endif
+ _ACEOF
+ rm -f conftest.$ac_objext
+ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); } &&
+          { ac_try='test -s conftest.$ac_objext'
+   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+   (eval $ac_try) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); }; }; then
+   for ac_declaration in \
+    ''\
+    '#include <stdlib.h>' \
+    'extern "C" void std::exit (int) throw (); using std::exit;' \
+    'extern "C" void std::exit (int); using std::exit;' \
+    'extern "C" void exit (int) throw ();' \
+    'extern "C" void exit (int);' \
+    'void exit (int);'
+ do
+   cat >conftest.$ac_ext <<_ACEOF
+ #line $LINENO "configure"
+ #include "confdefs.h"
+ #include <stdlib.h>
+ $ac_declaration
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
+ exit (42);
+   ;
+   return 0;
+ }
+ _ACEOF
+ rm -f conftest.$ac_objext
+ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); } &&
+          { ac_try='test -s conftest.$ac_objext'
+   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+   (eval $ac_try) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); }; }; then
+   :
+ else
+   echo "$as_me: failed program was:" >&5
+ cat conftest.$ac_ext >&5
+ continue
+ fi
+ rm -f conftest.$ac_objext conftest.$ac_ext
+   cat >conftest.$ac_ext <<_ACEOF
+ #line $LINENO "configure"
+ #include "confdefs.h"
+ $ac_declaration
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
+ exit (42);
+   ;
+   return 0;
+ }
+ _ACEOF
+ rm -f conftest.$ac_objext
+ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); } &&
+          { ac_try='test -s conftest.$ac_objext'
+   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+   (eval $ac_try) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); }; }; then
+   break
+ else
+   echo "$as_me: failed program was:" >&5
+ cat conftest.$ac_ext >&5
+ fi
+ rm -f conftest.$ac_objext conftest.$ac_ext
+ done
+ rm -f conftest*
+ if test -n "$ac_declaration"; then
+   echo '#ifdef __cplusplus' >>confdefs.h
+   echo $ac_declaration      >>confdefs.h
+   echo '#endif'             >>confdefs.h
+ fi
  
+ else
+   echo "$as_me: failed program was:" >&5
+ cat conftest.$ac_ext >&5
+ fi
+ rm -f conftest.$ac_objext conftest.$ac_ext
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ ac_config_commands="$ac_config_commands default-1"
  
  am_make=${MAKE-make}
  cat > confinc << 'END'
***************
*** 1455,1462 ****
  	@echo done
  END
  # If we don't find an include directive, just comment out the code.
! echo $ac_n "checking for style of include used by $am_make""... $ac_c" 1>&6
! echo "configure:1460: checking for style of include used by $am_make" >&5
  am__include='#'
  am__quote=
  _am_result=none
--- 2637,2644 ----
  	@echo done
  END
  # If we don't find an include directive, just comment out the code.
! echo "$as_me:$LINENO: checking for style of include used by $am_make" >&5
! echo $ECHO_N "checking for style of include used by $am_make... $ECHO_C" >&6
  am__include='#'
  am__quote=
  _am_result=none
***************
*** 1483,1498 ****
  fi
  
  
! echo "$ac_t""$_am_result" 1>&6
  rm -f confinc confmf
  
  
  depcc="$CC"   am_compiler_list=
  
! echo $ac_n "checking dependency style of $depcc""... $ac_c" 1>&6
! echo "configure:1494: checking dependency style of $depcc" >&5
! if eval "test \"`echo '$''{'am_cv_CC_dependencies_compiler_type'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
--- 2665,2681 ----
  fi
  
  
! echo "$as_me:$LINENO: result: $_am_result" >&5
! echo "${ECHO_T}$_am_result" >&6
  rm -f confinc confmf
  
  
  depcc="$CC"   am_compiler_list=
  
! echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
! echo $ECHO_N "checking dependency style of $depcc... $ECHO_C" >&6
! if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
    # We make a subdir and do the tests there.  Otherwise we can end up
***************
*** 1551,1558 ****
  fi
  
  fi
! 
! echo "$ac_t""$am_cv_CC_dependencies_compiler_type" 1>&6
  CCDEPMODE="depmode=$am_cv_CC_dependencies_compiler_type"
  
  
--- 2734,2741 ----
  fi
  
  fi
! echo "$as_me:$LINENO: result: $am_cv_CC_dependencies_compiler_type" >&5
! echo "${ECHO_T}$am_cv_CC_dependencies_compiler_type" >&6
  CCDEPMODE="depmode=$am_cv_CC_dependencies_compiler_type"
  
  
***************
*** 1563,1827 ****
  # SunOS /usr/etc/install
  # IRIX /sbin/install
  # AIX /bin/install
  # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
  # AFS /usr/afsws/bin/install, which mishandles nonexistent args
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # ./install, which can be erroneously created by make from ./install.sh.
! echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
! echo "configure:1572: checking for a BSD compatible install" >&5
  if test -z "$INSTALL"; then
! if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!     IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
!   for ac_dir in $PATH; do
!     # Account for people who put trailing slashes in PATH elements.
!     case "$ac_dir/" in
!     /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
!     *)
!       # OSF1 and SCO ODT 3.0 have their own names for install.
!       # Don't use installbsd from OSF since it installs stuff as root
!       # by default.
!       for ac_prog in ginstall scoinst install; do
!         if test -f $ac_dir/$ac_prog; then
! 	  if test $ac_prog = install &&
!             grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
! 	    # AIX install.  It has an incompatible calling convention.
! 	    :
! 	  else
! 	    ac_cv_path_install="$ac_dir/$ac_prog -c"
! 	    break 2
! 	  fi
! 	fi
        done
!       ;;
!     esac
!   done
!   IFS="$ac_save_IFS"
  
  fi
    if test "${ac_cv_path_install+set}" = set; then
!     INSTALL="$ac_cv_path_install"
    else
      # As a last resort, use the slow shell script.  We don't cache a
      # path for INSTALL within a source directory, because that will
      # break other packages using the cache if that directory is
      # removed, or if the path is relative.
!     INSTALL="$ac_install_sh"
    fi
  fi
! echo "$ac_t""$INSTALL" 1>&6
  
  # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
  # It thinks the first close brace ends the variable substitution.
  test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
  
! test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
  
  test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
! echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
! echo "configure:1625: checking whether ln -s works" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
! else
!   rm -f conftestdata
! if ln -s X conftestdata 2>/dev/null
! then
!   rm -f conftestdata
!   ac_cv_prog_LN_S="ln -s"
! else
!   ac_cv_prog_LN_S=ln
! fi
! fi
! LN_S="$ac_cv_prog_LN_S"
! if test "$ac_cv_prog_LN_S" = "ln -s"; then
!   echo "$ac_t""yes" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
! echo "configure:1646: checking whether ${MAKE-make} sets \${MAKE}" >&5
! set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftestmake <<\EOF
  all:
  	@echo 'ac_maketemp="${MAKE}"'
! EOF
  # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
! eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
  if test -n "$ac_maketemp"; then
    eval ac_cv_prog_make_${ac_make}_set=yes
  else
    eval ac_cv_prog_make_${ac_make}_set=no
  fi
! rm -f conftestmake
  fi
  if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    SET_MAKE=
  else
!   echo "$ac_t""no" 1>&6
    SET_MAKE="MAKE=${MAKE-make}"
  fi
  
  
- # Find the correct PATH separator.  Usually this is `:', but
- # DJGPP uses `;' like DOS.
- if test "X${PATH_SEPARATOR+set}" != Xset; then
-   UNAME=${UNAME-`uname 2>/dev/null`}
-   case X$UNAME in
-     *-DOS) lt_cv_sys_path_separator=';' ;;
-     *)     lt_cv_sys_path_separator=':' ;;
-   esac
-   PATH_SEPARATOR=$lt_cv_sys_path_separator
- fi
- 
- echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
- echo "configure:1685: checking for Cygwin environment" >&5
- if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-   cat > conftest.$ac_ext <<EOF
- #line 1690 "configure"
- #include "confdefs.h"
- 
- int main() {
- 
- #ifndef __CYGWIN__
- #define __CYGWIN__ __CYGWIN32__
- #endif
- return __CYGWIN__;
- ; return 0; }
- EOF
- if { (eval echo configure:1701: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-   rm -rf conftest*
-   ac_cv_cygwin=yes
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_cygwin=no
- fi
- rm -f conftest*
- rm -f conftest*
- fi
- 
- echo "$ac_t""$ac_cv_cygwin" 1>&6
- CYGWIN=
- test "$ac_cv_cygwin" = yes && CYGWIN=yes
- echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
- echo "configure:1718: checking for mingw32 environment" >&5
- if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-   cat > conftest.$ac_ext <<EOF
- #line 1723 "configure"
- #include "confdefs.h"
- 
- int main() {
- return __MINGW32__;
- ; return 0; }
- EOF
- if { (eval echo configure:1730: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-   rm -rf conftest*
-   ac_cv_mingw32=yes
- else
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   ac_cv_mingw32=no
- fi
- rm -f conftest*
- rm -f conftest*
- fi
- 
- echo "$ac_t""$ac_cv_mingw32" 1>&6
- MINGW32=
- test "$ac_cv_mingw32" = yes && MINGW32=yes
- echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
- echo "configure:1747: checking how to run the C preprocessor" >&5
- # On Suns, sometimes $CPP names a directory.
- if test -n "$CPP" && test -d "$CPP"; then
-   CPP=
- fi
- if test -z "$CPP"; then
- if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-     # This must be in double quotes, not single quotes, because CPP may get
-   # substituted into the Makefile and "${CC-cc}" will confuse make.
-   CPP="${CC-cc} -E"
-   # On the NeXT, cc -E runs the code through the compiler's parser,
-   # not just through cpp.
-   cat > conftest.$ac_ext <<EOF
- #line 1762 "configure"
- #include "confdefs.h"
- #include <assert.h>
- Syntax Error
- EOF
- ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
- { (eval echo configure:1768: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
- ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
- if test -z "$ac_err"; then
-   :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   CPP="${CC-cc} -E -traditional-cpp"
-   cat > conftest.$ac_ext <<EOF
- #line 1779 "configure"
- #include "confdefs.h"
- #include <assert.h>
- Syntax Error
- EOF
- ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
- { (eval echo configure:1785: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
- ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
- if test -z "$ac_err"; then
-   :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   CPP="${CC-cc} -nologo -E"
-   cat > conftest.$ac_ext <<EOF
- #line 1796 "configure"
- #include "confdefs.h"
- #include <assert.h>
- Syntax Error
- EOF
- ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
- { (eval echo configure:1802: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
- ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
- if test -z "$ac_err"; then
-   :
- else
-   echo "$ac_err" >&5
-   echo "configure: failed program was:" >&5
-   cat conftest.$ac_ext >&5
-   rm -rf conftest*
-   CPP=/lib/cpp
- fi
- rm -f conftest*
- fi
- rm -f conftest*
- fi
- rm -f conftest*
-   ac_cv_prog_CPP="$CPP"
- fi
-   CPP="$ac_cv_prog_CPP"
- else
-   ac_cv_prog_CPP="$CPP"
- fi
- echo "$ac_t""$CPP" 1>&6
- 
  # Check whether --enable-shared or --disable-shared was given.
  if test "${enable_shared+set}" = set; then
    enableval="$enable_shared"
--- 2746,2862 ----
  # SunOS /usr/etc/install
  # IRIX /sbin/install
  # AIX /bin/install
+ # AmigaOS /C/install, which installs bootblocks on floppy discs
  # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
  # AFS /usr/afsws/bin/install, which mishandles nonexistent args
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # ./install, which can be erroneously created by make from ./install.sh.
! echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
! echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6
  if test -z "$INSTALL"; then
! if test "${ac_cv_path_install+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   # Account for people who put trailing slashes in PATH elements.
! case $as_dir/ in
!   ./ | .// | /cC/* | \
!   /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
!   /usr/ucb/* ) ;;
!   *)
!     # OSF1 and SCO ODT 3.0 have their own names for install.
!     # Don't use installbsd from OSF since it installs stuff as root
!     # by default.
!     for ac_prog in ginstall scoinst install; do
!       for ac_exec_ext in '' $ac_executable_extensions; do
!         if $as_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
!           if test $ac_prog = install &&
!             grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
!             # AIX install.  It has an incompatible calling convention.
!             :
!           elif test $ac_prog = install &&
!             grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
!             # program-specific install script used by HP pwplus--don't use.
!             :
!           else
!             ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
!             break 3
!           fi
!         fi
        done
!     done
!     ;;
! esac
! done
! 
  
  fi
    if test "${ac_cv_path_install+set}" = set; then
!     INSTALL=$ac_cv_path_install
    else
      # As a last resort, use the slow shell script.  We don't cache a
      # path for INSTALL within a source directory, because that will
      # break other packages using the cache if that directory is
      # removed, or if the path is relative.
!     INSTALL=$ac_install_sh
    fi
  fi
! echo "$as_me:$LINENO: result: $INSTALL" >&5
! echo "${ECHO_T}$INSTALL" >&6
  
  # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
  # It thinks the first close brace ends the variable substitution.
  test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
  
! test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
  
  test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
  
! echo "$as_me:$LINENO: checking whether ln -s works" >&5
! echo $ECHO_N "checking whether ln -s works... $ECHO_C" >&6
! LN_S=$as_ln_s
! if test "$LN_S" = "ln -s"; then
!   echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
  else
!   echo "$as_me:$LINENO: result: no, using $LN_S" >&5
! echo "${ECHO_T}no, using $LN_S" >&6
  fi
  
! echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \${MAKE}" >&5
! echo $ECHO_N "checking whether ${MAKE-make} sets \${MAKE}... $ECHO_C" >&6
! set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y,./+-,__p_,'`
! if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.make <<\_ACEOF
  all:
  	@echo 'ac_maketemp="${MAKE}"'
! _ACEOF
  # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
! eval `${MAKE-make} -f conftest.make 2>/dev/null | grep temp=`
  if test -n "$ac_maketemp"; then
    eval ac_cv_prog_make_${ac_make}_set=yes
  else
    eval ac_cv_prog_make_${ac_make}_set=no
  fi
! rm -f conftest.make
  fi
  if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
!   echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
    SET_MAKE=
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
    SET_MAKE="MAKE=${MAKE-make}"
  fi
  
  
  # Check whether --enable-shared or --disable-shared was given.
  if test "${enable_shared+set}" = set; then
    enableval="$enable_shared"
***************
*** 1843,1850 ****
  esac
  else
    enable_shared=yes
! fi
! 
  # Check whether --enable-static or --disable-static was given.
  if test "${enable_static+set}" = set; then
    enableval="$enable_static"
--- 2878,2884 ----
  esac
  else
    enable_shared=yes
! fi;
  # Check whether --enable-static or --disable-static was given.
  if test "${enable_static+set}" = set; then
    enableval="$enable_static"
***************
*** 1866,1873 ****
  esac
  else
    enable_static=yes
! fi
! 
  # Check whether --enable-fast-install or --disable-fast-install was given.
  if test "${enable_fast_install+set}" = set; then
    enableval="$enable_fast_install"
--- 2900,2906 ----
  esac
  else
    enable_static=yes
! fi;
  # Check whether --enable-fast-install or --disable-fast-install was given.
  if test "${enable_fast_install+set}" = set; then
    enableval="$enable_fast_install"
***************
*** 1889,1909 ****
  esac
  else
    enable_fast_install=yes
  fi
  
  # Check whether --with-gnu-ld or --without-gnu-ld was given.
  if test "${with_gnu_ld+set}" = set; then
    withval="$with_gnu_ld"
    test "$withval" = no || with_gnu_ld=yes
  else
    with_gnu_ld=no
! fi
! 
  ac_prog=ld
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
!   echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
! echo "configure:1907: checking for ld used by GCC" >&5
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
--- 2922,2952 ----
  esac
  else
    enable_fast_install=yes
+ fi;
+ # Find the correct PATH separator.  Usually this is `:', but
+ # DJGPP uses `;' like DOS.
+ if test "X${PATH_SEPARATOR+set}" != Xset; then
+   UNAME=${UNAME-`uname 2>/dev/null`}
+   case X$UNAME in
+     *-DOS) lt_cv_sys_path_separator=';' ;;
+     *)     lt_cv_sys_path_separator=':' ;;
+   esac
+   PATH_SEPARATOR=$lt_cv_sys_path_separator
  fi
  
+ 
  # Check whether --with-gnu-ld or --without-gnu-ld was given.
  if test "${with_gnu_ld+set}" = set; then
    withval="$with_gnu_ld"
    test "$withval" = no || with_gnu_ld=yes
  else
    with_gnu_ld=no
! fi;
  ac_prog=ld
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
!   echo "$as_me:$LINENO: checking for ld used by GCC" >&5
! echo $ECHO_N "checking for ld used by GCC... $ECHO_C" >&6
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
***************
*** 1932,1945 ****
      ;;
    esac
  elif test "$with_gnu_ld" = yes; then
!   echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
! echo "configure:1937: checking for GNU ld" >&5
  else
!   echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
! echo "configure:1940: checking for non-GNU ld" >&5
  fi
! if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -z "$LD"; then
    IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
--- 2975,2988 ----
      ;;
    esac
  elif test "$with_gnu_ld" = yes; then
!   echo "$as_me:$LINENO: checking for GNU ld" >&5
! echo $ECHO_N "checking for GNU ld... $ECHO_C" >&6
  else
!   echo "$as_me:$LINENO: checking for non-GNU ld" >&5
! echo $ECHO_N "checking for non-GNU ld... $ECHO_C" >&6
  fi
! if test "${lt_cv_path_LD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -z "$LD"; then
    IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=$PATH_SEPARATOR
***************
*** 1965,1979 ****
  
  LD="$lt_cv_path_LD"
  if test -n "$LD"; then
!   echo "$ac_t""$LD" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
! test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
! echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
! echo "configure:1975: checking if the linker ($LD) is GNU ld" >&5
! if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    # I'd rather use --version here, but apparently some GNU ld's only accept -v.
  if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
--- 3008,3026 ----
  
  LD="$lt_cv_path_LD"
  if test -n "$LD"; then
!   echo "$as_me:$LINENO: result: $LD" >&5
! echo "${ECHO_T}$LD" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
! test -z "$LD" && { { echo "$as_me:$LINENO: error: no acceptable ld found in \$PATH" >&5
! echo "$as_me: error: no acceptable ld found in \$PATH" >&2;}
!    { (exit 1); exit 1; }; }
! echo "$as_me:$LINENO: checking if the linker ($LD) is GNU ld" >&5
! echo $ECHO_N "checking if the linker ($LD) is GNU ld... $ECHO_C" >&6
! if test "${lt_cv_prog_gnu_ld+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    # I'd rather use --version here, but apparently some GNU ld's only accept -v.
  if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
***************
*** 1982,2008 ****
    lt_cv_prog_gnu_ld=no
  fi
  fi
! 
! echo "$ac_t""$lt_cv_prog_gnu_ld" 1>&6
  with_gnu_ld=$lt_cv_prog_gnu_ld
  
  
! echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
! echo "configure:1992: checking for $LD option to reload object files" >&5
! if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    lt_cv_ld_reload_flag='-r'
  fi
! 
! echo "$ac_t""$lt_cv_ld_reload_flag" 1>&6
  reload_flag=$lt_cv_ld_reload_flag
  test -n "$reload_flag" && reload_flag=" $reload_flag"
  
! echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
! echo "configure:2004: checking for BSD-compatible nm" >&5
! if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$NM"; then
    # Let the user override the test.
--- 3029,3055 ----
    lt_cv_prog_gnu_ld=no
  fi
  fi
! echo "$as_me:$LINENO: result: $lt_cv_prog_gnu_ld" >&5
! echo "${ECHO_T}$lt_cv_prog_gnu_ld" >&6
  with_gnu_ld=$lt_cv_prog_gnu_ld
  
  
! echo "$as_me:$LINENO: checking for $LD option to reload object files" >&5
! echo $ECHO_N "checking for $LD option to reload object files... $ECHO_C" >&6
! if test "${lt_cv_ld_reload_flag+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_ld_reload_flag='-r'
  fi
! echo "$as_me:$LINENO: result: $lt_cv_ld_reload_flag" >&5
! echo "${ECHO_T}$lt_cv_ld_reload_flag" >&6
  reload_flag=$lt_cv_ld_reload_flag
  test -n "$reload_flag" && reload_flag=" $reload_flag"
  
! echo "$as_me:$LINENO: checking for BSD-compatible nm" >&5
! echo $ECHO_N "checking for BSD-compatible nm... $ECHO_C" >&6
! if test "${lt_cv_path_NM+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$NM"; then
    # Let the user override the test.
***************
*** 2035,2046 ****
  fi
  
  NM="$lt_cv_path_NM"
! echo "$ac_t""$NM" 1>&6
  
! echo $ac_n "checking how to recognise dependant libraries""... $ac_c" 1>&6
! echo "configure:2042: checking how to recognise dependant libraries" >&5
! if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    lt_cv_file_magic_cmd='$MAGIC_CMD'
  lt_cv_file_magic_test_file=
--- 3082,3094 ----
  fi
  
  NM="$lt_cv_path_NM"
! echo "$as_me:$LINENO: result: $NM" >&5
! echo "${ECHO_T}$NM" >&6
  
! echo "$as_me:$LINENO: checking how to recognise dependant libraries" >&5
! echo $ECHO_N "checking how to recognise dependant libraries... $ECHO_C" >&6
! if test "${lt_cv_deplibs_check_method+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    lt_cv_file_magic_cmd='$MAGIC_CMD'
  lt_cv_file_magic_test_file=
***************
*** 2209,2292 ****
  esac
  
  fi
! 
! echo "$ac_t""$lt_cv_deplibs_check_method" 1>&6
  file_magic_cmd=$lt_cv_file_magic_cmd
  deplibs_check_method=$lt_cv_deplibs_check_method
  
- echo $ac_n "checking for object suffix""... $ac_c" 1>&6
- echo "configure:2219: checking for object suffix" >&5
- if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-   rm -f conftest*
- echo 'int i = 1;' > conftest.$ac_ext
- if { (eval echo configure:2225: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-   for ac_file in conftest.*; do
-     case $ac_file in
-     *.c) ;;
-     *) ac_cv_objext=`echo $ac_file | sed -e s/conftest.//` ;;
-     esac
-   done
- else
-   { echo "configure: error: installation or configuration problem; compiler does not work" 1>&2; exit 1; }
- fi
- rm -f conftest*
- fi
- 
- echo "$ac_t""$ac_cv_objext" 1>&6
- OBJEXT=$ac_cv_objext
- ac_objext=$ac_cv_objext
- 
- 
  
- echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
- echo "configure:2245: checking for executable suffix" >&5
- if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
-   echo $ac_n "(cached) $ac_c" 1>&6
- else
-   if test "$CYGWIN" = yes || test "$MINGW32" = yes; then
-   ac_cv_exeext=.exe
- else
-   rm -f conftest*
-   echo 'int main () { return 0; }' > conftest.$ac_ext
-   ac_cv_exeext=
-   if { (eval echo configure:2255: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
-     for file in conftest.*; do
-       case $file in
-       *.c | *.o | *.obj) ;;
-       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
-       esac
-     done
-   else
-     { echo "configure: error: installation or configuration problem: compiler cannot create executables." 1>&2; exit 1; }
-   fi
-   rm -f conftest*
-   test x"${ac_cv_exeext}" = x && ac_cv_exeext=no
- fi
- fi
  
- EXEEXT=""
- test x"${ac_cv_exeext}" != xno && EXEEXT=${ac_cv_exeext}
- echo "$ac_t""${ac_cv_exeext}" 1>&6
- ac_exeext=$EXEEXT
  
- if test $host != $build; then
-   ac_tool_prefix=${host_alias}-
- else
-   ac_tool_prefix=
- fi
  
  
  
  
  # Check for command to grab the raw symbol name followed by C symbol from nm.
! echo $ac_n "checking command to parse $NM output""... $ac_c" 1>&6
! echo "configure:2286: checking command to parse $NM output" >&5
! if eval "test \"`echo '$''{'lt_cv_sys_global_symbol_pipe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   
  # These are sane defaults that work on at least a few old systems.
  # [They come from Ultrix.  What could be older than Ultrix?!! ;)]
  
--- 3257,3281 ----
  esac
  
  fi
! echo "$as_me:$LINENO: result: $lt_cv_deplibs_check_method" >&5
! echo "${ECHO_T}$lt_cv_deplibs_check_method" >&6
  file_magic_cmd=$lt_cv_file_magic_cmd
  deplibs_check_method=$lt_cv_deplibs_check_method
  
  
  
  
  
  
  
  
  # Check for command to grab the raw symbol name followed by C symbol from nm.
! echo "$as_me:$LINENO: checking command to parse $NM output" >&5
! echo $ECHO_N "checking command to parse $NM output... $ECHO_C" >&6
! if test "${lt_cv_sys_global_symbol_pipe+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
! 
  # These are sane defaults that work on at least a few old systems.
  # [They come from Ultrix.  What could be older than Ultrix?!! ;)]
  
***************
*** 2362,2371 ****
  int main(){nm_test_var='a';nm_test_func();return(0);}
  EOF
  
!   if { (eval echo configure:2366: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
      # Now try to grab the symbols.
      nlist=conftest.nm
!     if { (eval echo configure:2369: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
        # Try sorting and uniquifying the output.
        if sort "$nlist" | uniq > "$nlist"T; then
  	mv -f "$nlist"T "$nlist"
--- 3351,3368 ----
  int main(){nm_test_var='a';nm_test_func();return(0);}
  EOF
  
!   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
      # Now try to grab the symbols.
      nlist=conftest.nm
!     if { (eval echo "$as_me:$LINENO: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\"") >&5
!   (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s "$nlist"; then
        # Try sorting and uniquifying the output.
        if sort "$nlist" | uniq > "$nlist"T; then
  	mv -f "$nlist"T "$nlist"
***************
*** 2416,2422 ****
  	  save_CFLAGS="$CFLAGS"
  	  LIBS="conftstm.$ac_objext"
  	  CFLAGS="$CFLAGS$no_builtin_flag"
! 	  if { (eval echo configure:2420: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  	    pipe_works=yes
  	  fi
  	  LIBS="$save_LIBS"
--- 3413,3423 ----
  	  save_CFLAGS="$CFLAGS"
  	  LIBS="conftstm.$ac_objext"
  	  CFLAGS="$CFLAGS$no_builtin_flag"
! 	  if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s conftest; then
  	    pipe_works=yes
  	  fi
  	  LIBS="$save_LIBS"
***************
*** 2456,2504 ****
  fi
  if test -z "$global_symbol_pipe$global_symbol_to_cdec$global_symbol_to_c_name_address";
  then
!   echo "$ac_t""failed" 1>&6
  else
!   echo "$ac_t""ok" 1>&6
  fi
  
! for ac_hdr in dlfcn.h
  do
! ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:2469: checking for $ac_hdr" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 2474 "configure"
  #include "confdefs.h"
! #include <$ac_hdr>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:2479: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
  rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_hdr 1
! EOF
!  
  else
!   echo "$ac_t""no" 1>&6
  fi
  done
  
  
--- 3457,3979 ----
  fi
  if test -z "$global_symbol_pipe$global_symbol_to_cdec$global_symbol_to_c_name_address";
  then
!   echo "$as_me:$LINENO: result: failed" >&5
! echo "${ECHO_T}failed" >&6
  else
!   echo "$as_me:$LINENO: result: ok" >&5
! echo "${ECHO_T}ok" >&6
  fi
  
! ac_ext=c
! ac_cpp='$CPP $CPPFLAGS'
! ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
! ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
! ac_compiler_gnu=$ac_cv_c_compiler_gnu
! echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
! echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6
! # On Suns, sometimes $CPP names a directory.
! if test -n "$CPP" && test -d "$CPP"; then
!   CPP=
! fi
! if test -z "$CPP"; then
!   if test "${ac_cv_prog_CPP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!       # Double quotes because CPP needs to be expanded
!     for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
!     do
!       ac_preproc_ok=false
! for ac_c_preproc_warn_flag in '' yes
  do
!   # Use a header file that comes with gcc, so configuring glibc
!   # with a fresh cross-compiler works.
!   # On the NeXT, cc -E runs the code through the compiler's parser,
!   # not just through cpp. "Syntax error" is here to catch this case.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <assert.h>
!                      Syntax error
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
  else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   # Broken: fails on valid input.
! continue
! fi
! rm -f conftest.err conftest.$ac_ext
! 
!   # OK, works on sane cases.  Now check whether non-existent headers
!   # can be detected and how.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! #include <ac_nonexistent.h>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
  else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   # Broken: success on invalid input.
! continue
! else
!   echo "$as_me: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   # Passes both tests.
! ac_preproc_ok=:
! break
! fi
! rm -f conftest.err conftest.$ac_ext
! 
! done
! # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then
!   break
! fi
! 
!     done
!     ac_cv_prog_CPP=$CPP
! 
! fi
!   CPP=$ac_cv_prog_CPP
! else
!   ac_cv_prog_CPP=$CPP
! fi
! echo "$as_me:$LINENO: result: $CPP" >&5
! echo "${ECHO_T}$CPP" >&6
! ac_preproc_ok=false
! for ac_c_preproc_warn_flag in '' yes
! do
!   # Use a header file that comes with gcc, so configuring glibc
!   # with a fresh cross-compiler works.
!   # On the NeXT, cc -E runs the code through the compiler's parser,
!   # not just through cpp. "Syntax error" is here to catch this case.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <assert.h>
!                      Syntax error
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   :
! else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   # Broken: fails on valid input.
! continue
! fi
! rm -f conftest.err conftest.$ac_ext
! 
!   # OK, works on sane cases.  Now check whether non-existent headers
!   # can be detected and how.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <ac_nonexistent.h>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   # Broken: success on invalid input.
! continue
! else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   # Passes both tests.
! ac_preproc_ok=:
! break
! fi
! rm -f conftest.err conftest.$ac_ext
! 
! done
! # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
! rm -f conftest.err conftest.$ac_ext
! if $ac_preproc_ok; then
!   :
! else
!   { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check" >&5
! echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check" >&2;}
!    { (exit 1); exit 1; }; }
! fi
! 
! ac_ext=c
! ac_cpp='$CPP $CPPFLAGS'
! ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
! ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
! ac_compiler_gnu=$ac_cv_c_compiler_gnu
! 
! 
! echo "$as_me:$LINENO: checking for ANSI C header files" >&5
! echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
! if test "${ac_cv_header_stdc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <stdlib.h>
! #include <stdarg.h>
! #include <string.h>
! #include <float.h>
! 
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   ac_cv_header_stdc=yes
! else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   ac_cv_header_stdc=no
! fi
! rm -f conftest.err conftest.$ac_ext
! 
! if test $ac_cv_header_stdc = yes; then
!   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <string.h>
! 
! _ACEOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "memchr" >/dev/null 2>&1; then
!   :
! else
!   ac_cv_header_stdc=no
  fi
  rm -f conftest*
+ 
  fi
! 
! if test $ac_cv_header_stdc = yes; then
!   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <stdlib.h>
! 
! _ACEOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "free" >/dev/null 2>&1; then
!   :
  else
!   ac_cv_header_stdc=no
! fi
! rm -f conftest*
! 
! fi
! 
! if test $ac_cv_header_stdc = yes; then
!   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
!   if test "$cross_compiling" = yes; then
!   :
! else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <ctype.h>
! #if ((' ' & 0x0FF) == 0x020)
! # define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
! # define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
! #else
! # define ISLOWER(c) (('a' <= (c) && (c) <= 'i') \
!                      || ('j' <= (c) && (c) <= 'r') \
!                      || ('s' <= (c) && (c) <= 'z'))
! # define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
! #endif
! 
! #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
! int
! main ()
! {
!   int i;
!   for (i = 0; i < 256; i++)
!     if (XOR (islower (i), ISLOWER (i))
!         || toupper (i) != TOUPPER (i))
!       exit(2);
!   exit (0);
! }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   :
! else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_header_stdc=no
! fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
! fi
! fi
! fi
! echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
! echo "${ECHO_T}$ac_cv_header_stdc" >&6
! if test $ac_cv_header_stdc = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
! #define STDC_HEADERS 1
! _ACEOF
! 
! fi
! 
! # On IRIX 5.3, sys/types and inttypes.h are conflicting.
! 
! 
! 
! 
! 
! 
! 
! 
! 
! for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
!                   inttypes.h stdint.h unistd.h
! do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! $ac_includes_default
! 
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   eval "$as_ac_Header=yes"
! else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! eval "$as_ac_Header=no"
! fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
! _ACEOF
! 
! fi
! 
! done
! 
! 
! 
! for ac_header in dlfcn.h
! do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
! else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking $ac_header usability" >&5
! echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! $ac_includes_default
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
! else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
! fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking $ac_header presence" >&5
! echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <$ac_header>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   ac_header_preproc=no
! fi
! rm -f conftest.err conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc in
!   yes:no )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
!   no:yes )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
! echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
! esac
! echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   eval "$as_ac_Header=$ac_header_preproc"
! fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
! 
  fi
+ if test `eval echo '${'$as_ac_Header'}'` = yes; then
+   cat >>confdefs.h <<_ACEOF
+ #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+ _ACEOF
+ 
+ fi
+ 
  done
  
  
***************
*** 2509,2518 ****
  case $deplibs_check_method in
  file_magic*)
    if test "$file_magic_cmd" = '$MAGIC_CMD'; then
!     echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
! echo "configure:2514: checking for ${ac_tool_prefix}file" >&5
! if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    case $MAGIC_CMD in
    /*)
--- 3984,3993 ----
  case $deplibs_check_method in
  file_magic*)
    if test "$file_magic_cmd" = '$MAGIC_CMD'; then
!     echo "$as_me:$LINENO: checking for ${ac_tool_prefix}file" >&5
! echo $ECHO_N "checking for ${ac_tool_prefix}file... $ECHO_C" >&6
! if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $MAGIC_CMD in
    /*)
***************
*** 2564,2580 ****
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   echo "$ac_t""$MAGIC_CMD" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
  if test -z "$lt_cv_path_MAGIC_CMD"; then
    if test -n "$ac_tool_prefix"; then
!     echo $ac_n "checking for file""... $ac_c" 1>&6
! echo "configure:2576: checking for file" >&5
! if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    case $MAGIC_CMD in
    /*)
--- 4039,4057 ----
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
! echo "${ECHO_T}$MAGIC_CMD" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
  if test -z "$lt_cv_path_MAGIC_CMD"; then
    if test -n "$ac_tool_prefix"; then
!     echo "$as_me:$LINENO: checking for file" >&5
! echo $ECHO_N "checking for file... $ECHO_C" >&6
! if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    case $MAGIC_CMD in
    /*)
***************
*** 2626,2634 ****
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   echo "$ac_t""$MAGIC_CMD" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
    else
--- 4103,4113 ----
  
  MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
  if test -n "$MAGIC_CMD"; then
!   echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
! echo "${ECHO_T}$MAGIC_CMD" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
    else
***************
*** 2640,2789 ****
    ;;
  esac
  
! # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:2647: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
  fi
  fi
! RANLIB="$ac_cv_prog_RANLIB"
  if test -n "$RANLIB"; then
!   echo "$ac_t""$RANLIB" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! 
  if test -z "$ac_cv_prog_RANLIB"; then
! if test -n "$ac_tool_prefix"; then
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:2679: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   if test -n "$RANLIB"; then
!   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_RANLIB="ranlib"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
!   test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
  fi
  fi
! RANLIB="$ac_cv_prog_RANLIB"
! if test -n "$RANLIB"; then
!   echo "$ac_t""$RANLIB" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
  else
!   RANLIB=":"
! fi
  fi
  
! # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:2714: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
  fi
  fi
! STRIP="$ac_cv_prog_STRIP"
  if test -n "$STRIP"; then
!   echo "$ac_t""$STRIP" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! 
  if test -z "$ac_cv_prog_STRIP"; then
! if test -n "$ac_tool_prefix"; then
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:2746: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   if test -n "$STRIP"; then
!   ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
  else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_STRIP="strip"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
!   test -z "$ac_cv_prog_STRIP" && ac_cv_prog_STRIP=":"
  fi
  fi
! STRIP="$ac_cv_prog_STRIP"
! if test -n "$STRIP"; then
!   echo "$ac_t""$STRIP" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
  else
!   STRIP=":"
! fi
  fi
  
  
! enable_dlopen=yes
  enable_win32_dll=no
  
  # Check whether --enable-libtool-lock or --disable-libtool-lock was given.
  if test "${enable_libtool_lock+set}" = set; then
    enableval="$enable_libtool_lock"
-   :
- fi
  
  test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes
  
  # Some flags need to be propagated to the compiler or linker for good
--- 4119,4293 ----
    ;;
  esac
  
! if test -n "$ac_tool_prefix"; then
!   # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$RANLIB"; then
    ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
  fi
  fi
! RANLIB=$ac_cv_prog_RANLIB
  if test -n "$RANLIB"; then
!   echo "$as_me:$LINENO: result: $RANLIB" >&5
! echo "${ECHO_T}$RANLIB" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
! fi
  if test -z "$ac_cv_prog_RANLIB"; then
!   ac_ct_RANLIB=$RANLIB
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   if test -n "$ac_ct_RANLIB"; then
!   ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_ac_ct_RANLIB="ranlib"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
!   test -z "$ac_cv_prog_ac_ct_RANLIB" && ac_cv_prog_ac_ct_RANLIB=":"
  fi
  fi
! ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
! if test -n "$ac_ct_RANLIB"; then
!   echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
! echo "${ECHO_T}$ac_ct_RANLIB" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
+   RANLIB=$ac_ct_RANLIB
  else
!   RANLIB="$ac_cv_prog_RANLIB"
  fi
  
! if test -n "$ac_tool_prefix"; then
!   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test -n "$STRIP"; then
    ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
  fi
  fi
! STRIP=$ac_cv_prog_STRIP
  if test -n "$STRIP"; then
!   echo "$as_me:$LINENO: result: $STRIP" >&5
! echo "${ECHO_T}$STRIP" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
! fi
  if test -z "$ac_cv_prog_STRIP"; then
!   ac_ct_STRIP=$STRIP
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   if test -n "$ac_ct_STRIP"; then
!   ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
  else
! as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_prog_ac_ct_STRIP="strip"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
!   test -z "$ac_cv_prog_ac_ct_STRIP" && ac_cv_prog_ac_ct_STRIP=":"
  fi
  fi
! ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
! if test -n "$ac_ct_STRIP"; then
!   echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
! echo "${ECHO_T}$ac_ct_STRIP" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
+   STRIP=$ac_ct_STRIP
  else
!   STRIP="$ac_cv_prog_STRIP"
  fi
  
  
! enable_dlopen=no
  enable_win32_dll=no
  
  # Check whether --enable-libtool-lock or --disable-libtool-lock was given.
  if test "${enable_libtool_lock+set}" = set; then
    enableval="$enable_libtool_lock"
  
+ fi;
  test "x$enable_libtool_lock" != xno && enable_libtool_lock=yes
  
  # Some flags need to be propagated to the compiler or linker for good
***************
*** 2791,2798 ****
  case $host in
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 2795 "configure"' > conftest.$ac_ext
!   if { (eval echo configure:2796: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
      case `/usr/bin/file conftest.$ac_objext` in
      *32-bit*)
        LD="${LD-ld} -32"
--- 4295,4306 ----
  case $host in
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 4298 "configure"' > conftest.$ac_ext
!   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
      case `/usr/bin/file conftest.$ac_objext` in
      *32-bit*)
        LD="${LD-ld} -32"
***************
*** 2812,2858 ****
    # On SCO OpenServer 5, we need -belf to get full-featured binaries.
    SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -belf"
!   echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
! echo "configure:2817: checking whether the C compiler needs -belf" >&5
! if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   
       ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
  ac_cpp='$CPP $CPPFLAGS'
! ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
! ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
! cross_compiling=$ac_cv_prog_cc_cross
  
!      cat > conftest.$ac_ext <<EOF
! #line 2830 "configure"
  #include "confdefs.h"
  
! int main() {
  
! ; return 0; }
! EOF
! if { (eval echo configure:2837: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
    lt_cv_cc_needs_belf=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   lt_cv_cc_needs_belf=no
  fi
! rm -f conftest*
       ac_ext=c
- # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
  ac_cpp='$CPP $CPPFLAGS'
! ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
! ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
! cross_compiling=$ac_cv_prog_cc_cross
  
  fi
! 
! echo "$ac_t""$lt_cv_cc_needs_belf" 1>&6
    if test x"$lt_cv_cc_needs_belf" != x"yes"; then
      # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
      CFLAGS="$SAVE_CFLAGS"
--- 4320,4384 ----
    # On SCO OpenServer 5, we need -belf to get full-featured binaries.
    SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -belf"
!   echo "$as_me:$LINENO: checking whether the C compiler needs -belf" >&5
! echo $ECHO_N "checking whether the C compiler needs -belf... $ECHO_C" >&6
! if test "${lt_cv_cc_needs_belf+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
! 
! 
       ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
! ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
! ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
! ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
!      cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    lt_cv_cc_needs_belf=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! lt_cv_cc_needs_belf=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
       ac_ext=c
  ac_cpp='$CPP $CPPFLAGS'
! ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
! ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
! ac_compiler_gnu=$ac_cv_c_compiler_gnu
  
  fi
! echo "$as_me:$LINENO: result: $lt_cv_cc_needs_belf" >&5
! echo "${ECHO_T}$lt_cv_cc_needs_belf" >&6
    if test x"$lt_cv_cc_needs_belf" != x"yes"; then
      # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
      CFLAGS="$SAVE_CFLAGS"
***************
*** 2952,2959 ****
  set dummy $CC
  compiler="$2"
  
! echo $ac_n "checking for objdir""... $ac_c" 1>&6
! echo "configure:2957: checking for objdir" >&5
  rm -f .libs 2>/dev/null
  mkdir .libs 2>/dev/null
  if test -d .libs; then
--- 4478,4485 ----
  set dummy $CC
  compiler="$2"
  
! echo "$as_me:$LINENO: checking for objdir" >&5
! echo $ECHO_N "checking for objdir... $ECHO_C" >&6
  rm -f .libs 2>/dev/null
  mkdir .libs 2>/dev/null
  if test -d .libs; then
***************
*** 2963,2969 ****
    objdir=_libs
  fi
  rmdir .libs 2>/dev/null
! echo "$ac_t""$objdir" 1>&6
  
  
  # Check whether --with-pic or --without-pic was given.
--- 4489,4497 ----
    objdir=_libs
  fi
  rmdir .libs 2>/dev/null
! echo "$as_me:$LINENO: result: $objdir" >&5
! echo "${ECHO_T}$objdir" >&6
! 
  
  
  # Check whether --with-pic or --without-pic was given.
***************
*** 2972,2988 ****
    pic_mode="$withval"
  else
    pic_mode=default
! fi
! 
  test -z "$pic_mode" && pic_mode=default
  
  # We assume here that the value for lt_cv_prog_cc_pic will not be cached
  # in isolation, and that seeing it set (from the cache) indicates that
  # the associated values are set (in the cache) correctly too.
! echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
! echo "configure:2984: checking for $compiler option to produce PIC" >&5
! if eval "test \"`echo '$''{'lt_cv_prog_cc_pic'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
     lt_cv_prog_cc_pic=
    lt_cv_prog_cc_shlib=
--- 4500,4515 ----
    pic_mode="$withval"
  else
    pic_mode=default
! fi;
  test -z "$pic_mode" && pic_mode=default
  
  # We assume here that the value for lt_cv_prog_cc_pic will not be cached
  # in isolation, and that seeing it set (from the cache) indicates that
  # the associated values are set (in the cache) correctly too.
! echo "$as_me:$LINENO: checking for $compiler option to produce PIC" >&5
! echo $ECHO_N "checking for $compiler option to produce PIC... $ECHO_C" >&6
! if test "${lt_cv_prog_cc_pic+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
     lt_cv_prog_cc_pic=
    lt_cv_prog_cc_shlib=
***************
*** 3126,3153 ****
  fi
  
  if test -z "$lt_cv_prog_cc_pic"; then
!   echo "$ac_t""none" 1>&6
  else
!   echo "$ac_t""$lt_cv_prog_cc_pic" 1>&6
  
    # Check to make sure the pic_flag actually works.
!   echo $ac_n "checking if $compiler PIC flag $lt_cv_prog_cc_pic works""... $ac_c" 1>&6
! echo "configure:3136: checking if $compiler PIC flag $lt_cv_prog_cc_pic works" >&5
!   if eval "test \"`echo '$''{'lt_cv_prog_cc_pic_works'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
        save_CFLAGS="$CFLAGS"
      CFLAGS="$CFLAGS $lt_cv_prog_cc_pic -DPIC"
!     cat > conftest.$ac_ext <<EOF
! #line 3143 "configure"
  #include "confdefs.h"
  
! int main() {
  
! ; return 0; }
! EOF
! if { (eval echo configure:3150: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
          case $host_os in
        hpux9* | hpux10* | hpux11*)
  	# On HP-UX, both CC and GCC only warn that PIC is supported... then
--- 4653,4702 ----
  fi
  
  if test -z "$lt_cv_prog_cc_pic"; then
!   echo "$as_me:$LINENO: result: none" >&5
! echo "${ECHO_T}none" >&6
  else
!   echo "$as_me:$LINENO: result: $lt_cv_prog_cc_pic" >&5
! echo "${ECHO_T}$lt_cv_prog_cc_pic" >&6
  
    # Check to make sure the pic_flag actually works.
!   echo "$as_me:$LINENO: checking if $compiler PIC flag $lt_cv_prog_cc_pic works" >&5
! echo $ECHO_N "checking if $compiler PIC flag $lt_cv_prog_cc_pic works... $ECHO_C" >&6
!   if test "${lt_cv_prog_cc_pic_works+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
        save_CFLAGS="$CFLAGS"
      CFLAGS="$CFLAGS $lt_cv_prog_cc_pic -DPIC"
!     cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
          case $host_os in
        hpux9* | hpux10* | hpux11*)
  	# On HP-UX, both CC and GCC only warn that PIC is supported... then
***************
*** 3163,3179 ****
  	lt_cv_prog_cc_pic_works=yes
  	;;
        esac
!     
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!         lt_cv_prog_cc_pic_works=no
!     
  fi
! rm -f conftest*
      CFLAGS="$save_CFLAGS"
!   
  fi
  
  
--- 4712,4727 ----
  	lt_cv_prog_cc_pic_works=yes
  	;;
        esac
! 
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
!       lt_cv_prog_cc_pic_works=no
! 
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
      CFLAGS="$save_CFLAGS"
! 
  fi
  
  
***************
*** 3184,3226 ****
      lt_cv_prog_cc_pic=" $lt_cv_prog_cc_pic"
    fi
  
!   echo "$ac_t""$lt_cv_prog_cc_pic_works" 1>&6
  fi
  
  # Check for any special shared library compilation flags.
  if test -n "$lt_cv_prog_cc_shlib"; then
!   echo "configure: warning: \`$CC' requires \`$lt_cv_prog_cc_shlib' to build shared libraries" 1>&2
    if echo "$old_CC $old_CFLAGS " | egrep -e "[ 	]$lt_cv_prog_cc_shlib[ 	]" >/dev/null; then :
    else
!    echo "configure: warning: add \`$lt_cv_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure" 1>&2
      lt_cv_prog_cc_can_build_shared=no
    fi
  fi
  
! echo $ac_n "checking if $compiler static flag $lt_cv_prog_cc_static works""... $ac_c" 1>&6
! echo "configure:3202: checking if $compiler static flag $lt_cv_prog_cc_static works" >&5
! if eval "test \"`echo '$''{'lt_cv_prog_cc_static_works'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
      lt_cv_prog_cc_static_works=no
    save_LDFLAGS="$LDFLAGS"
    LDFLAGS="$LDFLAGS $lt_cv_prog_cc_static"
!   cat > conftest.$ac_ext <<EOF
! #line 3210 "configure"
  #include "confdefs.h"
  
! int main() {
  
! ; return 0; }
! EOF
! if { (eval echo configure:3217: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
    lt_cv_prog_cc_static_works=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
  fi
! rm -f conftest*
    LDFLAGS="$save_LDFLAGS"
  
  fi
--- 4732,4797 ----
      lt_cv_prog_cc_pic=" $lt_cv_prog_cc_pic"
    fi
  
!   echo "$as_me:$LINENO: result: $lt_cv_prog_cc_pic_works" >&5
! echo "${ECHO_T}$lt_cv_prog_cc_pic_works" >&6
  fi
  
  # Check for any special shared library compilation flags.
  if test -n "$lt_cv_prog_cc_shlib"; then
!   { echo "$as_me:$LINENO: WARNING: \`$CC' requires \`$lt_cv_prog_cc_shlib' to build shared libraries" >&5
! echo "$as_me: WARNING: \`$CC' requires \`$lt_cv_prog_cc_shlib' to build shared libraries" >&2;}
    if echo "$old_CC $old_CFLAGS " | egrep -e "[ 	]$lt_cv_prog_cc_shlib[ 	]" >/dev/null; then :
    else
!    { echo "$as_me:$LINENO: WARNING: add \`$lt_cv_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure" >&5
! echo "$as_me: WARNING: add \`$lt_cv_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure" >&2;}
      lt_cv_prog_cc_can_build_shared=no
    fi
  fi
  
! echo "$as_me:$LINENO: checking if $compiler static flag $lt_cv_prog_cc_static works" >&5
! echo $ECHO_N "checking if $compiler static flag $lt_cv_prog_cc_static works... $ECHO_C" >&6
! if test "${lt_cv_prog_cc_static_works+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
      lt_cv_prog_cc_static_works=no
    save_LDFLAGS="$LDFLAGS"
    LDFLAGS="$LDFLAGS $lt_cv_prog_cc_static"
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    lt_cv_prog_cc_static_works=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
    LDFLAGS="$save_LDFLAGS"
  
  fi
***************
*** 3228,3234 ****
  
  # Belt *and* braces to stop my trousers falling down:
  test "X$lt_cv_prog_cc_static_works" = Xno && lt_cv_prog_cc_static=
! echo "$ac_t""$lt_cv_prog_cc_static_works" 1>&6
  
  pic_flag="$lt_cv_prog_cc_pic"
  special_shlib_compile_flags="$lt_cv_prog_cc_shlib"
--- 4799,4806 ----
  
  # Belt *and* braces to stop my trousers falling down:
  test "X$lt_cv_prog_cc_static_works" = Xno && lt_cv_prog_cc_static=
! echo "$as_me:$LINENO: result: $lt_cv_prog_cc_static_works" >&5
! echo "${ECHO_T}$lt_cv_prog_cc_static_works" >&6
  
  pic_flag="$lt_cv_prog_cc_pic"
  special_shlib_compile_flags="$lt_cv_prog_cc_shlib"
***************
*** 3239,3250 ****
  
  
  # Check to see if options -o and -c are simultaneously supported by compiler
! echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
! echo "configure:3244: checking if $compiler supports -c -o file.$ac_objext" >&5
! if eval "test \"`echo '$''{'lt_cv_compiler_c_o'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   
  $rm -r conftest 2>/dev/null
  mkdir conftest
  cd conftest
--- 4811,4822 ----
  
  
  # Check to see if options -o and -c are simultaneously supported by compiler
! echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
! echo $ECHO_N "checking if $compiler supports -c -o file.$ac_objext... $ECHO_C" >&6
! if test "${lt_cv_compiler_c_o+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
! 
  $rm -r conftest 2>/dev/null
  mkdir conftest
  cd conftest
***************
*** 3259,3265 ****
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -o out/conftest2.$ac_objext"
  compiler_c_o=no
! if { (eval echo configure:3263: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>out/conftest.err; } && test -s out/conftest2.$ac_objext; then
    # The compiler can only warn and ignore the option if not recognized
    # So say no if there are warnings
    if test -s out/conftest.err; then
--- 4831,4837 ----
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -o out/conftest2.$ac_objext"
  compiler_c_o=no
! if { (eval echo configure:4834: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>out/conftest.err; } && test -s out/conftest2.$ac_objext; then
    # The compiler can only warn and ignore the option if not recognized
    # So say no if there are warnings
    if test -s out/conftest.err; then
***************
*** 3283,3313 ****
  fi
  
  compiler_c_o=$lt_cv_compiler_c_o
! echo "$ac_t""$compiler_c_o" 1>&6
  
  if test x"$compiler_c_o" = x"yes"; then
    # Check to see if we can write to a .lo
!   echo $ac_n "checking if $compiler supports -c -o file.lo""... $ac_c" 1>&6
! echo "configure:3292: checking if $compiler supports -c -o file.lo" >&5
!   if eval "test \"`echo '$''{'lt_cv_compiler_o_lo'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   
    lt_cv_compiler_o_lo=no
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -c -o conftest.lo"
    save_objext="$ac_objext"
    ac_objext=lo
!   cat > conftest.$ac_ext <<EOF
! #line 3303 "configure"
  #include "confdefs.h"
  
! int main() {
  int some_variable = 0;
! ; return 0; }
! EOF
! if { (eval echo configure:3310: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      if test -s conftest.err; then
--- 4855,4906 ----
  fi
  
  compiler_c_o=$lt_cv_compiler_c_o
! echo "$as_me:$LINENO: result: $compiler_c_o" >&5
! echo "${ECHO_T}$compiler_c_o" >&6
  
  if test x"$compiler_c_o" = x"yes"; then
    # Check to see if we can write to a .lo
!   echo "$as_me:$LINENO: checking if $compiler supports -c -o file.lo" >&5
! echo $ECHO_N "checking if $compiler supports -c -o file.lo... $ECHO_C" >&6
!   if test "${lt_cv_compiler_o_lo+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
! 
    lt_cv_compiler_o_lo=no
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -c -o conftest.lo"
    save_objext="$ac_objext"
    ac_objext=lo
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  int some_variable = 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      if test -s conftest.err; then
***************
*** 3315,3333 ****
      else
        lt_cv_compiler_o_lo=yes
      fi
!   
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
  fi
! rm -f conftest*
    ac_objext="$save_objext"
    CFLAGS="$save_CFLAGS"
!   
  fi
  
    compiler_o_lo=$lt_cv_compiler_o_lo
!   echo "$ac_t""$compiler_o_lo" 1>&6
  else
    compiler_o_lo=no
  fi
--- 4908,4927 ----
      else
        lt_cv_compiler_o_lo=yes
      fi
! 
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
    ac_objext="$save_objext"
    CFLAGS="$save_CFLAGS"
! 
  fi
  
    compiler_o_lo=$lt_cv_compiler_o_lo
!   echo "$as_me:$LINENO: result: $compiler_o_lo" >&5
! echo "${ECHO_T}$compiler_o_lo" >&6
  else
    compiler_o_lo=no
  fi
***************
*** 3336,3352 ****
  hard_links="nottested"
  if test "$compiler_c_o" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
! echo "configure:3341: checking if we can lock with hard links" >&5
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   echo "$ac_t""$hard_links" 1>&6
    if test "$hard_links" = no; then
!     echo "configure: warning: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" 1>&2
      need_locks=warn
    fi
  else
--- 4930,4948 ----
  hard_links="nottested"
  if test "$compiler_c_o" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
!   echo "$as_me:$LINENO: checking if we can lock with hard links" >&5
! echo $ECHO_N "checking if we can lock with hard links... $ECHO_C" >&6
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
    touch conftest.a
    ln conftest.a conftest.b 2>&5 || hard_links=no
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
!   echo "$as_me:$LINENO: result: $hard_links" >&5
! echo "${ECHO_T}$hard_links" >&6
    if test "$hard_links" = no; then
!     { echo "$as_me:$LINENO: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
! echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
      need_locks=warn
    fi
  else
***************
*** 3355,3376 ****
  
  if test "$GCC" = yes; then
    # Check to see if options -fno-rtti -fno-exceptions are supported by compiler
!   echo $ac_n "checking if $compiler supports -fno-rtti -fno-exceptions""... $ac_c" 1>&6
! echo "configure:3360: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
    echo "int some_variable = 0;" > conftest.$ac_ext
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -fno-rtti -fno-exceptions -c conftest.$ac_ext"
    compiler_rtti_exceptions=no
!   cat > conftest.$ac_ext <<EOF
! #line 3366 "configure"
  #include "confdefs.h"
  
! int main() {
  int some_variable = 0;
! ; return 0; }
! EOF
! if { (eval echo configure:3373: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      if test -s conftest.err; then
--- 4951,4992 ----
  
  if test "$GCC" = yes; then
    # Check to see if options -fno-rtti -fno-exceptions are supported by compiler
!   echo "$as_me:$LINENO: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
! echo $ECHO_N "checking if $compiler supports -fno-rtti -fno-exceptions... $ECHO_C" >&6
    echo "int some_variable = 0;" > conftest.$ac_ext
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -fno-rtti -fno-exceptions -c conftest.$ac_ext"
    compiler_rtti_exceptions=no
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  int some_variable = 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      if test -s conftest.err; then
***************
*** 3378,3391 ****
      else
        compiler_rtti_exceptions=yes
      fi
!   
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
  fi
! rm -f conftest*
    CFLAGS="$save_CFLAGS"
!   echo "$ac_t""$compiler_rtti_exceptions" 1>&6
  
    if test "$compiler_rtti_exceptions" = "yes"; then
      no_builtin_flag=' -fno-builtin -fno-rtti -fno-exceptions'
--- 4994,5008 ----
      else
        compiler_rtti_exceptions=yes
      fi
! 
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
    CFLAGS="$save_CFLAGS"
!   echo "$as_me:$LINENO: result: $compiler_rtti_exceptions" >&5
! echo "${ECHO_T}$compiler_rtti_exceptions" >&6
  
    if test "$compiler_rtti_exceptions" = "yes"; then
      no_builtin_flag=' -fno-builtin -fno-rtti -fno-exceptions'
***************
*** 3395,3402 ****
  fi
  
  # See if the linker supports building shared libraries.
! echo $ac_n "checking whether the linker ($LD) supports shared libraries""... $ac_c" 1>&6
! echo "configure:3400: checking whether the linker ($LD) supports shared libraries" >&5
  
  allow_undefined_flag=
  no_undefined_flag=
--- 5012,5019 ----
  fi
  
  # See if the linker supports building shared libraries.
! echo "$as_me:$LINENO: checking whether the linker ($LD) supports shared libraries" >&5
! echo $ECHO_N "checking whether the linker ($LD) supports shared libraries... $ECHO_C" >&6
  
  allow_undefined_flag=
  no_undefined_flag=
***************
*** 4076,4087 ****
      ;;
    esac
  fi
! echo "$ac_t""$ld_shlibs" 1>&6
  test "$ld_shlibs" = no && can_build_shared=no
  
  # Check hardcoding attributes.
! echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
! echo "configure:4085: checking how to hardcode library paths into programs" >&5
  hardcode_action=
  if test -n "$hardcode_libdir_flag_spec" || \
     test -n "$runpath_var"; then
--- 5693,5705 ----
      ;;
    esac
  fi
! echo "$as_me:$LINENO: result: $ld_shlibs" >&5
! echo "${ECHO_T}$ld_shlibs" >&6
  test "$ld_shlibs" = no && can_build_shared=no
  
  # Check hardcoding attributes.
! echo "$as_me:$LINENO: checking how to hardcode library paths into programs" >&5
! echo $ECHO_N "checking how to hardcode library paths into programs... $ECHO_C" >&6
  hardcode_action=
  if test -n "$hardcode_libdir_flag_spec" || \
     test -n "$runpath_var"; then
***************
*** 4104,4129 ****
    # directories.
    hardcode_action=unsupported
  fi
! echo "$ac_t""$hardcode_action" 1>&6
  
  striplib=
  old_striplib=
! echo $ac_n "checking whether stripping libraries is possible""... $ac_c" 1>&6
! echo "configure:4113: checking whether stripping libraries is possible" >&5
  if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
    test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
    test -z "$striplib" && striplib="$STRIP --strip-unneeded"
!   echo "$ac_t""yes" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
  reload_cmds='$LD$reload_flag -o $output$reload_objs'
  test -z "$deplibs_check_method" && deplibs_check_method=unknown
  
  # PORTME Fill in your ld.so characteristics
! echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
! echo "configure:4127: checking dynamic linker characteristics" >&5
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
--- 5722,5750 ----
    # directories.
    hardcode_action=unsupported
  fi
! echo "$as_me:$LINENO: result: $hardcode_action" >&5
! echo "${ECHO_T}$hardcode_action" >&6
  
  striplib=
  old_striplib=
! echo "$as_me:$LINENO: checking whether stripping libraries is possible" >&5
! echo $ECHO_N "checking whether stripping libraries is possible... $ECHO_C" >&6
  if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
    test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
    test -z "$striplib" && striplib="$STRIP --strip-unneeded"
!   echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
  reload_cmds='$LD$reload_flag -o $output$reload_objs'
  test -z "$deplibs_check_method" && deplibs_check_method=unknown
  
  # PORTME Fill in your ld.so characteristics
! echo "$as_me:$LINENO: checking dynamic linker characteristics" >&5
! echo $ECHO_N "checking dynamic linker characteristics... $ECHO_C" >&6
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
***************
*** 4519,4534 ****
    dynamic_linker=no
    ;;
  esac
! echo "$ac_t""$dynamic_linker" 1>&6
  test "$dynamic_linker" = no && can_build_shared=no
  
  # Report the final consequences.
! echo $ac_n "checking if libtool supports shared libraries""... $ac_c" 1>&6
! echo "configure:4528: checking if libtool supports shared libraries" >&5
! echo "$ac_t""$can_build_shared" 1>&6
  
! echo $ac_n "checking whether to build shared libraries""... $ac_c" 1>&6
! echo "configure:4532: checking whether to build shared libraries" >&5
  test "$can_build_shared" = "no" && enable_shared=no
  
  # On AIX, shared libraries and static libraries use the same namespace, and
--- 6140,6157 ----
    dynamic_linker=no
    ;;
  esac
! echo "$as_me:$LINENO: result: $dynamic_linker" >&5
! echo "${ECHO_T}$dynamic_linker" >&6
  test "$dynamic_linker" = no && can_build_shared=no
  
  # Report the final consequences.
! echo "$as_me:$LINENO: checking if libtool supports shared libraries" >&5
! echo $ECHO_N "checking if libtool supports shared libraries... $ECHO_C" >&6
! echo "$as_me:$LINENO: result: $can_build_shared" >&5
! echo "${ECHO_T}$can_build_shared" >&6
  
! echo "$as_me:$LINENO: checking whether to build shared libraries" >&5
! echo $ECHO_N "checking whether to build shared libraries... $ECHO_C" >&6
  test "$can_build_shared" = "no" && enable_shared=no
  
  # On AIX, shared libraries and static libraries use the same namespace, and
***************
*** 4548,4560 ****
    fi
    ;;
  esac
! echo "$ac_t""$enable_shared" 1>&6
  
! echo $ac_n "checking whether to build static libraries""... $ac_c" 1>&6
! echo "configure:4555: checking whether to build static libraries" >&5
  # Make sure either enable_shared or enable_static is yes.
  test "$enable_shared" = yes || enable_static=yes
! echo "$ac_t""$enable_static" 1>&6
  
  if test "$hardcode_action" = relink; then
    # Fast installation is not supported
--- 6171,6185 ----
    fi
    ;;
  esac
! echo "$as_me:$LINENO: result: $enable_shared" >&5
! echo "${ECHO_T}$enable_shared" >&6
  
! echo "$as_me:$LINENO: checking whether to build static libraries" >&5
! echo $ECHO_N "checking whether to build static libraries... $ECHO_C" >&6
  # Make sure either enable_shared or enable_static is yes.
  test "$enable_shared" = yes || enable_static=yes
! echo "$as_me:$LINENO: result: $enable_static" >&5
! echo "${ECHO_T}$enable_static" >&6
  
  if test "$hardcode_action" = relink; then
    # Fast installation is not supported
***************
*** 4591,4855 ****
     ;;
  
    *)
!     echo $ac_n "checking for shl_load""... $ac_c" 1>&6
! echo "configure:4596: checking for shl_load" >&5
! if eval "test \"`echo '$''{'ac_cv_func_shl_load'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 4601 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char shl_load(); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char shl_load();
! 
! int main() {
  
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_shl_load) || defined (__stub___shl_load)
  choke me
  #else
! shl_load();
  #endif
  
! ; return 0; }
! EOF
! if { (eval echo configure:4624: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_func_shl_load=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_func_shl_load=no"
  fi
! rm -f conftest*
  fi
! 
! if eval "test \"`echo '$ac_cv_func_'shl_load`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    lt_cv_dlopen="shl_load"
  else
!   echo "$ac_t""no" 1>&6
! echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
! echo "configure:4642: checking for shl_load in -ldld" >&5
! ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ldld  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 4650 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char shl_load();
! 
! int main() {
! shl_load()
! ; return 0; }
! EOF
! if { (eval echo configure:4661: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-dld"
  else
!   echo "$ac_t""no" 1>&6
! echo $ac_n "checking for dlopen""... $ac_c" 1>&6
! echo "configure:4680: checking for dlopen" >&5
! if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 4685 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char dlopen(); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char dlopen();
! 
! int main() {
  
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_dlopen) || defined (__stub___dlopen)
  choke me
  #else
! dlopen();
  #endif
  
! ; return 0; }
! EOF
! if { (eval echo configure:4708: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_func_dlopen=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_func_dlopen=no"
  fi
! rm -f conftest*
  fi
! 
! if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    lt_cv_dlopen="dlopen"
  else
!   echo "$ac_t""no" 1>&6
! echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
! echo "configure:4726: checking for dlopen in -ldl" >&5
! ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ldl  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 4734 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char dlopen();
! 
! int main() {
! dlopen()
! ; return 0; }
! EOF
! if { (eval echo configure:4745: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
  else
!   echo "$ac_t""no" 1>&6
! echo $ac_n "checking for dlopen in -lsvld""... $ac_c" 1>&6
! echo "configure:4764: checking for dlopen in -lsvld" >&5
! ac_lib_var=`echo svld'_'dlopen | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lsvld  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 4772 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char dlopen();
! 
! int main() {
! dlopen()
! ; return 0; }
! EOF
! if { (eval echo configure:4783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
  else
!   echo "$ac_t""no" 1>&6
! echo $ac_n "checking for dld_link in -ldld""... $ac_c" 1>&6
! echo "configure:4802: checking for dld_link in -ldld" >&5
! ac_lib_var=`echo dld'_'dld_link | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ldld  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 4810 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char dld_link();
! 
! int main() {
! dld_link()
! ; return 0; }
! EOF
! if { (eval echo configure:4821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-dld"
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! 	      
  fi
  
! 	    
  fi
  
! 	  
  fi
  
! 	
  fi
  
!       
  fi
  
      ;;
--- 6216,6601 ----
     ;;
  
    *)
!     echo "$as_me:$LINENO: checking for shl_load" >&5
! echo $ECHO_N "checking for shl_load... $ECHO_C" >&6
! if test "${ac_cv_func_shl_load+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char shl_load (); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char shl_load ();
! char (*f) ();
  
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_shl_load) || defined (__stub___shl_load)
  choke me
  #else
! f = shl_load;
  #endif
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_func_shl_load=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_func_shl_load=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_func_shl_load" >&5
! echo "${ECHO_T}$ac_cv_func_shl_load" >&6
! if test $ac_cv_func_shl_load = yes; then
    lt_cv_dlopen="shl_load"
  else
!   echo "$as_me:$LINENO: checking for shl_load in -ldld" >&5
! echo $ECHO_N "checking for shl_load in -ldld... $ECHO_C" >&6
! if test "${ac_cv_lib_dld_shl_load+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldld  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char shl_load ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! shl_load ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_dld_shl_load=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_dld_shl_load=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_dld_shl_load" >&5
! echo "${ECHO_T}$ac_cv_lib_dld_shl_load" >&6
! if test $ac_cv_lib_dld_shl_load = yes; then
    lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-dld"
  else
!   echo "$as_me:$LINENO: checking for dlopen" >&5
! echo $ECHO_N "checking for dlopen... $ECHO_C" >&6
! if test "${ac_cv_func_dlopen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char dlopen (); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char dlopen ();
! char (*f) ();
  
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_dlopen) || defined (__stub___dlopen)
  choke me
  #else
! f = dlopen;
  #endif
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_func_dlopen=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_func_dlopen=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_func_dlopen" >&5
! echo "${ECHO_T}$ac_cv_func_dlopen" >&6
! if test $ac_cv_func_dlopen = yes; then
    lt_cv_dlopen="dlopen"
  else
!   echo "$as_me:$LINENO: checking for dlopen in -ldl" >&5
! echo $ECHO_N "checking for dlopen in -ldl... $ECHO_C" >&6
! if test "${ac_cv_lib_dl_dlopen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char dlopen ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! dlopen ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_dl_dlopen=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_dl_dlopen=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen" >&5
! echo "${ECHO_T}$ac_cv_lib_dl_dlopen" >&6
! if test $ac_cv_lib_dl_dlopen = yes; then
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
  else
!   echo "$as_me:$LINENO: checking for dlopen in -lsvld" >&5
! echo $ECHO_N "checking for dlopen in -lsvld... $ECHO_C" >&6
! if test "${ac_cv_lib_svld_dlopen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsvld  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char dlopen ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! dlopen ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_svld_dlopen=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_svld_dlopen=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_svld_dlopen" >&5
! echo "${ECHO_T}$ac_cv_lib_svld_dlopen" >&6
! if test $ac_cv_lib_svld_dlopen = yes; then
    lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
  else
!   echo "$as_me:$LINENO: checking for dld_link in -ldld" >&5
! echo $ECHO_N "checking for dld_link in -ldld... $ECHO_C" >&6
! if test "${ac_cv_lib_dld_dld_link+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldld  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char dld_link ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! dld_link ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_dld_dld_link=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_dld_dld_link=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_dld_dld_link" >&5
! echo "${ECHO_T}$ac_cv_lib_dld_dld_link" >&6
! if test $ac_cv_lib_dld_dld_link = yes; then
    lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-dld"
  fi
  
! 
  fi
  
! 
  fi
  
! 
  fi
  
! 
  fi
  
! 
  fi
  
      ;;
***************
*** 4872,4881 ****
      save_LIBS="$LIBS"
      LIBS="$lt_cv_dlopen_libs $LIBS"
  
!     echo $ac_n "checking whether a program can dlopen itself""... $ac_c" 1>&6
! echo "configure:4877: checking whether a program can dlopen itself" >&5
! if eval "test \"`echo '$''{'lt_cv_dlopen_self'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self=cross
--- 6618,6627 ----
      save_LIBS="$LIBS"
      LIBS="$lt_cv_dlopen_libs $LIBS"
  
!     echo "$as_me:$LINENO: checking whether a program can dlopen itself" >&5
! echo $ECHO_N "checking whether a program can dlopen itself... $ECHO_C" >&6
! if test "${lt_cv_dlopen_self+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self=cross
***************
*** 4883,4889 ****
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 4887 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 6629,6635 ----
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 6632 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 4944,4950 ****
      exit (status);
  }
  EOF
!   if { (eval echo configure:4948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
--- 6690,6700 ----
      exit (status);
  }
  EOF
!   if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
***************
*** 4959,4975 ****
  fi
  rm -fr conftest*
  
-     
- fi
  
! echo "$ac_t""$lt_cv_dlopen_self" 1>&6
  
      if test "x$lt_cv_dlopen_self" = xyes; then
        LDFLAGS="$LDFLAGS $link_static_flag"
!       echo $ac_n "checking whether a statically linked program can dlopen itself""... $ac_c" 1>&6
! echo "configure:4971: checking whether a statically linked program can dlopen itself" >&5
! if eval "test \"`echo '$''{'lt_cv_dlopen_self_static'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self_static=cross
--- 6709,6725 ----
  fi
  rm -fr conftest*
  
  
! fi
! echo "$as_me:$LINENO: result: $lt_cv_dlopen_self" >&5
! echo "${ECHO_T}$lt_cv_dlopen_self" >&6
  
      if test "x$lt_cv_dlopen_self" = xyes; then
        LDFLAGS="$LDFLAGS $link_static_flag"
!       echo "$as_me:$LINENO: checking whether a statically linked program can dlopen itself" >&5
! echo $ECHO_N "checking whether a statically linked program can dlopen itself... $ECHO_C" >&6
! if test "${lt_cv_dlopen_self_static+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    	  if test "$cross_compiling" = yes; then :
    lt_cv_dlopen_self_static=cross
***************
*** 4977,4983 ****
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 4981 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 6727,6733 ----
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 6730 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 5038,5044 ****
      exit (status);
  }
  EOF
!   if { (eval echo configure:5042: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
--- 6788,6798 ----
      exit (status);
  }
  EOF
!   if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
***************
*** 5053,5062 ****
  fi
  rm -fr conftest*
  
-       
- fi
  
! echo "$ac_t""$lt_cv_dlopen_self_static" 1>&6
      fi
  
      CPPFLAGS="$save_CPPFLAGS"
--- 6807,6816 ----
  fi
  rm -fr conftest*
  
  
! fi
! echo "$as_me:$LINENO: result: $lt_cv_dlopen_self_static" >&5
! echo "${ECHO_T}$lt_cv_dlopen_self_static" >&6
      fi
  
      CPPFLAGS="$save_CPPFLAGS"
***************
*** 5086,5100 ****
      # Test whether the compiler implicitly links with -lc since on some
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
!     echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
! echo "configure:5091: checking whether -lc should be explicitly linked in" >&5
!     if eval "test \"`echo '$''{'lt_cv_archive_cmds_need_lc'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    $rm conftest*
      echo 'static int dummy;' > conftest.$ac_ext
  
!     if { (eval echo configure:5098: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
--- 6840,6858 ----
      # Test whether the compiler implicitly links with -lc since on some
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
!     echo "$as_me:$LINENO: checking whether -lc should be explicitly linked in" >&5
! echo $ECHO_N "checking whether -lc should be explicitly linked in... $ECHO_C" >&6
!     if test "${lt_cv_archive_cmds_need_lc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    $rm conftest*
      echo 'static int dummy;' > conftest.$ac_ext
  
!     if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
***************
*** 5107,5113 ****
        libname=conftest
        save_allow_undefined_flag=$allow_undefined_flag
        allow_undefined_flag=
!       if { (eval echo configure:5111: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
        then
  	lt_cv_archive_cmds_need_lc=no
        else
--- 6865,6875 ----
        libname=conftest
        save_allow_undefined_flag=$allow_undefined_flag
        allow_undefined_flag=
!       if { (eval echo "$as_me:$LINENO: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\"") >&5
!   (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }
        then
  	lt_cv_archive_cmds_need_lc=no
        else
***************
*** 5119,5125 ****
      fi
  fi
  
!     echo "$ac_t""$lt_cv_archive_cmds_need_lc" 1>&6
      ;;
    esac
  fi
--- 6881,6888 ----
      fi
  fi
  
!     echo "$as_me:$LINENO: result: $lt_cv_archive_cmds_need_lc" >&5
! echo "${ECHO_T}$lt_cv_archive_cmds_need_lc" >&6
      ;;
    esac
  fi
***************
*** 5691,6584 ****
  
  		test "x$PERL" = x && # Extract the first word of "perl$EXEEXT", so it can be a program name with args.
  set dummy perl$EXEEXT; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:5696: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_path_PERL'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   case "$PERL" in
!   /*)
    ac_cv_path_PERL="$PERL" # Let the user override the test with a path.
    ;;
-   ?:/*)			 
-   ac_cv_path_PERL="$PERL" # Let the user override the test with a dos path.
-   ;;
    *)
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do 
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_path_PERL="$ac_dir/$ac_word"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
    test -z "$ac_cv_path_PERL" && ac_cv_path_PERL="perl$EXEEXT"
    ;;
  esac
  fi
! PERL="$ac_cv_path_PERL"
  if test -n "$PERL"; then
!   echo "$ac_t""$PERL" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! 	test "x$PERL" = x && { echo "configure: error: no acceptable Perl found in \$PATH" 1>&2; exit 1; }
  
  
  test x$GREP = x && # Extract the first word of "grep$EXEEXT", so it can be a program name with args.
  set dummy grep$EXEEXT; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:5735: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_path_GREP'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   case "$GREP" in
!   /*)
    ac_cv_path_GREP="$GREP" # Let the user override the test with a path.
    ;;
-   ?:/*)			 
-   ac_cv_path_GREP="$GREP" # Let the user override the test with a dos path.
-   ;;
    *)
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do 
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_path_GREP="$ac_dir/$ac_word"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
    test -z "$ac_cv_path_GREP" && ac_cv_path_GREP="grep$EXEEXT"
    ;;
  esac
  fi
! GREP="$ac_cv_path_GREP"
  if test -n "$GREP"; then
!   echo "$ac_t""$GREP" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! test x$GREP = x && { echo "configure: error: no acceptable grep found in \$PATH" 1>&2; exit 1; }
  
  
  test x$PS = x && # Extract the first word of "ps$EXEEXT", so it can be a program name with args.
  set dummy ps$EXEEXT; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:5774: checking for $ac_word" >&5
! if eval "test \"`echo '$''{'ac_cv_path_PS'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   case "$PS" in
!   /*)
    ac_cv_path_PS="$PS" # Let the user override the test with a path.
    ;;
-   ?:/*)			 
-   ac_cv_path_PS="$PS" # Let the user override the test with a dos path.
-   ;;
    *)
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
!   ac_dummy="$PATH"
!   for ac_dir in $ac_dummy; do 
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_path_PS="$ac_dir/$ac_word"
!       break
!     fi
!   done
!   IFS="$ac_save_ifs"
    test -z "$ac_cv_path_PS" && ac_cv_path_PS="ps$EXEEXT"
    ;;
  esac
  fi
! PS="$ac_cv_path_PS"
  if test -n "$PS"; then
!   echo "$ac_t""$PS" 1>&6
  else
!   echo "$ac_t""no" 1>&6
  fi
  
! test x$PS = x && { echo "configure: error: no acceptable ps found in \$PATH" 1>&2; exit 1; }
  
  
  
! echo $ac_n "checking for main in -labs""... $ac_c" 1>&6
! echo "configure:5812: checking for main in -labs" >&5
! ac_lib_var=`echo abs'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-labs  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 5820 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:5827: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo abs | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-labs $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -laudit""... $ac_c" 1>&6
! echo "configure:5855: checking for main in -laudit" >&5
! ac_lib_var=`echo audit'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-laudit  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 5863 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:5870: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo audit | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-laudit $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lauth""... $ac_c" 1>&6
! echo "configure:5898: checking for main in -lauth" >&5
! ac_lib_var=`echo auth'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lauth  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 5906 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:5913: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo auth | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lauth $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lcmd""... $ac_c" 1>&6
! echo "configure:5941: checking for main in -lcmd" >&5
! ac_lib_var=`echo cmd'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lcmd  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 5949 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:5956: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo cmd | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lcmd $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lcrypt""... $ac_c" 1>&6
! echo "configure:5984: checking for main in -lcrypt" >&5
! ac_lib_var=`echo crypt'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lcrypt  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 5992 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:5999: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo crypt | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lcrypt $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -ld""... $ac_c" 1>&6
! echo "configure:6027: checking for main in -ld" >&5
! ac_lib_var=`echo d'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ld  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6035 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6042: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo d | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-ld $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -ldl""... $ac_c" 1>&6
! echo "configure:6070: checking for main in -ldl" >&5
! ac_lib_var=`echo dl'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ldl  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6078 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6085: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo dl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-ldl $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lkauth""... $ac_c" 1>&6
! echo "configure:6113: checking for main in -lkauth" >&5
! ac_lib_var=`echo kauth'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lkauth  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6121 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6128: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo kauth | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lkauth $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lkrb""... $ac_c" 1>&6
! echo "configure:6156: checking for main in -lkrb" >&5
! ac_lib_var=`echo krb'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lkrb  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6164 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6171: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo krb | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lkrb $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -llwp""... $ac_c" 1>&6
! echo "configure:6199: checking for main in -llwp" >&5
! ac_lib_var=`echo lwp'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-llwp  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6207 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6214: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo lwp | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-llwp $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -ln""... $ac_c" 1>&6
! echo "configure:6242: checking for main in -ln" >&5
! ac_lib_var=`echo n'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ln  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6250 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6257: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo n | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-ln $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lnsl""... $ac_c" 1>&6
! echo "configure:6285: checking for main in -lnsl" >&5
! ac_lib_var=`echo nsl'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lnsl  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6293 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6300: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo nsl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lnsl $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lprot""... $ac_c" 1>&6
! echo "configure:6328: checking for main in -lprot" >&5
! ac_lib_var=`echo prot'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lprot  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6336 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo prot | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lprot $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lrx""... $ac_c" 1>&6
! echo "configure:6371: checking for main in -lrx" >&5
! ac_lib_var=`echo rx'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lrx  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6379 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6386: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo rx | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lrx $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lrxkad""... $ac_c" 1>&6
! echo "configure:6414: checking for main in -lrxkad" >&5
! ac_lib_var=`echo rxkad'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lrxkad  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6422 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6429: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo rxkad | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lrxkad $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lsocket""... $ac_c" 1>&6
! echo "configure:6457: checking for main in -lsocket" >&5
! ac_lib_var=`echo socket'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lsocket  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6465 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo socket | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lsocket $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lsys""... $ac_c" 1>&6
! echo "configure:6500: checking for main in -lsys" >&5
! ac_lib_var=`echo sys'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lsys  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6508 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo sys | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lsys $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! echo $ac_n "checking for main in -lubik""... $ac_c" 1>&6
! echo "configure:6543: checking for main in -lubik" >&5
! ac_lib_var=`echo ubik'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lubik  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6551 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:6558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo ubik | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lubik $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
  
--- 7454,8653 ----
  
  		test "x$PERL" = x && # Extract the first word of "perl$EXEEXT", so it can be a program name with args.
  set dummy perl$EXEEXT; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_path_PERL+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   case $PERL in
!   [\\/]* | ?:[\\/]*)
    ac_cv_path_PERL="$PERL" # Let the user override the test with a path.
    ;;
    *)
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_path_PERL="$as_dir/$ac_word$ac_exec_ext"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
    test -z "$ac_cv_path_PERL" && ac_cv_path_PERL="perl$EXEEXT"
    ;;
  esac
  fi
! PERL=$ac_cv_path_PERL
! 
  if test -n "$PERL"; then
!   echo "$as_me:$LINENO: result: $PERL" >&5
! echo "${ECHO_T}$PERL" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
! 	test "x$PERL" = x && { { echo "$as_me:$LINENO: error: no acceptable Perl found in \$PATH" >&5
! echo "$as_me: error: no acceptable Perl found in \$PATH" >&2;}
!    { (exit 1); exit 1; }; }
  
  
  test x$GREP = x && # Extract the first word of "grep$EXEEXT", so it can be a program name with args.
  set dummy grep$EXEEXT; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_path_GREP+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   case $GREP in
!   [\\/]* | ?:[\\/]*)
    ac_cv_path_GREP="$GREP" # Let the user override the test with a path.
    ;;
    *)
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_path_GREP="$as_dir/$ac_word$ac_exec_ext"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
    test -z "$ac_cv_path_GREP" && ac_cv_path_GREP="grep$EXEEXT"
    ;;
  esac
  fi
! GREP=$ac_cv_path_GREP
! 
  if test -n "$GREP"; then
!   echo "$as_me:$LINENO: result: $GREP" >&5
! echo "${ECHO_T}$GREP" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
! test x$GREP = x && { { echo "$as_me:$LINENO: error: no acceptable grep found in \$PATH" >&5
! echo "$as_me: error: no acceptable grep found in \$PATH" >&2;}
!    { (exit 1); exit 1; }; }
  
  
  test x$PS = x && # Extract the first word of "ps$EXEEXT", so it can be a program name with args.
  set dummy ps$EXEEXT; ac_word=$2
! echo "$as_me:$LINENO: checking for $ac_word" >&5
! echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
! if test "${ac_cv_path_PS+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   case $PS in
!   [\\/]* | ?:[\\/]*)
    ac_cv_path_PS="$PS" # Let the user override the test with a path.
    ;;
    *)
!   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
! do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   for ac_exec_ext in '' $ac_executable_extensions; do
!   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
!     ac_cv_path_PS="$as_dir/$ac_word$ac_exec_ext"
!     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
!     break 2
!   fi
! done
! done
! 
    test -z "$ac_cv_path_PS" && ac_cv_path_PS="ps$EXEEXT"
    ;;
  esac
  fi
! PS=$ac_cv_path_PS
! 
  if test -n "$PS"; then
!   echo "$as_me:$LINENO: result: $PS" >&5
! echo "${ECHO_T}$PS" >&6
  else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  fi
  
! test x$PS = x && { { echo "$as_me:$LINENO: error: no acceptable ps found in \$PATH" >&5
! echo "$as_me: error: no acceptable ps found in \$PATH" >&2;}
!    { (exit 1); exit 1; }; }
  
  
  
! 
! echo "$as_me:$LINENO: checking for main in -labs" >&5
! echo $ECHO_N "checking for main in -labs... $ECHO_C" >&6
! if test "${ac_cv_lib_abs_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-labs  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_abs_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_abs_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_abs_main" >&5
! echo "${ECHO_T}$ac_cv_lib_abs_main" >&6
! if test $ac_cv_lib_abs_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBABS 1
! _ACEOF
  
    LIBS="-labs $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -laudit" >&5
! echo $ECHO_N "checking for main in -laudit... $ECHO_C" >&6
! if test "${ac_cv_lib_audit_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-laudit  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_audit_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_audit_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_audit_main" >&5
! echo "${ECHO_T}$ac_cv_lib_audit_main" >&6
! if test $ac_cv_lib_audit_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBAUDIT 1
! _ACEOF
  
    LIBS="-laudit $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lauth" >&5
! echo $ECHO_N "checking for main in -lauth... $ECHO_C" >&6
! if test "${ac_cv_lib_auth_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lauth  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_auth_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_auth_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_auth_main" >&5
! echo "${ECHO_T}$ac_cv_lib_auth_main" >&6
! if test $ac_cv_lib_auth_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBAUTH 1
! _ACEOF
  
    LIBS="-lauth $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lcmd" >&5
! echo $ECHO_N "checking for main in -lcmd... $ECHO_C" >&6
! if test "${ac_cv_lib_cmd_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lcmd  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_cmd_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_cmd_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_cmd_main" >&5
! echo "${ECHO_T}$ac_cv_lib_cmd_main" >&6
! if test $ac_cv_lib_cmd_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBCMD 1
! _ACEOF
  
    LIBS="-lcmd $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lcrypt" >&5
! echo $ECHO_N "checking for main in -lcrypt... $ECHO_C" >&6
! if test "${ac_cv_lib_crypt_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lcrypt  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_crypt_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_crypt_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_crypt_main" >&5
! echo "${ECHO_T}$ac_cv_lib_crypt_main" >&6
! if test $ac_cv_lib_crypt_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBCRYPT 1
! _ACEOF
  
    LIBS="-lcrypt $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -ld" >&5
! echo $ECHO_N "checking for main in -ld... $ECHO_C" >&6
! if test "${ac_cv_lib_d_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ld  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_d_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_d_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_d_main" >&5
! echo "${ECHO_T}$ac_cv_lib_d_main" >&6
! if test $ac_cv_lib_d_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBD 1
! _ACEOF
  
    LIBS="-ld $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -ldl" >&5
! echo $ECHO_N "checking for main in -ldl... $ECHO_C" >&6
! if test "${ac_cv_lib_dl_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_dl_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_dl_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_dl_main" >&5
! echo "${ECHO_T}$ac_cv_lib_dl_main" >&6
! if test $ac_cv_lib_dl_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBDL 1
! _ACEOF
  
    LIBS="-ldl $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lkauth" >&5
! echo $ECHO_N "checking for main in -lkauth... $ECHO_C" >&6
! if test "${ac_cv_lib_kauth_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lkauth  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_kauth_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_kauth_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_kauth_main" >&5
! echo "${ECHO_T}$ac_cv_lib_kauth_main" >&6
! if test $ac_cv_lib_kauth_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBKAUTH 1
! _ACEOF
  
    LIBS="-lkauth $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lkrb" >&5
! echo $ECHO_N "checking for main in -lkrb... $ECHO_C" >&6
! if test "${ac_cv_lib_krb_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lkrb  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_krb_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_krb_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_krb_main" >&5
! echo "${ECHO_T}$ac_cv_lib_krb_main" >&6
! if test $ac_cv_lib_krb_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBKRB 1
! _ACEOF
  
    LIBS="-lkrb $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -llwp" >&5
! echo $ECHO_N "checking for main in -llwp... $ECHO_C" >&6
! if test "${ac_cv_lib_lwp_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-llwp  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_lwp_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_lwp_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_lwp_main" >&5
! echo "${ECHO_T}$ac_cv_lib_lwp_main" >&6
! if test $ac_cv_lib_lwp_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBLWP 1
! _ACEOF
  
    LIBS="-llwp $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -ln" >&5
! echo $ECHO_N "checking for main in -ln... $ECHO_C" >&6
! if test "${ac_cv_lib_n_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ln  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_n_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_n_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_n_main" >&5
! echo "${ECHO_T}$ac_cv_lib_n_main" >&6
! if test $ac_cv_lib_n_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBN 1
! _ACEOF
  
    LIBS="-ln $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lnsl" >&5
! echo $ECHO_N "checking for main in -lnsl... $ECHO_C" >&6
! if test "${ac_cv_lib_nsl_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lnsl  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_nsl_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_nsl_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_main" >&5
! echo "${ECHO_T}$ac_cv_lib_nsl_main" >&6
! if test $ac_cv_lib_nsl_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBNSL 1
! _ACEOF
  
    LIBS="-lnsl $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lprot" >&5
! echo $ECHO_N "checking for main in -lprot... $ECHO_C" >&6
! if test "${ac_cv_lib_prot_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lprot  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_prot_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_prot_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_prot_main" >&5
! echo "${ECHO_T}$ac_cv_lib_prot_main" >&6
! if test $ac_cv_lib_prot_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBPROT 1
! _ACEOF
  
    LIBS="-lprot $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lrx" >&5
! echo $ECHO_N "checking for main in -lrx... $ECHO_C" >&6
! if test "${ac_cv_lib_rx_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lrx  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_rx_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_rx_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_rx_main" >&5
! echo "${ECHO_T}$ac_cv_lib_rx_main" >&6
! if test $ac_cv_lib_rx_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBRX 1
! _ACEOF
  
    LIBS="-lrx $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lrxkad" >&5
! echo $ECHO_N "checking for main in -lrxkad... $ECHO_C" >&6
! if test "${ac_cv_lib_rxkad_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lrxkad  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_rxkad_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_rxkad_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_rxkad_main" >&5
! echo "${ECHO_T}$ac_cv_lib_rxkad_main" >&6
! if test $ac_cv_lib_rxkad_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBRXKAD 1
! _ACEOF
  
    LIBS="-lrxkad $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lsocket" >&5
! echo $ECHO_N "checking for main in -lsocket... $ECHO_C" >&6
! if test "${ac_cv_lib_socket_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsocket  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_socket_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_socket_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_socket_main" >&5
! echo "${ECHO_T}$ac_cv_lib_socket_main" >&6
! if test $ac_cv_lib_socket_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBSOCKET 1
! _ACEOF
  
    LIBS="-lsocket $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lsys" >&5
! echo $ECHO_N "checking for main in -lsys... $ECHO_C" >&6
! if test "${ac_cv_lib_sys_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsys  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_sys_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_sys_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_sys_main" >&5
! echo "${ECHO_T}$ac_cv_lib_sys_main" >&6
! if test $ac_cv_lib_sys_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBSYS 1
! _ACEOF
  
    LIBS="-lsys $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -lubik" >&5
! echo $ECHO_N "checking for main in -lubik... $ECHO_C" >&6
! if test "${ac_cv_lib_ubik_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lubik  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_ubik_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_ubik_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_ubik_main" >&5
! echo "${ECHO_T}$ac_cv_lib_ubik_main" >&6
! if test $ac_cv_lib_ubik_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBUBIK 1
! _ACEOF
  
    LIBS="-lubik $LIBS"
  
  fi
  
  
***************
*** 6588,6814 ****
  # Check for XPG4 access() function
  # Be sure to test before adding AFS libs in LIBS path as AFS lib
  # has such a function that works only on AFS filesystems.
  for ac_func in access
  do
! echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
! echo "configure:6595: checking for $ac_func" >&5
! if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 6600 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func(); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char $ac_func();
! 
! int main() {
  
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
  choke me
  #else
! $ac_func();
  #endif
  
! ; return 0; }
! EOF
! if { (eval echo configure:6623: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_func_$ac_func=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_func_$ac_func=no"
  fi
! rm -f conftest*
  fi
  
- if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-   cat >> confdefs.h <<EOF
- #define $ac_tr_func 1
- EOF
-  
- else
-   echo "$ac_t""no" 1>&6
  fi
  done
  
  
  ac_header_dirent=no
! for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
! do
! ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
! echo "configure:6653: checking for $ac_hdr that defines DIR" >&5
! if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 6658 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <$ac_hdr>
! int main() {
! DIR *dirp = 0;
! ; return 0; }
! EOF
! if { (eval echo configure:6666: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
!   eval "ac_cv_header_dirent_$ac_safe=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_dirent_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_hdr 1
! EOF
!  ac_header_dirent=$ac_hdr; break
! else
!   echo "$ac_t""no" 1>&6
  fi
  done
  # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
  if test $ac_header_dirent = dirent.h; then
! echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
! echo "configure:6691: checking for opendir in -ldir" >&5
! ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
! LIBS="-ldir  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6699 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char opendir();
! 
! int main() {
! opendir()
! ; return 0; }
! EOF
! if { (eval echo configure:6710: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
  
! fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   LIBS="$LIBS -ldir"
  else
!   echo "$ac_t""no" 1>&6
  fi
  
  else
! echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
! echo "configure:6732: checking for opendir in -lx" >&5
! ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
! LIBS="-lx  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 6740 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char opendir();
! 
! int main() {
! opendir()
! ; return 0; }
! EOF
! if { (eval echo configure:6751: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
  
! fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   LIBS="$LIBS -lx"
  else
!   echo "$ac_t""no" 1>&6
  fi
  
  fi
  
! echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
! echo "configure:6774: checking for ANSI C header files" >&5
! if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 6779 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  #include <stdarg.h>
  #include <string.h>
  #include <float.h>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:6787: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
    ac_cv_header_stdc=yes
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
    cat conftest.$ac_ext >&5
-   rm -rf conftest*
    ac_cv_header_stdc=no
  fi
! rm -f conftest*
  
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
! cat > conftest.$ac_ext <<EOF
! #line 6804 "configure"
  #include "confdefs.h"
  #include <string.h>
! EOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "memchr" >/dev/null 2>&1; then
    :
  else
-   rm -rf conftest*
    ac_cv_header_stdc=no
  fi
  rm -f conftest*
--- 8657,9076 ----
  # Check for XPG4 access() function
  # Be sure to test before adding AFS libs in LIBS path as AFS lib
  # has such a function that works only on AFS filesystems.
+ 
  for ac_func in access
  do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
! if eval "test \"\${$as_ac_var+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char $ac_func ();
! char (*f) ();
  
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
  choke me
  #else
! f = $ac_func;
  #endif
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   eval "$as_ac_var=yes"
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! eval "$as_ac_var=no"
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
  fi
+ echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+ echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+ if test `eval echo '${'$as_ac_var'}'` = yes; then
+   cat >>confdefs.h <<_ACEOF
+ #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+ _ACEOF
  
  fi
  done
  
  
+ 
+ 
+ 
+ 
+ 
  ac_header_dirent=no
! for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h; do
!   as_ac_Header=`echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
! echo "$as_me:$LINENO: checking for $ac_hdr that defines DIR" >&5
! echo $ECHO_N "checking for $ac_hdr that defines DIR... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <$ac_hdr>
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! if ((DIR *) 0)
! return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   eval "$as_ac_Header=yes"
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! eval "$as_ac_Header=no"
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
! _ACEOF
! 
! ac_header_dirent=$ac_hdr; break
  fi
+ 
  done
  # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
  if test $ac_header_dirent = dirent.h; then
!   echo "$as_me:$LINENO: checking for library containing opendir" >&5
! echo $ECHO_N "checking for library containing opendir... $ECHO_C" >&6
! if test "${ac_cv_search_opendir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_func_search_save_LIBS=$LIBS
! ac_cv_search_opendir=no
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char opendir ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! opendir ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_search_opendir="none required"
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! if test "$ac_cv_search_opendir" = no; then
!   for ac_lib in dir; do
!     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
!     cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
  
! /* Override any gcc2 internal prototype to avoid an error.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char opendir ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! opendir ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_search_opendir="-l$ac_lib"
! break
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
!   done
! fi
! LIBS=$ac_func_search_save_LIBS
! fi
! echo "$as_me:$LINENO: result: $ac_cv_search_opendir" >&5
! echo "${ECHO_T}$ac_cv_search_opendir" >&6
! if test "$ac_cv_search_opendir" != no; then
!   test "$ac_cv_search_opendir" = "none required" || LIBS="$ac_cv_search_opendir $LIBS"
! 
  fi
  
  else
!   echo "$as_me:$LINENO: checking for library containing opendir" >&5
! echo $ECHO_N "checking for library containing opendir... $ECHO_C" >&6
! if test "${ac_cv_search_opendir+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_func_search_save_LIBS=$LIBS
! ac_cv_search_opendir=no
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char opendir ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! opendir ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_search_opendir="none required"
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! if test "$ac_cv_search_opendir" = no; then
!   for ac_lib in x; do
!     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
!     cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
  
! /* Override any gcc2 internal prototype to avoid an error.  */
! #ifdef __cplusplus
! extern "C"
! #endif
! /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char opendir ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! opendir ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_search_opendir="-l$ac_lib"
! break
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
!   done
! fi
! LIBS=$ac_func_search_save_LIBS
  fi
+ echo "$as_me:$LINENO: result: $ac_cv_search_opendir" >&5
+ echo "${ECHO_T}$ac_cv_search_opendir" >&6
+ if test "$ac_cv_search_opendir" != no; then
+   test "$ac_cv_search_opendir" = "none required" || LIBS="$ac_cv_search_opendir $LIBS"
  
  fi
  
! fi
! 
! echo "$as_me:$LINENO: checking for ANSI C header files" >&5
! echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
! if test "${ac_cv_header_stdc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  #include <stdarg.h>
  #include <string.h>
  #include <float.h>
! 
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
    ac_cv_header_stdc=yes
  else
!   echo "$as_me: failed program was:" >&5
    cat conftest.$ac_ext >&5
    ac_cv_header_stdc=no
  fi
! rm -f conftest.err conftest.$ac_ext
  
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <string.h>
! 
! _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "memchr" >/dev/null 2>&1; then
    :
  else
    ac_cv_header_stdc=no
  fi
  rm -f conftest*
***************
*** 6817,6832 ****
  
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
! cat > conftest.$ac_ext <<EOF
! #line 6822 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
! EOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "free" >/dev/null 2>&1; then
    :
  else
-   rm -rf conftest*
    ac_cv_header_stdc=no
  fi
  rm -f conftest*
--- 9079,9094 ----
  
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <stdlib.h>
! 
! _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "free" >/dev/null 2>&1; then
    :
  else
    ac_cv_header_stdc=no
  fi
  rm -f conftest*
***************
*** 6835,7400 ****
  
  if test $ac_cv_header_stdc = yes; then
    # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
! if test "$cross_compiling" = yes; then
    :
  else
!   cat > conftest.$ac_ext <<EOF
! #line 6843 "configure"
  #include "confdefs.h"
  #include <ctype.h>
! #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
! #define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
! #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
! int main () { int i; for (i = 0; i < 256; i++)
! if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
! exit (0); }
  
! EOF
! if { (eval echo configure:6854: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
! then
    :
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -fr conftest*
!   ac_cv_header_stdc=no
  fi
! rm -fr conftest*
  fi
- 
  fi
  fi
! 
! echo "$ac_t""$ac_cv_header_stdc" 1>&6
  if test $ac_cv_header_stdc = yes; then
!   cat >> confdefs.h <<\EOF
  #define STDC_HEADERS 1
! EOF
  
  fi
  
! echo $ac_n "checking for sys/wait.h that is POSIX.1 compatible""... $ac_c" 1>&6
! echo "configure:6878: checking for sys/wait.h that is POSIX.1 compatible" >&5
! if eval "test \"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 6883 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/wait.h>
  #ifndef WEXITSTATUS
! #define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
  #endif
  #ifndef WIFEXITED
! #define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
  #endif
! int main() {
! int s;
! wait (&s);
! s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
! ; return 0; }
! EOF
! if { (eval echo configure:6899: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
    ac_cv_header_sys_wait_h=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   ac_cv_header_sys_wait_h=no
  fi
! rm -f conftest*
  fi
! 
! echo "$ac_t""$ac_cv_header_sys_wait_h" 1>&6
  if test $ac_cv_header_sys_wait_h = yes; then
!   cat >> confdefs.h <<\EOF
  #define HAVE_SYS_WAIT_H 1
! EOF
  
  fi
  
! for ac_hdr in fcntl.h limits.h stdint.h strings.h sys/fcntl.h sys/file.h sys/ioctl.h sys/time.h sys/mnttab.h sys/statvfs.h sys/stat.h sys/vfs.h mntent.h syslog.h unistd.h termios.h sys/termios.h netdb.h sgtty.h ufs/quota.h mount.h sys/mount.h statfs.h sys/types.h dlfcn.h errno.h sys/errno.h
  do
! ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:6923: checking for $ac_hdr" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 6928 "configure"
  #include "confdefs.h"
! #include <$ac_hdr>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:6933: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_hdr 1
! EOF
!  
  else
!   echo "$ac_t""no" 1>&6
  fi
  done
  
! ac_safe=`echo "sys/cdefs.h" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for sys/cdefs.h""... $ac_c" 1>&6
! echo "configure:6961: checking for sys/cdefs.h" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 6966 "configure"
  #include "confdefs.h"
  #include <sys/cdefs.h>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:6971: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    :
  else
!   echo "$ac_t""no" 1>&6
! echo "$ac_t""enabling generic cdefs.h from tree" 1>&6
  	CFLAGS="-I\$(top_srcdir)/sys/generic $CFLAGS"
  
  fi
  
  
! echo $ac_n "checking for working const""... $ac_c" 1>&6
! echo "configure:6997: checking for working const" >&5
! if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7002 "configure"
  #include "confdefs.h"
! 
! int main() {
! 
! /* Ultrix mips cc rejects this.  */
! typedef int charset[2]; const charset x;
! /* SunOS 4.1.1 cc rejects this.  */
! char const *const *ccp;
! char **p;
! /* NEC SVR4.0.2 mips cc rejects this.  */
! struct point {int x, y;};
! static struct point const zero = {0,0};
! /* AIX XL C 1.02.0.0 rejects this.
!    It does not let you subtract one const X* pointer from another in an arm
!    of an if-expression whose if-part is not a constant expression */
! const char *g = "string";
! ccp = &g + (g ? g-g : 0);
! /* HPUX 7.0 cc rejects these. */
! ++ccp;
! p = (char**) ccp;
! ccp = (char const *const *) p;
! { /* SCO 3.2v4 cc rejects this.  */
!   char *t;
!   char const *s = 0 ? (char *) 0 : (char const *) 0;
! 
!   *t++ = 0;
! }
! { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
!   int x[] = {25, 17};
!   const int *foo = &x[0];
!   ++foo;
! }
! { /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
!   typedef const int *iptr;
!   iptr p = 0;
!   ++p;
  }
! { /* AIX XL C 1.02.0.0 rejects this saying
!      "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
!   struct s { int j; const int *ap[3]; };
!   struct s *b; b->j = 5;
  }
! { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
!   const int foo = 10;
  }
  
! ; return 0; }
! EOF
! if { (eval echo configure:7051: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
    ac_cv_c_const=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   ac_cv_c_const=no
  fi
! rm -f conftest*
  fi
! 
! echo "$ac_t""$ac_cv_c_const" 1>&6
  if test $ac_cv_c_const = no; then
!   cat >> confdefs.h <<\EOF
! #define const 
! EOF
  
  fi
  
! echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
! echo "configure:7072: checking for uid_t in sys/types.h" >&5
! if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7077 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
! EOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "uid_t" >/dev/null 2>&1; then
-   rm -rf conftest*
    ac_cv_type_uid_t=yes
  else
-   rm -rf conftest*
    ac_cv_type_uid_t=no
  fi
  rm -f conftest*
  
  fi
! 
! echo "$ac_t""$ac_cv_type_uid_t" 1>&6
  if test $ac_cv_type_uid_t = no; then
!   cat >> confdefs.h <<\EOF
  #define uid_t int
! EOF
  
!   cat >> confdefs.h <<\EOF
  #define gid_t int
! EOF
  
  fi
  
! echo $ac_n "checking for inline""... $ac_c" 1>&6
! echo "configure:7106: checking for inline" >&5
! if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    ac_cv_c_inline=no
  for ac_kw in inline __inline__ __inline; do
!   cat > conftest.$ac_ext <<EOF
! #line 7113 "configure"
  #include "confdefs.h"
  
! int main() {
! } $ac_kw foo() {
! ; return 0; }
! EOF
! if { (eval echo configure:7120: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
    ac_cv_c_inline=$ac_kw; break
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
  fi
! rm -f conftest*
  done
  
  fi
! 
! echo "$ac_t""$ac_cv_c_inline" 1>&6
! case "$ac_cv_c_inline" in
    inline | yes) ;;
!   no) cat >> confdefs.h <<\EOF
! #define inline 
! EOF
   ;;
!   *)  cat >> confdefs.h <<EOF
  #define inline $ac_cv_c_inline
! EOF
   ;;
  esac
  
! echo $ac_n "checking for mode_t""... $ac_c" 1>&6
! echo "configure:7146: checking for mode_t" >&5
! if eval "test \"`echo '$''{'ac_cv_type_mode_t'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7151 "configure"
  #include "confdefs.h"
! #include <sys/types.h>
! #if STDC_HEADERS
! #include <stdlib.h>
! #include <stddef.h>
  #endif
! EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "(^|[^a-zA-Z_0-9])mode_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
!   rm -rf conftest*
    ac_cv_type_mode_t=yes
  else
!   rm -rf conftest*
!   ac_cv_type_mode_t=no
  fi
! rm -f conftest*
! 
  fi
! echo "$ac_t""$ac_cv_type_mode_t" 1>&6
! if test $ac_cv_type_mode_t = no; then
!   cat >> confdefs.h <<\EOF
  #define mode_t int
! EOF
  
  fi
  
! echo $ac_n "checking for off_t""... $ac_c" 1>&6
! echo "configure:7179: checking for off_t" >&5
! if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7184 "configure"
  #include "confdefs.h"
! #include <sys/types.h>
! #if STDC_HEADERS
! #include <stdlib.h>
! #include <stddef.h>
  #endif
! EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
!   rm -rf conftest*
    ac_cv_type_off_t=yes
  else
!   rm -rf conftest*
!   ac_cv_type_off_t=no
  fi
! rm -f conftest*
! 
  fi
! echo "$ac_t""$ac_cv_type_off_t" 1>&6
! if test $ac_cv_type_off_t = no; then
!   cat >> confdefs.h <<\EOF
  #define off_t long
! EOF
  
  fi
  
! echo $ac_n "checking for pid_t""... $ac_c" 1>&6
! echo "configure:7212: checking for pid_t" >&5
! if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7217 "configure"
  #include "confdefs.h"
! #include <sys/types.h>
! #if STDC_HEADERS
! #include <stdlib.h>
! #include <stddef.h>
  #endif
! EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "(^|[^a-zA-Z_0-9])pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
!   rm -rf conftest*
    ac_cv_type_pid_t=yes
  else
!   rm -rf conftest*
!   ac_cv_type_pid_t=no
  fi
! rm -f conftest*
! 
  fi
! echo "$ac_t""$ac_cv_type_pid_t" 1>&6
! if test $ac_cv_type_pid_t = no; then
!   cat >> confdefs.h <<\EOF
  #define pid_t int
! EOF
  
  fi
  
! echo $ac_n "checking for size_t""... $ac_c" 1>&6
! echo "configure:7245: checking for size_t" >&5
! if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7250 "configure"
  #include "confdefs.h"
! #include <sys/types.h>
! #if STDC_HEADERS
! #include <stdlib.h>
! #include <stddef.h>
  #endif
! EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
!   rm -rf conftest*
    ac_cv_type_size_t=yes
  else
!   rm -rf conftest*
!   ac_cv_type_size_t=no
  fi
! rm -f conftest*
! 
  fi
! echo "$ac_t""$ac_cv_type_size_t" 1>&6
! if test $ac_cv_type_size_t = no; then
!   cat >> confdefs.h <<\EOF
  #define size_t unsigned
! EOF
  
  fi
  
! echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
! echo "configure:7278: checking for st_rdev in struct stat" >&5
! if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7283 "configure"
  #include "confdefs.h"
! #include <sys/types.h>
! #include <sys/stat.h>
! int main() {
! struct stat s; s.st_rdev;
! ; return 0; }
! EOF
! if { (eval echo configure:7291: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
!   ac_cv_struct_st_rdev=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   ac_cv_struct_st_rdev=no
  fi
! rm -f conftest*
  fi
  
! echo "$ac_t""$ac_cv_struct_st_rdev" 1>&6
! if test $ac_cv_struct_st_rdev = yes; then
!   cat >> confdefs.h <<\EOF
  #define HAVE_ST_RDEV 1
! EOF
  
  fi
  
! echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
! echo "configure:7312: checking whether time.h and sys/time.h may both be included" >&5
! if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7317 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/time.h>
  #include <time.h>
! int main() {
! struct tm *tp;
! ; return 0; }
! EOF
! if { (eval echo configure:7326: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
    ac_cv_header_time=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   ac_cv_header_time=no
  fi
! rm -f conftest*
  fi
! 
! echo "$ac_t""$ac_cv_header_time" 1>&6
  if test $ac_cv_header_time = yes; then
!   cat >> confdefs.h <<\EOF
  #define TIME_WITH_SYS_TIME 1
! EOF
  
  fi
  
! echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
! echo "configure:7347: checking whether struct tm is in sys/time.h or time.h" >&5
! if eval "test \"`echo '$''{'ac_cv_struct_tm'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7352 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <time.h>
! int main() {
  struct tm *tp; tp->tm_sec;
! ; return 0; }
! EOF
! if { (eval echo configure:7360: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
    ac_cv_struct_tm=time.h
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   ac_cv_struct_tm=sys/time.h
  fi
! rm -f conftest*
  fi
! 
! echo "$ac_t""$ac_cv_struct_tm" 1>&6
  if test $ac_cv_struct_tm = sys/time.h; then
!   cat >> confdefs.h <<\EOF
  #define TM_IN_SYS_TIME 1
! EOF
  
  fi
  
  
! echo $ac_n "checking type of array argument to getgroups""... $ac_c" 1>&6
! echo "configure:7382: checking type of array argument to getgroups" >&5
! if eval "test \"`echo '$''{'ac_cv_type_getgroups'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test "$cross_compiling" = yes; then
    ac_cv_type_getgroups=cross
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7390 "configure"
  #include "confdefs.h"
- 
  /* Thanks to Mike Rendell for this test.  */
  #include <sys/types.h>
  #define NGID 256
  #undef MAX
  #define MAX(x, y) ((x) > (y) ? (x) : (y))
! main()
  {
    gid_t gidset[NGID];
    int i, n;
--- 9097,10188 ----
  
  if test $ac_cv_header_stdc = yes; then
    # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
!   if test "$cross_compiling" = yes; then
    :
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <ctype.h>
! #if ((' ' & 0x0FF) == 0x020)
! # define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
! # define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
! #else
! # define ISLOWER(c) (('a' <= (c) && (c) <= 'i') \
!                      || ('j' <= (c) && (c) <= 'r') \
!                      || ('s' <= (c) && (c) <= 'z'))
! # define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
! #endif
  
! #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
! int
! main ()
! {
!   int i;
!   for (i = 0; i < 256; i++)
!     if (XOR (islower (i), ISLOWER (i))
!         || toupper (i) != TOUPPER (i))
!       exit(2);
!   exit (0);
! }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    :
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_header_stdc=no
  fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  fi
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
! echo "${ECHO_T}$ac_cv_header_stdc" >&6
  if test $ac_cv_header_stdc = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define STDC_HEADERS 1
! _ACEOF
  
  fi
  
! echo "$as_me:$LINENO: checking for sys/wait.h that is POSIX.1 compatible" >&5
! echo $ECHO_N "checking for sys/wait.h that is POSIX.1 compatible... $ECHO_C" >&6
! if test "${ac_cv_header_sys_wait_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/wait.h>
  #ifndef WEXITSTATUS
! # define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
  #endif
  #ifndef WIFEXITED
! # define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
  #endif
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
!   int s;
!   wait (&s);
!   s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_header_sys_wait_h=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_header_sys_wait_h=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_wait_h" >&5
! echo "${ECHO_T}$ac_cv_header_sys_wait_h" >&6
  if test $ac_cv_header_sys_wait_h = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define HAVE_SYS_WAIT_H 1
! _ACEOF
  
  fi
  
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! 
! for ac_header in fcntl.h limits.h stdint.h strings.h sys/fcntl.h sys/file.h sys/ioctl.h sys/time.h sys/mnttab.h sys/statvfs.h sys/stat.h sys/vfs.h mntent.h syslog.h unistd.h termios.h sys/termios.h netdb.h sgtty.h ufs/quota.h mount.h sys/mount.h statfs.h sys/types.h dlfcn.h errno.h sys/errno.h
  do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
  else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking $ac_header usability" >&5
! echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking $ac_header presence" >&5
! echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <$ac_header>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
  fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
  else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   ac_header_preproc=no
! fi
! rm -f conftest.err conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc in
!   yes:no )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
!   no:yes )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
! echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
! esac
! echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   eval "$as_ac_Header=$ac_header_preproc"
! fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
! 
! fi
! if test `eval echo '${'$as_ac_Header'}'` = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
! _ACEOF
! 
  fi
+ 
  done
  
! if test "${ac_cv_header_sys_cdefs_h+set}" = set; then
!   echo "$as_me:$LINENO: checking for sys/cdefs.h" >&5
! echo $ECHO_N "checking for sys/cdefs.h... $ECHO_C" >&6
! if test "${ac_cv_header_sys_cdefs_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_cdefs_h" >&5
! echo "${ECHO_T}$ac_cv_header_sys_cdefs_h" >&6
  else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking sys/cdefs.h usability" >&5
! echo $ECHO_N "checking sys/cdefs.h usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ $ac_includes_default
  #include <sys/cdefs.h>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
! fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking sys/cdefs.h presence" >&5
! echo $ECHO_N "checking sys/cdefs.h presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <sys/cdefs.h>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   ac_header_preproc=no
  fi
! rm -f conftest.err conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc in
!   yes:no )
!     { echo "$as_me:$LINENO: WARNING: sys/cdefs.h: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: sys/cdefs.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/cdefs.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: sys/cdefs.h: proceeding with the preprocessor's result" >&2;};;
!   no:yes )
!     { echo "$as_me:$LINENO: WARNING: sys/cdefs.h: present but cannot be compiled" >&5
! echo "$as_me: WARNING: sys/cdefs.h: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/cdefs.h: check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: sys/cdefs.h: check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/cdefs.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: sys/cdefs.h: proceeding with the preprocessor's result" >&2;};;
! esac
! echo "$as_me:$LINENO: checking for sys/cdefs.h" >&5
! echo $ECHO_N "checking for sys/cdefs.h... $ECHO_C" >&6
! if test "${ac_cv_header_sys_cdefs_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_header_sys_cdefs_h=$ac_header_preproc
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_cdefs_h" >&5
! echo "${ECHO_T}$ac_cv_header_sys_cdefs_h" >&6
! 
! fi
! if test $ac_cv_header_sys_cdefs_h = yes; then
    :
  else
!   echo "$as_me:$LINENO: result: enabling generic cdefs.h from tree" >&5
! echo "${ECHO_T}enabling generic cdefs.h from tree" >&6
  	CFLAGS="-I\$(top_srcdir)/sys/generic $CFLAGS"
  
  fi
  
  
! 
! echo "$as_me:$LINENO: checking for $CC option to accept ANSI C" >&5
! echo $ECHO_N "checking for $CC option to accept ANSI C... $ECHO_C" >&6
! if test "${ac_cv_prog_cc_stdc+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_cv_prog_cc_stdc=no
! ac_save_CC=$CC
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! #include <stdarg.h>
! #include <stdio.h>
! #include <sys/types.h>
! #include <sys/stat.h>
! /* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
! struct buf { int x; };
! FILE * (*rcsopen) (struct buf *, struct stat *, int);
! static char *e (p, i)
!      char **p;
!      int i;
! {
!   return p[i];
  }
! static char *f (char * (*g) (char **, int), char **p, ...)
! {
!   char *s;
!   va_list v;
!   va_start (v,p);
!   s = g (p, va_arg (v,int));
!   va_end (v);
!   return s;
  }
! int test (int i, double x);
! struct s1 {int (*f) (int a);};
! struct s2 {int (*f) (double a);};
! int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
! int argc;
! char **argv;
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
!   ;
!   return 0;
  }
+ _ACEOF
+ # Don't try gcc -ansi; that turns off useful extensions and
+ # breaks some systems' header files.
+ # AIX			-qlanglvl=ansi
+ # Ultrix and OSF/1	-std1
+ # HP-UX 10.20 and later	-Ae
+ # HP-UX older versions	-Aa -D_HPUX_SOURCE
+ # SVR4			-Xc -D__EXTENSIONS__
+ for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+ do
+   CC="$ac_save_CC $ac_arg"
+   rm -f conftest.$ac_objext
+ if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); } &&
+          { ac_try='test -s conftest.$ac_objext'
+   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+   (eval $ac_try) 2>&5
+   ac_status=$?
+   echo "$as_me:$LINENO: \$? = $ac_status" >&5
+   (exit $ac_status); }; }; then
+   ac_cv_prog_cc_stdc=$ac_arg
+ break
+ else
+   echo "$as_me: failed program was:" >&5
+ cat conftest.$ac_ext >&5
+ fi
+ rm -f conftest.$ac_objext
+ done
+ rm -f conftest.$ac_ext conftest.$ac_objext
+ CC=$ac_save_CC
  
! fi
! 
! case "x$ac_cv_prog_cc_stdc" in
!   x|xno)
!     echo "$as_me:$LINENO: result: none needed" >&5
! echo "${ECHO_T}none needed" >&6 ;;
!   *)
!     echo "$as_me:$LINENO: result: $ac_cv_prog_cc_stdc" >&5
! echo "${ECHO_T}$ac_cv_prog_cc_stdc" >&6
!     CC="$CC $ac_cv_prog_cc_stdc" ;;
! esac
! 
! echo "$as_me:$LINENO: checking for an ANSI C-conforming const" >&5
! echo $ECHO_N "checking for an ANSI C-conforming const... $ECHO_C" >&6
! if test "${ac_cv_c_const+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! /* FIXME: Include the comments suggested by Paul. */
! #ifndef __cplusplus
!   /* Ultrix mips cc rejects this.  */
!   typedef int charset[2];
!   const charset x;
!   /* SunOS 4.1.1 cc rejects this.  */
!   char const *const *ccp;
!   char **p;
!   /* NEC SVR4.0.2 mips cc rejects this.  */
!   struct point {int x, y;};
!   static struct point const zero = {0,0};
!   /* AIX XL C 1.02.0.0 rejects this.
!      It does not let you subtract one const X* pointer from another in
!      an arm of an if-expression whose if-part is not a constant
!      expression */
!   const char *g = "string";
!   ccp = &g + (g ? g-g : 0);
!   /* HPUX 7.0 cc rejects these. */
!   ++ccp;
!   p = (char**) ccp;
!   ccp = (char const *const *) p;
!   { /* SCO 3.2v4 cc rejects this.  */
!     char *t;
!     char const *s = 0 ? (char *) 0 : (char const *) 0;
! 
!     *t++ = 0;
!   }
!   { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
!     int x[] = {25, 17};
!     const int *foo = &x[0];
!     ++foo;
!   }
!   { /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
!     typedef const int *iptr;
!     iptr p = 0;
!     ++p;
!   }
!   { /* AIX XL C 1.02.0.0 rejects this saying
!        "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
!     struct s { int j; const int *ap[3]; };
!     struct s *b; b->j = 5;
!   }
!   { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
!     const int foo = 10;
!   }
! #endif
! 
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_c_const=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_c_const=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_c_const" >&5
! echo "${ECHO_T}$ac_cv_c_const" >&6
  if test $ac_cv_c_const = no; then
! 
! cat >>confdefs.h <<\_ACEOF
! #define const
! _ACEOF
  
  fi
  
! echo "$as_me:$LINENO: checking for uid_t in sys/types.h" >&5
! echo $ECHO_N "checking for uid_t in sys/types.h... $ECHO_C" >&6
! if test "${ac_cv_type_uid_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
! 
! _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "uid_t" >/dev/null 2>&1; then
    ac_cv_type_uid_t=yes
  else
    ac_cv_type_uid_t=no
  fi
  rm -f conftest*
  
  fi
! echo "$as_me:$LINENO: result: $ac_cv_type_uid_t" >&5
! echo "${ECHO_T}$ac_cv_type_uid_t" >&6
  if test $ac_cv_type_uid_t = no; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define uid_t int
! _ACEOF
  
! 
! cat >>confdefs.h <<\_ACEOF
  #define gid_t int
! _ACEOF
  
  fi
  
! echo "$as_me:$LINENO: checking for inline" >&5
! echo $ECHO_N "checking for inline... $ECHO_C" >&6
! if test "${ac_cv_c_inline+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    ac_cv_c_inline=no
  for ac_kw in inline __inline__ __inline; do
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ #ifndef __cplusplus
+ static $ac_kw int static_foo () {return 0; }
+ $ac_kw int foo () {return 0; }
+ #endif
  
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_c_inline=$ac_kw; break
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  done
  
  fi
! echo "$as_me:$LINENO: result: $ac_cv_c_inline" >&5
! echo "${ECHO_T}$ac_cv_c_inline" >&6
! case $ac_cv_c_inline in
    inline | yes) ;;
!   no)
! cat >>confdefs.h <<\_ACEOF
! #define inline
! _ACEOF
   ;;
!   *)  cat >>confdefs.h <<_ACEOF
  #define inline $ac_cv_c_inline
! _ACEOF
   ;;
  esac
  
! echo "$as_me:$LINENO: checking for mode_t" >&5
! echo $ECHO_N "checking for mode_t... $ECHO_C" >&6
! if test "${ac_cv_type_mode_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
  #endif
! int
! main ()
! {
! if ((mode_t *) 0)
!   return 0;
! if (sizeof (mode_t))
!   return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_type_mode_t=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_type_mode_t=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_type_mode_t" >&5
! echo "${ECHO_T}$ac_cv_type_mode_t" >&6
! if test $ac_cv_type_mode_t = yes; then
!   :
! else
! 
! cat >>confdefs.h <<_ACEOF
  #define mode_t int
! _ACEOF
  
  fi
  
! echo "$as_me:$LINENO: checking for off_t" >&5
! echo $ECHO_N "checking for off_t... $ECHO_C" >&6
! if test "${ac_cv_type_off_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
  #endif
! int
! main ()
! {
! if ((off_t *) 0)
!   return 0;
! if (sizeof (off_t))
!   return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_type_off_t=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_type_off_t=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_type_off_t" >&5
! echo "${ECHO_T}$ac_cv_type_off_t" >&6
! if test $ac_cv_type_off_t = yes; then
!   :
! else
! 
! cat >>confdefs.h <<_ACEOF
  #define off_t long
! _ACEOF
  
  fi
  
! echo "$as_me:$LINENO: checking for pid_t" >&5
! echo $ECHO_N "checking for pid_t... $ECHO_C" >&6
! if test "${ac_cv_type_pid_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
  #endif
! int
! main ()
! {
! if ((pid_t *) 0)
!   return 0;
! if (sizeof (pid_t))
!   return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_type_pid_t=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_type_pid_t=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_type_pid_t" >&5
! echo "${ECHO_T}$ac_cv_type_pid_t" >&6
! if test $ac_cv_type_pid_t = yes; then
!   :
! else
! 
! cat >>confdefs.h <<_ACEOF
  #define pid_t int
! _ACEOF
  
  fi
  
! echo "$as_me:$LINENO: checking for size_t" >&5
! echo $ECHO_N "checking for size_t... $ECHO_C" >&6
! if test "${ac_cv_type_size_t+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
  #endif
! int
! main ()
! {
! if ((size_t *) 0)
!   return 0;
! if (sizeof (size_t))
!   return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_type_size_t=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_type_size_t=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_type_size_t" >&5
! echo "${ECHO_T}$ac_cv_type_size_t" >&6
! if test $ac_cv_type_size_t = yes; then
!   :
! else
! 
! cat >>confdefs.h <<_ACEOF
  #define size_t unsigned
! _ACEOF
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for struct stat.st_rdev" >&5
! echo $ECHO_N "checking for struct stat.st_rdev... $ECHO_C" >&6
! if test "${ac_cv_member_struct_stat_st_rdev+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! static struct stat ac_aggr;
! if (ac_aggr.st_rdev)
! return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_member_struct_stat_st_rdev=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_member_struct_stat_st_rdev=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
+ echo "$as_me:$LINENO: result: $ac_cv_member_struct_stat_st_rdev" >&5
+ echo "${ECHO_T}$ac_cv_member_struct_stat_st_rdev" >&6
+ if test $ac_cv_member_struct_stat_st_rdev = yes; then
  
! cat >>confdefs.h <<_ACEOF
! #define HAVE_STRUCT_STAT_ST_RDEV 1
! _ACEOF
! 
! 
! cat >>confdefs.h <<\_ACEOF
  #define HAVE_ST_RDEV 1
! _ACEOF
  
  fi
  
! 
! echo "$as_me:$LINENO: checking whether time.h and sys/time.h may both be included" >&5
! echo $ECHO_N "checking whether time.h and sys/time.h may both be included... $ECHO_C" >&6
! if test "${ac_cv_header_time+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/time.h>
  #include <time.h>
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! if ((struct tm *) 0)
! return 0;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_header_time=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_header_time=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_time" >&5
! echo "${ECHO_T}$ac_cv_header_time" >&6
  if test $ac_cv_header_time = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define TIME_WITH_SYS_TIME 1
! _ACEOF
  
  fi
  
! echo "$as_me:$LINENO: checking whether struct tm is in sys/time.h or time.h" >&5
! echo $ECHO_N "checking whether struct tm is in sys/time.h or time.h... $ECHO_C" >&6
! if test "${ac_cv_struct_tm+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <time.h>
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  struct tm *tp; tp->tm_sec;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_struct_tm=time.h
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_struct_tm=sys/time.h
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_struct_tm" >&5
! echo "${ECHO_T}$ac_cv_struct_tm" >&6
  if test $ac_cv_struct_tm = sys/time.h; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define TM_IN_SYS_TIME 1
! _ACEOF
  
  fi
  
  
! echo "$as_me:$LINENO: checking type of array argument to getgroups" >&5
! echo $ECHO_N "checking type of array argument to getgroups... $ECHO_C" >&6
! if test "${ac_cv_type_getgroups+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test "$cross_compiling" = yes; then
    ac_cv_type_getgroups=cross
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  /* Thanks to Mike Rendell for this test.  */
  #include <sys/types.h>
  #define NGID 256
  #undef MAX
  #define MAX(x, y) ((x) > (y) ? (x) : (y))
! 
! int
! main ()
  {
    gid_t gidset[NGID];
    int i, n;
***************
*** 7409,7748 ****
       happens when gid_t is short but getgroups modifies an array of ints.  */
    exit ((n > 0 && gidset[n] != val.gval) ? 1 : 0);
  }
! 
! EOF
! if { (eval echo configure:7415: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
! then
!     ac_cv_type_getgroups=gid_t
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -fr conftest*
!   ac_cv_type_getgroups=int
  fi
! rm -fr conftest*
  fi
- 
  if test $ac_cv_type_getgroups = cross; then
!         cat > conftest.$ac_ext <<EOF
! #line 7429 "configure"
  #include "confdefs.h"
  #include <unistd.h>
! EOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "getgroups.*int.*gid_t" >/dev/null 2>&1; then
-   rm -rf conftest*
    ac_cv_type_getgroups=gid_t
  else
-   rm -rf conftest*
    ac_cv_type_getgroups=int
  fi
  rm -f conftest*
  
  fi
  fi
  
! echo "$ac_t""$ac_cv_type_getgroups" 1>&6
! cat >> confdefs.h <<EOF
  #define GETGROUPS_T $ac_cv_type_getgroups
! EOF
  
  
! if test $ac_cv_prog_gcc = yes; then
!     echo $ac_n "checking whether ${CC-cc} needs -traditional""... $ac_c" 1>&6
! echo "configure:7454: checking whether ${CC-cc} needs -traditional" >&5
! if eval "test \"`echo '$''{'ac_cv_prog_gcc_traditional'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
      ac_pattern="Autoconf.*'x'"
!   cat > conftest.$ac_ext <<EOF
! #line 7460 "configure"
  #include "confdefs.h"
  #include <sgtty.h>
  Autoconf TIOCGETP
! EOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "$ac_pattern" >/dev/null 2>&1; then
-   rm -rf conftest*
    ac_cv_prog_gcc_traditional=yes
  else
-   rm -rf conftest*
    ac_cv_prog_gcc_traditional=no
  fi
  rm -f conftest*
  
  
    if test $ac_cv_prog_gcc_traditional = no; then
!     cat > conftest.$ac_ext <<EOF
! #line 7478 "configure"
  #include "confdefs.h"
  #include <termio.h>
  Autoconf TCGETA
! EOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "$ac_pattern" >/dev/null 2>&1; then
-   rm -rf conftest*
    ac_cv_prog_gcc_traditional=yes
  fi
  rm -f conftest*
  
    fi
  fi
! 
! echo "$ac_t""$ac_cv_prog_gcc_traditional" 1>&6
    if test $ac_cv_prog_gcc_traditional = yes; then
      CC="$CC -traditional"
    fi
  fi
  
! echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
! echo "configure:7500: checking for 8-bit clean memcmp" >&5
! if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test "$cross_compiling" = yes; then
!   ac_cv_func_memcmp_clean=no
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7508 "configure"
  #include "confdefs.h"
  
! main()
  {
    char c0 = 0x40, c1 = 0x80, c2 = 0x81;
!   exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
! }
  
! EOF
! if { (eval echo configure:7518: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
! then
!   ac_cv_func_memcmp_clean=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -fr conftest*
!   ac_cv_func_memcmp_clean=no
  fi
! rm -fr conftest*
  fi
- 
  fi
  
! echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
! test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"
! 
! echo $ac_n "checking whether sys/types.h defines makedev""... $ac_c" 1>&6
! echo "configure:7536: checking whether sys/types.h defines makedev" >&5
! if eval "test \"`echo '$''{'ac_cv_header_sys_types_h_makedev'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7541 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
! int main() {
  return makedev(0, 0);
! ; return 0; }
! EOF
! if { (eval echo configure:7548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
    ac_cv_header_sys_types_h_makedev=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   ac_cv_header_sys_types_h_makedev=no
  fi
! rm -f conftest*
  
  fi
! 
! echo "$ac_t""$ac_cv_header_sys_types_h_makedev" 1>&6
  
  if test $ac_cv_header_sys_types_h_makedev = no; then
! ac_safe=`echo "sys/mkdev.h" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for sys/mkdev.h""... $ac_c" 1>&6
! echo "configure:7566: checking for sys/mkdev.h" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7571 "configure"
  #include "confdefs.h"
  #include <sys/mkdev.h>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:7576: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   cat >> confdefs.h <<\EOF
  #define MAJOR_IN_MKDEV 1
! EOF
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
  
    if test $ac_cv_header_sys_mkdev_h = no; then
! ac_safe=`echo "sys/sysmacros.h" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for sys/sysmacros.h""... $ac_c" 1>&6
! echo "configure:7604: checking for sys/sysmacros.h" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7609 "configure"
  #include "confdefs.h"
  #include <sys/sysmacros.h>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:7614: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   cat >> confdefs.h <<\EOF
  #define MAJOR_IN_SYSMACROS 1
! EOF
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
    fi
  fi
  
! for ac_hdr in unistd.h
  do
! ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:7645: checking for $ac_hdr" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7650 "configure"
  #include "confdefs.h"
! #include <$ac_hdr>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:7655: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_hdr 1
! EOF
!  
  else
!   echo "$ac_t""no" 1>&6
  fi
  done
  
  for ac_func in getpagesize
  do
! echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
! echo "configure:7684: checking for $ac_func" >&5
! if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7689 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func(); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char $ac_func();
! 
! int main() {
  
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
  choke me
  #else
! $ac_func();
  #endif
  
! ; return 0; }
! EOF
! if { (eval echo configure:7712: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_func_$ac_func=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_func_$ac_func=no"
  fi
! rm -f conftest*
  fi
  
- if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-   cat >> confdefs.h <<EOF
- #define $ac_tr_func 1
- EOF
-  
- else
-   echo "$ac_t""no" 1>&6
  fi
  done
  
! echo $ac_n "checking for working mmap""... $ac_c" 1>&6
! echo "configure:7737: checking for working mmap" >&5
! if eval "test \"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test "$cross_compiling" = yes; then
    ac_cv_func_mmap_fixed_mapped=no
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7745 "configure"
  #include "confdefs.h"
  
  /* Thanks to Mike Haertel and Jim Avera for this test.
     Here is a matrix of mmap possibilities:
--- 10197,10847 ----
       happens when gid_t is short but getgroups modifies an array of ints.  */
    exit ((n > 0 && gidset[n] != val.gval) ? 1 : 0);
  }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_type_getgroups=gid_t
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_type_getgroups=int
  fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  if test $ac_cv_type_getgroups = cross; then
!         cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <unistd.h>
! 
! _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "getgroups.*int.*gid_t" >/dev/null 2>&1; then
    ac_cv_type_getgroups=gid_t
  else
    ac_cv_type_getgroups=int
  fi
  rm -f conftest*
  
  fi
  fi
+ echo "$as_me:$LINENO: result: $ac_cv_type_getgroups" >&5
+ echo "${ECHO_T}$ac_cv_type_getgroups" >&6
  
! cat >>confdefs.h <<_ACEOF
  #define GETGROUPS_T $ac_cv_type_getgroups
! _ACEOF
  
  
! if test $ac_cv_c_compiler_gnu = yes; then
!     echo "$as_me:$LINENO: checking whether $CC needs -traditional" >&5
! echo $ECHO_N "checking whether $CC needs -traditional... $ECHO_C" >&6
! if test "${ac_cv_prog_gcc_traditional+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
      ac_pattern="Autoconf.*'x'"
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sgtty.h>
  Autoconf TIOCGETP
! _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "$ac_pattern" >/dev/null 2>&1; then
    ac_cv_prog_gcc_traditional=yes
  else
    ac_cv_prog_gcc_traditional=no
  fi
  rm -f conftest*
  
  
    if test $ac_cv_prog_gcc_traditional = no; then
!     cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <termio.h>
  Autoconf TCGETA
! _ACEOF
  if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
    egrep "$ac_pattern" >/dev/null 2>&1; then
    ac_cv_prog_gcc_traditional=yes
  fi
  rm -f conftest*
  
    fi
  fi
! echo "$as_me:$LINENO: result: $ac_cv_prog_gcc_traditional" >&5
! echo "${ECHO_T}$ac_cv_prog_gcc_traditional" >&6
    if test $ac_cv_prog_gcc_traditional = yes; then
      CC="$CC -traditional"
    fi
  fi
  
! echo "$as_me:$LINENO: checking for working memcmp" >&5
! echo $ECHO_N "checking for working memcmp... $ECHO_C" >&6
! if test "${ac_cv_func_memcmp_working+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test "$cross_compiling" = yes; then
!   ac_cv_func_memcmp_working=no
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
  {
+ 
+   /* Some versions of memcmp are not 8-bit clean.  */
    char c0 = 0x40, c1 = 0x80, c2 = 0x81;
!   if (memcmp(&c0, &c2, 1) >= 0 || memcmp(&c1, &c2, 1) >= 0)
!     exit (1);
  
!   /* The Next x86 OpenStep bug shows up only when comparing 16 bytes
!      or more and with at least one buffer not starting on a 4-byte boundary.
!      William Lewis provided this test program.   */
!   {
!     char foo[21];
!     char bar[21];
!     int i;
!     for (i = 0; i < 4; i++)
!       {
!         char *a = foo + i;
!         char *b = bar + i;
!         strcpy (a, "--------01111111");
!         strcpy (b, "--------10000000");
!         if (memcmp (a, b, 16) >= 0)
!           exit (1);
!       }
!     exit (0);
!   }
! 
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_func_memcmp_working=yes
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_func_memcmp_working=no
  fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  fi
+ echo "$as_me:$LINENO: result: $ac_cv_func_memcmp_working" >&5
+ echo "${ECHO_T}$ac_cv_func_memcmp_working" >&6
+ test $ac_cv_func_memcmp_working = no && LIBOBJS="$LIBOBJS memcmp.$ac_objext"
  
! echo "$as_me:$LINENO: checking whether sys/types.h defines makedev" >&5
! echo $ECHO_N "checking whether sys/types.h defines makedev... $ECHO_C" >&6
! if test "${ac_cv_header_sys_types_h_makedev+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  return makedev(0, 0);
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_header_sys_types_h_makedev=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_header_sys_types_h_makedev=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
  
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_types_h_makedev" >&5
! echo "${ECHO_T}$ac_cv_header_sys_types_h_makedev" >&6
  
  if test $ac_cv_header_sys_types_h_makedev = no; then
! if test "${ac_cv_header_sys_mkdev_h+set}" = set; then
!   echo "$as_me:$LINENO: checking for sys/mkdev.h" >&5
! echo $ECHO_N "checking for sys/mkdev.h... $ECHO_C" >&6
! if test "${ac_cv_header_sys_mkdev_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_mkdev_h" >&5
! echo "${ECHO_T}$ac_cv_header_sys_mkdev_h" >&6
  else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking sys/mkdev.h usability" >&5
! echo $ECHO_N "checking sys/mkdev.h usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ $ac_includes_default
  #include <sys/mkdev.h>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
! fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking sys/mkdev.h presence" >&5
! echo $ECHO_N "checking sys/mkdev.h presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <sys/mkdev.h>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   ac_header_preproc=no
  fi
! rm -f conftest.err conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc in
!   yes:no )
!     { echo "$as_me:$LINENO: WARNING: sys/mkdev.h: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: sys/mkdev.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/mkdev.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: sys/mkdev.h: proceeding with the preprocessor's result" >&2;};;
!   no:yes )
!     { echo "$as_me:$LINENO: WARNING: sys/mkdev.h: present but cannot be compiled" >&5
! echo "$as_me: WARNING: sys/mkdev.h: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/mkdev.h: check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: sys/mkdev.h: check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/mkdev.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: sys/mkdev.h: proceeding with the preprocessor's result" >&2;};;
! esac
! echo "$as_me:$LINENO: checking for sys/mkdev.h" >&5
! echo $ECHO_N "checking for sys/mkdev.h... $ECHO_C" >&6
! if test "${ac_cv_header_sys_mkdev_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_header_sys_mkdev_h=$ac_header_preproc
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_mkdev_h" >&5
! echo "${ECHO_T}$ac_cv_header_sys_mkdev_h" >&6
! 
! fi
! if test $ac_cv_header_sys_mkdev_h = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define MAJOR_IN_MKDEV 1
! _ACEOF
  
  fi
  
  
+ 
    if test $ac_cv_header_sys_mkdev_h = no; then
!     if test "${ac_cv_header_sys_sysmacros_h+set}" = set; then
!   echo "$as_me:$LINENO: checking for sys/sysmacros.h" >&5
! echo $ECHO_N "checking for sys/sysmacros.h... $ECHO_C" >&6
! if test "${ac_cv_header_sys_sysmacros_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_sysmacros_h" >&5
! echo "${ECHO_T}$ac_cv_header_sys_sysmacros_h" >&6
  else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking sys/sysmacros.h usability" >&5
! echo $ECHO_N "checking sys/sysmacros.h usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ $ac_includes_default
  #include <sys/sysmacros.h>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
! fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking sys/sysmacros.h presence" >&5
! echo $ECHO_N "checking sys/sysmacros.h presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <sys/sysmacros.h>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   ac_header_preproc=no
  fi
! rm -f conftest.err conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc in
!   yes:no )
!     { echo "$as_me:$LINENO: WARNING: sys/sysmacros.h: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: sys/sysmacros.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/sysmacros.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: sys/sysmacros.h: proceeding with the preprocessor's result" >&2;};;
!   no:yes )
!     { echo "$as_me:$LINENO: WARNING: sys/sysmacros.h: present but cannot be compiled" >&5
! echo "$as_me: WARNING: sys/sysmacros.h: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/sysmacros.h: check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: sys/sysmacros.h: check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: sys/sysmacros.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: sys/sysmacros.h: proceeding with the preprocessor's result" >&2;};;
! esac
! echo "$as_me:$LINENO: checking for sys/sysmacros.h" >&5
! echo $ECHO_N "checking for sys/sysmacros.h... $ECHO_C" >&6
! if test "${ac_cv_header_sys_sysmacros_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_header_sys_sysmacros_h=$ac_header_preproc
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_sys_sysmacros_h" >&5
! echo "${ECHO_T}$ac_cv_header_sys_sysmacros_h" >&6
! 
! fi
! if test $ac_cv_header_sys_sysmacros_h = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define MAJOR_IN_SYSMACROS 1
! _ACEOF
  
  fi
  
+ 
    fi
  fi
  
! 
! 
! for ac_header in stdlib.h unistd.h
  do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
  else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking $ac_header usability" >&5
! echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking $ac_header presence" >&5
! echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <$ac_header>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
  fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
  else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   ac_header_preproc=no
! fi
! rm -f conftest.err conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc in
!   yes:no )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
!   no:yes )
!     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
! echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
! esac
! echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   eval "$as_ac_Header=$ac_header_preproc"
  fi
+ echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+ echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+ 
+ fi
+ if test `eval echo '${'$as_ac_Header'}'` = yes; then
+   cat >>confdefs.h <<_ACEOF
+ #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+ _ACEOF
+ 
+ fi
+ 
  done
  
+ 
  for ac_func in getpagesize
  do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
! if eval "test \"\${$as_ac_var+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char $ac_func ();
! char (*f) ();
  
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
  choke me
  #else
! f = $ac_func;
  #endif
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   eval "$as_ac_var=yes"
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! eval "$as_ac_var=no"
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
  fi
+ echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+ echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+ if test `eval echo '${'$as_ac_var'}'` = yes; then
+   cat >>confdefs.h <<_ACEOF
+ #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+ _ACEOF
  
  fi
  done
  
! echo "$as_me:$LINENO: checking for working mmap" >&5
! echo $ECHO_N "checking for working mmap... $ECHO_C" >&6
! if test "${ac_cv_func_mmap_fixed_mapped+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test "$cross_compiling" = yes; then
    ac_cv_func_mmap_fixed_mapped=no
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ $ac_includes_default
+ /* malloc might have been renamed as rpl_malloc. */
+ #undef malloc
  
  /* Thanks to Mike Haertel and Jim Avera for this test.
     Here is a matrix of mmap possibilities:
***************
*** 7756,7789 ****
     back from the file, nor mmap's back from the file at a different
     address.  (There have been systems where private was not correctly
     implemented like the infamous i386 svr4.0, and systems where the
!    VM page cache was not coherent with the filesystem buffer cache
     like early versions of FreeBSD and possibly contemporary NetBSD.)
     For shared mappings, we should conversely verify that changes get
!    propogated back to all the places they're supposed to be.
  
     Grep wants private fixed already mapped.
     The main things grep needs to know about mmap are:
     * does it exist and is it safe to write into the mmap'd area
     * how to use it (BSD variants)  */
! #include <sys/types.h>
  #include <fcntl.h>
  #include <sys/mman.h>
  
! /* This mess was copied from the GNU getpagesize.h.  */
! #ifndef HAVE_GETPAGESIZE
! # ifdef HAVE_UNISTD_H
! #  include <unistd.h>
! # endif
  
  /* Assume that all systems that can run configure have sys/param.h.  */
! # ifndef HAVE_SYS_PARAM_H
  #  define HAVE_SYS_PARAM_H 1
  # endif
  
  # ifdef _SC_PAGESIZE
  #  define getpagesize() sysconf(_SC_PAGESIZE)
  # else /* no _SC_PAGESIZE */
! #  ifdef HAVE_SYS_PARAM_H
  #   include <sys/param.h>
  #   ifdef EXEC_PAGESIZE
  #    define getpagesize() EXEC_PAGESIZE
--- 10855,10888 ----
     back from the file, nor mmap's back from the file at a different
     address.  (There have been systems where private was not correctly
     implemented like the infamous i386 svr4.0, and systems where the
!    VM page cache was not coherent with the file system buffer cache
     like early versions of FreeBSD and possibly contemporary NetBSD.)
     For shared mappings, we should conversely verify that changes get
!    propagated back to all the places they're supposed to be.
  
     Grep wants private fixed already mapped.
     The main things grep needs to know about mmap are:
     * does it exist and is it safe to write into the mmap'd area
     * how to use it (BSD variants)  */
! 
  #include <fcntl.h>
  #include <sys/mman.h>
  
! #if !STDC_HEADERS && !HAVE_STDLIB_H
! char *malloc ();
! #endif
  
+ /* This mess was copied from the GNU getpagesize.h.  */
+ #if !HAVE_GETPAGESIZE
  /* Assume that all systems that can run configure have sys/param.h.  */
! # if !HAVE_SYS_PARAM_H
  #  define HAVE_SYS_PARAM_H 1
  # endif
  
  # ifdef _SC_PAGESIZE
  #  define getpagesize() sysconf(_SC_PAGESIZE)
  # else /* no _SC_PAGESIZE */
! #  if HAVE_SYS_PARAM_H
  #   include <sys/param.h>
  #   ifdef EXEC_PAGESIZE
  #    define getpagesize() EXEC_PAGESIZE
***************
*** 7810,7920 ****
  
  #endif /* no HAVE_GETPAGESIZE */
  
- #ifdef __cplusplus
- extern "C" { void *malloc(unsigned); }
- #else
- char *malloc();
- #endif
- 
  int
! main()
  {
! 	char *data, *data2, *data3;
! 	int i, pagesize;
! 	int fd;
  
! 	pagesize = getpagesize();
  
! 	/*
! 	 * First, make a file with some known garbage in it.
! 	 */
! 	data = malloc(pagesize);
! 	if (!data)
! 		exit(1);
! 	for (i = 0; i < pagesize; ++i)
! 		*(data + i) = rand();
! 	umask(0);
! 	fd = creat("conftestmmap", 0600);
! 	if (fd < 0)
! 		exit(1);
! 	if (write(fd, data, pagesize) != pagesize)
! 		exit(1);
! 	close(fd);
  
! 	/*
! 	 * Next, try to mmap the file at a fixed address which
! 	 * already has something else allocated at it.  If we can,
! 	 * also make sure that we see the same garbage.
! 	 */
! 	fd = open("conftestmmap", O_RDWR);
! 	if (fd < 0)
! 		exit(1);
! 	data2 = malloc(2 * pagesize);
! 	if (!data2)
! 		exit(1);
! 	data2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);
! 	if (data2 != mmap(data2, pagesize, PROT_READ | PROT_WRITE,
! 	    MAP_PRIVATE | MAP_FIXED, fd, 0L))
! 		exit(1);
! 	for (i = 0; i < pagesize; ++i)
! 		if (*(data + i) != *(data2 + i))
! 			exit(1);
  
! 	/*
! 	 * Finally, make sure that changes to the mapped area
! 	 * do not percolate back to the file as seen by read().
! 	 * (This is a bug on some variants of i386 svr4.0.)
! 	 */
! 	for (i = 0; i < pagesize; ++i)
! 		*(data2 + i) = *(data2 + i) + 1;
! 	data3 = malloc(pagesize);
! 	if (!data3)
! 		exit(1);
! 	if (read(fd, data3, pagesize) != pagesize)
! 		exit(1);
! 	for (i = 0; i < pagesize; ++i)
! 		if (*(data + i) != *(data3 + i))
! 			exit(1);
! 	close(fd);
! 	unlink("conftestmmap");
! 	exit(0);
  }
! 
! EOF
! if { (eval echo configure:7885: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
! then
    ac_cv_func_mmap_fixed_mapped=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -fr conftest*
!   ac_cv_func_mmap_fixed_mapped=no
  fi
! rm -fr conftest*
  fi
- 
  fi
! 
! echo "$ac_t""$ac_cv_func_mmap_fixed_mapped" 1>&6
  if test $ac_cv_func_mmap_fixed_mapped = yes; then
!   cat >> confdefs.h <<\EOF
  #define HAVE_MMAP 1
! EOF
  
  fi
  
! echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
! echo "configure:7908: checking return type of signal handlers" >&5
! if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7913 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <signal.h>
  #ifdef signal
! #undef signal
  #endif
  #ifdef __cplusplus
  extern "C" void (*signal (int, void (*)(int)))(int);
--- 10909,11016 ----
  
  #endif /* no HAVE_GETPAGESIZE */
  
  int
! main ()
  {
!   char *data, *data2, *data3;
!   int i, pagesize;
!   int fd;
  
!   pagesize = getpagesize ();
  
!   /* First, make a file with some known garbage in it. */
!   data = (char *) malloc (pagesize);
!   if (!data)
!     exit (1);
!   for (i = 0; i < pagesize; ++i)
!     *(data + i) = rand ();
!   umask (0);
!   fd = creat ("conftest.mmap", 0600);
!   if (fd < 0)
!     exit (1);
!   if (write (fd, data, pagesize) != pagesize)
!     exit (1);
!   close (fd);
  
!   /* Next, try to mmap the file at a fixed address which already has
!      something else allocated at it.  If we can, also make sure that
!      we see the same garbage.  */
!   fd = open ("conftest.mmap", O_RDWR);
!   if (fd < 0)
!     exit (1);
!   data2 = (char *) malloc (2 * pagesize);
!   if (!data2)
!     exit (1);
!   data2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);
!   if (data2 != mmap (data2, pagesize, PROT_READ | PROT_WRITE,
!                      MAP_PRIVATE | MAP_FIXED, fd, 0L))
!     exit (1);
!   for (i = 0; i < pagesize; ++i)
!     if (*(data + i) != *(data2 + i))
!       exit (1);
  
!   /* Finally, make sure that changes to the mapped area do not
!      percolate back to the file as seen by read().  (This is a bug on
!      some variants of i386 svr4.0.)  */
!   for (i = 0; i < pagesize; ++i)
!     *(data2 + i) = *(data2 + i) + 1;
!   data3 = (char *) malloc (pagesize);
!   if (!data3)
!     exit (1);
!   if (read (fd, data3, pagesize) != pagesize)
!     exit (1);
!   for (i = 0; i < pagesize; ++i)
!     if (*(data + i) != *(data3 + i))
!       exit (1);
!   close (fd);
!   exit (0);
  }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_func_mmap_fixed_mapped=yes
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_func_mmap_fixed_mapped=no
  fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  fi
! echo "$as_me:$LINENO: result: $ac_cv_func_mmap_fixed_mapped" >&5
! echo "${ECHO_T}$ac_cv_func_mmap_fixed_mapped" >&6
  if test $ac_cv_func_mmap_fixed_mapped = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define HAVE_MMAP 1
! _ACEOF
  
  fi
+ rm -f conftest.mmap
  
! echo "$as_me:$LINENO: checking return type of signal handlers" >&5
! echo $ECHO_N "checking return type of signal handlers... $ECHO_C" >&6
! if test "${ac_cv_type_signal+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <signal.h>
  #ifdef signal
! # undef signal
  #endif
  #ifdef __cplusplus
  extern "C" void (*signal (int, void (*)(int)))(int);
***************
*** 7922,8011 ****
  void (*signal ()) ();
  #endif
  
! int main() {
  int i;
! ; return 0; }
! EOF
! if { (eval echo configure:7930: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
!   rm -rf conftest*
    ac_cv_type_signal=void
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   ac_cv_type_signal=int
  fi
! rm -f conftest*
  fi
  
! echo "$ac_t""$ac_cv_type_signal" 1>&6
! cat >> confdefs.h <<EOF
  #define RETSIGTYPE $ac_cv_type_signal
! EOF
  
  
! echo $ac_n "checking whether utime accepts a null argument""... $ac_c" 1>&6
! echo "configure:7949: checking whether utime accepts a null argument" >&5
! if eval "test \"`echo '$''{'ac_cv_func_utime_null'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   rm -f conftestdata; > conftestdata
  # Sequent interprets utime(file, 0) to mean use start of epoch.  Wrong.
  if test "$cross_compiling" = yes; then
    ac_cv_func_utime_null=no
  else
!   cat > conftest.$ac_ext <<EOF
! #line 7959 "configure"
  #include "confdefs.h"
! #include <sys/types.h>
! #include <sys/stat.h>
! main() {
  struct stat s, t;
! exit(!(stat ("conftestdata", &s) == 0 && utime("conftestdata", (long *)0) == 0
! && stat("conftestdata", &t) == 0 && t.st_mtime >= s.st_mtime
! && t.st_mtime - s.st_mtime < 120));
  }
! EOF
! if { (eval echo configure:7970: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
! then
    ac_cv_func_utime_null=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -fr conftest*
!   ac_cv_func_utime_null=no
  fi
! rm -fr conftest*
  fi
- 
  rm -f core core.* *.core
  fi
! 
! echo "$ac_t""$ac_cv_func_utime_null" 1>&6
  if test $ac_cv_func_utime_null = yes; then
!   cat >> confdefs.h <<\EOF
  #define HAVE_UTIME_NULL 1
! EOF
  
  fi
  
! echo $ac_n "checking for wait3 that fills in rusage""... $ac_c" 1>&6
! echo "configure:7994: checking for wait3 that fills in rusage" >&5
! if eval "test \"`echo '$''{'ac_cv_func_wait3_rusage'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test "$cross_compiling" = yes; then
    ac_cv_func_wait3_rusage=no
  else
!   cat > conftest.$ac_ext <<EOF
! #line 8002 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/time.h>
  #include <sys/resource.h>
  #include <stdio.h>
  /* HP-UX has wait3 but does not fill in rusage at all.  */
! main() {
    struct rusage r;
    int i;
    /* Use a field that we can force nonzero --
--- 11018,11151 ----
  void (*signal ()) ();
  #endif
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  int i;
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_type_signal=void
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_type_signal=int
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
  fi
+ echo "$as_me:$LINENO: result: $ac_cv_type_signal" >&5
+ echo "${ECHO_T}$ac_cv_type_signal" >&6
  
! cat >>confdefs.h <<_ACEOF
  #define RETSIGTYPE $ac_cv_type_signal
! _ACEOF
  
  
! echo "$as_me:$LINENO: checking whether utime accepts a null argument" >&5
! echo $ECHO_N "checking whether utime accepts a null argument... $ECHO_C" >&6
! if test "${ac_cv_func_utime_null+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   rm -f conftest.data; >conftest.data
  # Sequent interprets utime(file, 0) to mean use start of epoch.  Wrong.
  if test "$cross_compiling" = yes; then
    ac_cv_func_utime_null=no
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
  struct stat s, t;
!   exit (!(stat ("conftest.data", &s) == 0
!           && utime ("conftest.data", (long *)0) == 0
!           && stat ("conftest.data", &t) == 0
!           && t.st_mtime >= s.st_mtime
!           && t.st_mtime - s.st_mtime < 120));
!   ;
!   return 0;
  }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_func_utime_null=yes
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_func_utime_null=no
  fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  rm -f core core.* *.core
  fi
! echo "$as_me:$LINENO: result: $ac_cv_func_utime_null" >&5
! echo "${ECHO_T}$ac_cv_func_utime_null" >&6
  if test $ac_cv_func_utime_null = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define HAVE_UTIME_NULL 1
! _ACEOF
  
  fi
+ rm -f conftest.data
  
! echo "$as_me:$LINENO: checking for wait3 that fills in rusage" >&5
! echo $ECHO_N "checking for wait3 that fills in rusage... $ECHO_C" >&6
! if test "${ac_cv_func_wait3_rusage+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test "$cross_compiling" = yes; then
    ac_cv_func_wait3_rusage=no
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/time.h>
  #include <sys/resource.h>
  #include <stdio.h>
  /* HP-UX has wait3 but does not fill in rusage at all.  */
! int
! main ()
! {
    struct rusage r;
    int i;
    /* Use a field that we can force nonzero --
***************
*** 8016,8183 ****
    r.ru_stime.tv_sec = 0;
    r.ru_stime.tv_usec = 0;
    r.ru_majflt = r.ru_minflt = 0;
!   switch (fork()) {
!   case 0: /* Child.  */
!     sleep(1); /* Give up the CPU.  */
!     _exit(0);
!   case -1: _exit(0); /* What can we do?  */
!   default: /* Parent.  */
!     wait3(&i, 0, &r);
!     sleep(2); /* Avoid "text file busy" from rm on fast HP-UX machines.  */
!     exit(r.ru_nvcsw == 0 && r.ru_majflt == 0 && r.ru_minflt == 0
! 	 && r.ru_stime.tv_sec == 0 && r.ru_stime.tv_usec == 0);
!   }
  }
! EOF
! if { (eval echo configure:8033: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
! then
    ac_cv_func_wait3_rusage=yes
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -fr conftest*
!   ac_cv_func_wait3_rusage=no
  fi
! rm -fr conftest*
  fi
- 
  fi
! 
! echo "$ac_t""$ac_cv_func_wait3_rusage" 1>&6
  if test $ac_cv_func_wait3_rusage = yes; then
!   cat >> confdefs.h <<\EOF
  #define HAVE_WAIT3 1
! EOF
  
  fi
  
  for ac_func in flock getcwd gethostname gettimeofday getusershell mkdir rmdir select socket strdup strstr strtoul setpgrp strchr memcpy
  do
! echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
! echo "configure:8058: checking for $ac_func" >&5
! if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 8063 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func(); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char $ac_func();
! 
! int main() {
  
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
  choke me
  #else
! $ac_func();
  #endif
  
! ; return 0; }
! EOF
! if { (eval echo configure:8086: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_func_$ac_func=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_func_$ac_func=no"
  fi
! rm -f conftest*
  fi
  
- if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-   echo "$ac_t""yes" 1>&6
-     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-   cat >> confdefs.h <<EOF
- #define $ac_tr_func 1
- EOF
-  
- else
-   echo "$ac_t""no" 1>&6
  fi
  done
  
! echo $ac_n "checking whether setpgrp takes no argument""... $ac_c" 1>&6
! echo "configure:8111: checking whether setpgrp takes no argument" >&5
! if eval "test \"`echo '$''{'ac_cv_func_setpgrp_void'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
    if test "$cross_compiling" = yes; then
!   { echo "configure: error: cannot check setpgrp if cross compiling" 1>&2; exit 1; }
  else
!   cat > conftest.$ac_ext <<EOF
! #line 8119 "configure"
  #include "confdefs.h"
! 
! #ifdef HAVE_UNISTD_H
! #include <unistd.h>
  #endif
  
! /*
!  * If this system has a BSD-style setpgrp, which takes arguments, exit
!  * successfully.
!  */
! main()
  {
!     if (setpgrp(1,1) == -1)
! 	exit(0);
!     else
! 	exit(1);
  }
! 
! EOF
! if { (eval echo configure:8139: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
! then
    ac_cv_func_setpgrp_void=no
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -fr conftest*
!   ac_cv_func_setpgrp_void=yes
  fi
! rm -fr conftest*
  fi
- 
- 
  fi
! 
! echo "$ac_t""$ac_cv_func_setpgrp_void" 1>&6
  if test $ac_cv_func_setpgrp_void = yes; then
!   cat >> confdefs.h <<\EOF
  #define SETPGRP_VOID 1
! EOF
  
  fi
  
  
  
! cat >> confdefs.h <<\EOF
  #define ADMIN_GRP 1
! EOF
  
  
  # Check whether --with-admin-group or --without-admin-group was given.
  if test "${with_admin_group+set}" = set; then
    withval="$with_admin_group"
    if test "$enableval" = "no"; then
! 		cat >> confdefs.h <<\EOF
  #define ADMIN_GRP 0
! EOF
  
! 		echo "$ac_t""disabling administrative group support" 1>&6
          fi
  
! fi
! 
  
  
  	AFS_LIBS=
--- 11156,11388 ----
    r.ru_stime.tv_sec = 0;
    r.ru_stime.tv_usec = 0;
    r.ru_majflt = r.ru_minflt = 0;
!   switch (fork ())
!     {
!     case 0: /* Child.  */
!       sleep(1); /* Give up the CPU.  */
!       _exit(0);
!       break;
!     case -1: /* What can we do?  */
!       _exit(0);
!       break;
!     default: /* Parent.  */
!       wait3(&i, 0, &r);
!       /* Avoid "text file busy" from rm on fast HP-UX machines.  */
!       sleep(2);
!       exit (r.ru_nvcsw == 0 && r.ru_majflt == 0 && r.ru_minflt == 0
! 	    && r.ru_stime.tv_sec == 0 && r.ru_stime.tv_usec == 0);
!     }
  }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_func_wait3_rusage=yes
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_func_wait3_rusage=no
  fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  fi
! echo "$as_me:$LINENO: result: $ac_cv_func_wait3_rusage" >&5
! echo "${ECHO_T}$ac_cv_func_wait3_rusage" >&6
  if test $ac_cv_func_wait3_rusage = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define HAVE_WAIT3 1
! _ACEOF
  
  fi
  
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
+ 
  for ac_func in flock getcwd gethostname gettimeofday getusershell mkdir rmdir select socket strdup strstr strtoul setpgrp strchr memcpy
  do
! as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
! echo "$as_me:$LINENO: checking for $ac_func" >&5
! echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
! if eval "test \"\${$as_ac_var+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char $ac_func (); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char $ac_func ();
! char (*f) ();
  
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
  choke me
  #else
! f = $ac_func;
  #endif
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   eval "$as_ac_var=yes"
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! eval "$as_ac_var=no"
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
  fi
+ echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+ echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+ if test `eval echo '${'$as_ac_var'}'` = yes; then
+   cat >>confdefs.h <<_ACEOF
+ #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+ _ACEOF
  
  fi
  done
  
! echo "$as_me:$LINENO: checking whether setpgrp takes no argument" >&5
! echo $ECHO_N "checking whether setpgrp takes no argument... $ECHO_C" >&6
! if test "${ac_cv_func_setpgrp_void+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
    if test "$cross_compiling" = yes; then
!   { { echo "$as_me:$LINENO: error: cannot check setpgrp when cross compiling" >&5
! echo "$as_me: error: cannot check setpgrp when cross compiling" >&2;}
!    { (exit 1); exit 1; }; }
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! #if HAVE_UNISTD_H
! # include <unistd.h>
  #endif
  
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
  {
! /* If this system has a BSD-style setpgrp which takes arguments,
!   setpgrp(1, 1) will fail with ESRCH and return -1, in that case
!   exit successfully. */
!   exit (setpgrp (1,1) == -1 ? 0 : 1);
!   ;
!   return 0;
  }
! _ACEOF
! rm -f conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
    ac_cv_func_setpgrp_void=no
  else
!   echo "$as_me: program exited with status $ac_status" >&5
! echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ( exit $ac_status )
! ac_cv_func_setpgrp_void=yes
  fi
! rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
  fi
  fi
! echo "$as_me:$LINENO: result: $ac_cv_func_setpgrp_void" >&5
! echo "${ECHO_T}$ac_cv_func_setpgrp_void" >&6
  if test $ac_cv_func_setpgrp_void = yes; then
! 
! cat >>confdefs.h <<\_ACEOF
  #define SETPGRP_VOID 1
! _ACEOF
  
  fi
  
  
  
! cat >>confdefs.h <<\_ACEOF
  #define ADMIN_GRP 1
! _ACEOF
! 
  
  
  # Check whether --with-admin-group or --without-admin-group was given.
  if test "${with_admin_group+set}" = set; then
    withval="$with_admin_group"
    if test "$enableval" = "no"; then
! 		cat >>confdefs.h <<\_ACEOF
  #define ADMIN_GRP 0
! _ACEOF
  
! 		echo "$as_me:$LINENO: result: disabling administrative group support" >&5
! echo "${ECHO_T}disabling administrative group support" >&6
          fi
  
! fi;
  
  
  	AFS_LIBS=
***************
*** 8186,8288 ****
  	# Check whether --enable-afs or --disable-afs was given.
  if test "${enable_afs+set}" = set; then
    enableval="$enable_afs"
!   
  			if test "x$enableval" = "xyes"; then
! 				echo $ac_n "checking for pioctl in -lafsauthent""... $ac_c" 1>&6
! echo "configure:8193: checking for pioctl in -lafsauthent" >&5
! ac_lib_var=`echo afsauthent'_'pioctl | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lafsauthent  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 8201 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char pioctl();
! 
! int main() {
! pioctl()
! ; return 0; }
! EOF
! if { (eval echo configure:8212: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo afsauthent | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lafsauthent $LIBS"
  
  else
!   echo "$ac_t""no" 1>&6
! { echo "configure: error: AFS installation not found" 1>&2; exit 1; }
! 				
  fi
  
  				AFS_LIBS=-lafsauthent
! 				cat >> confdefs.h <<\EOF
  #define AFS 1
! EOF
  
  			fi
- 		
- 	
- fi
  
  
! 	
! 	
  
  
  
  	PKGCONFDIR="${sysconfdir}/netatalk"
  
! 	# Check whether --with-pkgconfdir or --without-pkgconfdir was given.
  if test "${with_pkgconfdir+set}" = set; then
    withval="$with_pkgconfdir"
!   
  			if test "x$withval" != "x"; then
  				PKGCONFDIR="$withval"
  			fi
- 		
- 	
- fi
  
  
  	NLSDIR="${PKGCONFDIR}/nls"
  
! 	# Check whether --with-nls-dir or --without-nls-dir was given.
  if test "${with_nls_dir+set}" = set; then
    withval="$with_nls_dir"
!   
  			if test "x$withval" != "x"; then
  				NLSDIR = "$withval"
  			fi
- 		
- 	
- fi
  
  
! 	
! 	
  
  
  # Check whether --with-cracklib or --without-cracklib was given.
--- 11391,11514 ----
  	# Check whether --enable-afs or --disable-afs was given.
  if test "${enable_afs+set}" = set; then
    enableval="$enable_afs"
! 
  			if test "x$enableval" = "xyes"; then
! 
! echo "$as_me:$LINENO: checking for pioctl in -lafsauthent" >&5
! echo $ECHO_N "checking for pioctl in -lafsauthent... $ECHO_C" >&6
! if test "${ac_cv_lib_afsauthent_pioctl+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lafsauthent  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char pioctl ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! pioctl ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_afsauthent_pioctl=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_afsauthent_pioctl=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_afsauthent_pioctl" >&5
! echo "${ECHO_T}$ac_cv_lib_afsauthent_pioctl" >&6
! if test $ac_cv_lib_afsauthent_pioctl = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBAFSAUTHENT 1
! _ACEOF
  
    LIBS="-lafsauthent $LIBS"
  
  else
!   { { echo "$as_me:$LINENO: error: AFS installation not found" >&5
! echo "$as_me: error: AFS installation not found" >&2;}
!    { (exit 1); exit 1; }; }
! 
  fi
  
  				AFS_LIBS=-lafsauthent
! 				cat >>confdefs.h <<\_ACEOF
  #define AFS 1
! _ACEOF
  
  			fi
  
  
! fi;
! 
! 
! 
  
  
  
  	PKGCONFDIR="${sysconfdir}/netatalk"
  
! 
! # Check whether --with-pkgconfdir or --without-pkgconfdir was given.
  if test "${with_pkgconfdir+set}" = set; then
    withval="$with_pkgconfdir"
! 
  			if test "x$withval" != "x"; then
  				PKGCONFDIR="$withval"
  			fi
  
  
+ fi;
+ 
  	NLSDIR="${PKGCONFDIR}/nls"
  
! 
! # Check whether --with-nls-dir or --without-nls-dir was given.
  if test "${with_nls_dir+set}" = set; then
    withval="$with_nls_dir"
! 
  			if test "x$withval" != "x"; then
  				NLSDIR = "$withval"
  			fi
  
  
! fi;
! 
! 
! 
! 
  
  
  # Check whether --with-cracklib or --without-cracklib was given.
***************
*** 8290,8454 ****
    withval="$with_cracklib"
    if test "x$withval" != "xno" ; then
  		cracklib="$withval"
! 		echo $ac_n "checking for main in -lcrack""... $ac_c" 1>&6
! echo "configure:8295: checking for main in -lcrack" >&5
! ac_lib_var=`echo crack'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lcrack  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 8303 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:8310: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   cat >> confdefs.h <<\EOF
  #define USE_CRACKLIB 1
! EOF
!  
  			LIBS="$LIBS -lcrack"
! 			echo "$ac_t""enabling cracklib support" 1>&6
  			if test "$cracklib" = "yes"; then
  				cracklib="/usr/lib/cracklib_dict"
  			fi
! 			cat >> confdefs.h <<EOF
  #define _PATH_CRACKLIB "$cracklib"
! EOF
  
! 			echo "$ac_t""setting cracklib dictionary to $cracklib" 1>&6
  else
!   echo "$ac_t""no" 1>&6
! { echo "configure: error: cracklib not found!" 1>&2; exit 1; }
! 		
  fi
  
  	fi
  
! fi
! 
  
  # Check whether --enable-ddp or --disable-ddp was given.
  if test "${enable_ddp+set}" = set; then
    enableval="$enable_ddp"
!   if test "$enableval" = "no"; then 
! 		cat >> confdefs.h <<\EOF
  #define NO_DDP 1
! EOF
  
! 		echo "$ac_t""disabling DDP" 1>&6
  	fi
  
! fi
! 
  
  # Check whether --enable-debug or --disable-debug was given.
  if test "${enable_debug+set}" = set; then
    enableval="$enable_debug"
    if test "$enableval" != "no"; then
  		if test "$enableval" = "yes"; then
! 			cat >> confdefs.h <<\EOF
  #define DEBUG 1
! EOF
  
  		else
! 			cat >> confdefs.h <<EOF
  #define DEBUG $enableval
! EOF
  
! 		fi 
! 		echo "$ac_t""enabling debugging code" 1>&6
  	fi
  
! fi
! 
  
  
  
  # Check whether --enable-dropkludge or --disable-dropkludge was given.
  if test "${enable_dropkludge+set}" = set; then
    enableval="$enable_dropkludge"
!   if test "$enableval" = "yes"; then 
! 		cat >> confdefs.h <<\EOF
  #define DROPKLUDGE 1
! EOF
  
! 		echo "$ac_t""enabling experimental dropbox support" 1>&6
  	fi
  
! fi
! 
  
  # Check whether --enable-force-uidgid or --disable-force-uidgid was given.
  if test "${enable_force_uidgid+set}" = set; then
    enableval="$enable_force_uidgid"
    if test "$enableval" = "yes"; then
! 		cat >> confdefs.h <<\EOF
  #define FORCE_UIDGID 1
! EOF
  
! 		echo "$ac_t""enabling forcing of uid/gid per volume" 1>&6
  	fi
  
! fi
! 
  
  db3_required=no
  
  
! echo $ac_n "checking for DID scheme to use""... $ac_c" 1>&6
! echo "configure:8419: checking for DID scheme to use" >&5
  # Check whether --with-did or --without-did was given.
  if test "${with_did+set}" = set; then
    withval="$with_did"
!    did_scheme="$withval" 
  else
!    did_scheme="last" 
! 
! fi
  
  
  if test "x$did_scheme" = "xlast"; then
! 	cat >> confdefs.h <<\EOF
  #define USE_LASTDID 1
! EOF
  
! 	echo "$ac_t""last" 1>&6
  elif test "x$did_scheme" = "xhash"; then
! 	echo "$ac_t""device/inode-based hashing" 1>&6
  elif test "x$did_scheme" = "xmtab"; then
! 	cat >> confdefs.h <<\EOF
  #define DID_MTAB 1
! EOF
  
! 	echo "$ac_t""mtab-based DID creation support" 1>&6
  elif test "x$did_scheme" = "xcnid"; then
  	db3_required="yes"
! 	cat >> confdefs.h <<\EOF
  #define CNID_DB 1
! EOF
  
! 	echo "$ac_t""enabling build with CNID DB support" 1>&6
  else
! 	{ echo "configure: error: unknown DID scheme" 1>&2; exit 1; }
  fi
  
  
--- 11516,11708 ----
    withval="$with_cracklib"
    if test "x$withval" != "xno" ; then
  		cracklib="$withval"
! 		echo "$as_me:$LINENO: checking for main in -lcrack" >&5
! echo $ECHO_N "checking for main in -lcrack... $ECHO_C" >&6
! if test "${ac_cv_lib_crack_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lcrack  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_crack_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_crack_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_crack_main" >&5
! echo "${ECHO_T}$ac_cv_lib_crack_main" >&6
! if test $ac_cv_lib_crack_main = yes; then
!   cat >>confdefs.h <<\_ACEOF
  #define USE_CRACKLIB 1
! _ACEOF
! 
  			LIBS="$LIBS -lcrack"
! 			echo "$as_me:$LINENO: result: enabling cracklib support" >&5
! echo "${ECHO_T}enabling cracklib support" >&6
  			if test "$cracklib" = "yes"; then
  				cracklib="/usr/lib/cracklib_dict"
  			fi
! 
! cat >>confdefs.h <<_ACEOF
  #define _PATH_CRACKLIB "$cracklib"
! _ACEOF
  
! 			echo "$as_me:$LINENO: result: setting cracklib dictionary to $cracklib" >&5
! echo "${ECHO_T}setting cracklib dictionary to $cracklib" >&6
  else
!   { { echo "$as_me:$LINENO: error: cracklib not found!" >&5
! echo "$as_me: error: cracklib not found!" >&2;}
!    { (exit 1); exit 1; }; }
! 
  fi
  
  	fi
  
! fi;
  
  # Check whether --enable-ddp or --disable-ddp was given.
  if test "${enable_ddp+set}" = set; then
    enableval="$enable_ddp"
!   if test "$enableval" = "no"; then
! 		cat >>confdefs.h <<\_ACEOF
  #define NO_DDP 1
! _ACEOF
  
! 		echo "$as_me:$LINENO: result: disabling DDP" >&5
! echo "${ECHO_T}disabling DDP" >&6
  	fi
  
! fi;
  
  # Check whether --enable-debug or --disable-debug was given.
  if test "${enable_debug+set}" = set; then
    enableval="$enable_debug"
    if test "$enableval" != "no"; then
  		if test "$enableval" = "yes"; then
! 			cat >>confdefs.h <<\_ACEOF
  #define DEBUG 1
! _ACEOF
  
  		else
! 			cat >>confdefs.h <<_ACEOF
  #define DEBUG $enableval
! _ACEOF
  
! 		fi
! 		echo "$as_me:$LINENO: result: enabling debugging code" >&5
! echo "${ECHO_T}enabling debugging code" >&6
  	fi
  
! fi;
  
  
  
  # Check whether --enable-dropkludge or --disable-dropkludge was given.
  if test "${enable_dropkludge+set}" = set; then
    enableval="$enable_dropkludge"
!   if test "$enableval" = "yes"; then
! 		cat >>confdefs.h <<\_ACEOF
  #define DROPKLUDGE 1
! _ACEOF
  
! 		echo "$as_me:$LINENO: result: enabling experimental dropbox support" >&5
! echo "${ECHO_T}enabling experimental dropbox support" >&6
  	fi
  
! fi;
  
  # Check whether --enable-force-uidgid or --disable-force-uidgid was given.
  if test "${enable_force_uidgid+set}" = set; then
    enableval="$enable_force_uidgid"
    if test "$enableval" = "yes"; then
! 		cat >>confdefs.h <<\_ACEOF
  #define FORCE_UIDGID 1
! _ACEOF
  
! 		echo "$as_me:$LINENO: result: enabling forcing of uid/gid per volume" >&5
! echo "${ECHO_T}enabling forcing of uid/gid per volume" >&6
  	fi
  
! fi;
  
  db3_required=no
  
  
! echo "$as_me:$LINENO: checking for DID scheme to use" >&5
! echo $ECHO_N "checking for DID scheme to use... $ECHO_C" >&6
! 
  # Check whether --with-did or --without-did was given.
  if test "${with_did+set}" = set; then
    withval="$with_did"
!    did_scheme="$withval"
  else
!    did_scheme="last"
  
+ fi;
  
  if test "x$did_scheme" = "xlast"; then
! 	cat >>confdefs.h <<\_ACEOF
  #define USE_LASTDID 1
! _ACEOF
  
! 	echo "$as_me:$LINENO: result: last" >&5
! echo "${ECHO_T}last" >&6
  elif test "x$did_scheme" = "xhash"; then
! 	echo "$as_me:$LINENO: result: device/inode-based hashing" >&5
! echo "${ECHO_T}device/inode-based hashing" >&6
  elif test "x$did_scheme" = "xmtab"; then
! 	cat >>confdefs.h <<\_ACEOF
  #define DID_MTAB 1
! _ACEOF
  
! 	echo "$as_me:$LINENO: result: mtab-based DID creation support" >&5
! echo "${ECHO_T}mtab-based DID creation support" >&6
  elif test "x$did_scheme" = "xcnid"; then
  	db3_required="yes"
! 	cat >>confdefs.h <<\_ACEOF
  #define CNID_DB 1
! _ACEOF
  
! 	echo "$as_me:$LINENO: result: enabling build with CNID DB support" >&5
! echo "${ECHO_T}enabling build with CNID DB support" >&6
  else
! 	{ { echo "$as_me:$LINENO: error: unknown DID scheme" >&5
! echo "$as_me: error: unknown DID scheme" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  
***************
*** 8461,8477 ****
  fi
  
  if test "x$db3_required" = "xyes"; then
! 	
  	trydb3dir=""
! 	# Check whether --with-db3 or --without-db3 was given.
  if test "${with_db3+set}" = set; then
    withval="$with_db3"
    if test "x$withval" != "xno"; then
  			trydb3dir="$withval"
  		fi
- 	
- fi
  
  
  	db3found=no
  	for db3dir in "" "$trydb3dir" "$trydb3dir/include" "$trydb3dir/include/db3" "/usr/local/BerkeleyDB.3.3/include" "/usr/local/include/db3" "/usr/local/include" "/usr/include/db3" "/usr/include" ; do
--- 11715,11731 ----
  fi
  
  if test "x$db3_required" = "xyes"; then
! 
  	trydb3dir=""
! 
! # Check whether --with-db3 or --without-db3 was given.
  if test "${with_db3+set}" = set; then
    withval="$with_db3"
    if test "x$withval" != "xno"; then
  			trydb3dir="$withval"
  		fi
  
+ fi;
  
  	db3found=no
  	for db3dir in "" "$trydb3dir" "$trydb3dir/include" "$trydb3dir/include/db3" "/usr/local/BerkeleyDB.3.3/include" "/usr/local/include/db3" "/usr/local/include" "/usr/include/db3" "/usr/include" ; do
***************
*** 8483,8527 ****
  			savedldflags="$LDFLAGS"
  			CFLAGS="$CFLAGS -I$db3dir"
  			LDFLAGS="-L$db3libdir $LDFLAGS"
! 			echo $ac_n "checking for main in -ldb""... $ac_c" 1>&6
! echo "configure:8488: checking for main in -ldb" >&5
! ac_lib_var=`echo db'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ldb  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 8496 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:8503: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   
  				db3found=yes
  				DB3_CFLAGS="-I$db3dir"
  				DB3_LIBS="-L$db3libdir -ldb"
  				DB3_PATH="`echo $db3dir | sed 's,include/db3$,,'`"
! 			
! else
!   echo "$ac_t""no" 1>&6
  fi
  
  			CFLAGS="$savedcflags"
--- 11737,11798 ----
  			savedldflags="$LDFLAGS"
  			CFLAGS="$CFLAGS -I$db3dir"
  			LDFLAGS="-L$db3libdir $LDFLAGS"
! 			echo "$as_me:$LINENO: checking for main in -ldb" >&5
! echo $ECHO_N "checking for main in -ldb... $ECHO_C" >&6
! if test "${ac_cv_lib_db_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldb  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_db_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_db_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_db_main" >&5
! echo "${ECHO_T}$ac_cv_lib_db_main" >&6
! if test $ac_cv_lib_db_main = yes; then
! 
  				db3found=yes
  				DB3_CFLAGS="-I$db3dir"
  				DB3_LIBS="-L$db3libdir -ldb"
  				DB3_PATH="`echo $db3dir | sed 's,include/db3$,,'`"
! 
  fi
  
  			CFLAGS="$savedcflags"
***************
*** 8533,8589 ****
  	if test "x$db3found" = "xyes"; then
  		:
  	else
! 		{ echo "configure: error: Berkeley DB3 library not found!" 1>&2; exit 1; }     
  	fi
  
! 	
! 	
! 	
  
  fi
  
  
  	QUOTA_LIBS=
! 	echo $ac_n "checking for main in -lrpcsvc""... $ac_c" 1>&6
! echo "configure:8549: checking for main in -lrpcsvc" >&5
! ac_lib_var=`echo rpcsvc'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lrpcsvc  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 8557 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:8564: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    QUOTA_LIBS=-lrpcsvc
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! 	
  
  
  msg_dir=""
  # Check whether --with-message-dir or --without-message-dir was given.
  if test "${with_message_dir+set}" = set; then
    withval="$with_message_dir"
--- 11804,11880 ----
  	if test "x$db3found" = "xyes"; then
  		:
  	else
! 		{ { echo "$as_me:$LINENO: error: Berkeley DB3 library not found!" >&5
! echo "$as_me: error: Berkeley DB3 library not found!" >&2;}
!    { (exit 1); exit 1; }; }
  	fi
  
! 
! 
! 
  
  fi
  
  
  	QUOTA_LIBS=
! 	echo "$as_me:$LINENO: checking for main in -lrpcsvc" >&5
! echo $ECHO_N "checking for main in -lrpcsvc... $ECHO_C" >&6
! if test "${ac_cv_lib_rpcsvc_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lrpcsvc  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_rpcsvc_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_rpcsvc_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_rpcsvc_main" >&5
! echo "${ECHO_T}$ac_cv_lib_rpcsvc_main" >&6
! if test $ac_cv_lib_rpcsvc_main = yes; then
    QUOTA_LIBS=-lrpcsvc
  fi
  
! 
  
  
  msg_dir=""
+ 
  # Check whether --with-message-dir or --without-message-dir was given.
  if test "${with_message_dir+set}" = set; then
    withval="$with_message_dir"
***************
*** 8591,8606 ****
  		if test x"$msg_dir" = "x"; then
  			msg_dir="${PKGCONFDIR}/msg"
  		fi
! 		cat >> confdefs.h <<EOF
  #define SERVERTEXT "$msg_dir"
! EOF
  
  		SERVERTEXT="$msg_dir"
- 		s%@SERVERTEXT@%$SERVERTEXT%g
- 
  
- fi
  
  
  
  
--- 11882,11896 ----
  		if test x"$msg_dir" = "x"; then
  			msg_dir="${PKGCONFDIR}/msg"
  		fi
! 
! cat >>confdefs.h <<_ACEOF
  #define SERVERTEXT "$msg_dir"
! _ACEOF
  
  		SERVERTEXT="$msg_dir"
  
  
+ fi;
  
  
  
***************
*** 8613,8621 ****
    srvloc=$enableval
  else
    srvloc=no
- 	
- fi
  
  
  	if test "x$srvloc" != "xno"; then
  
--- 11903,11910 ----
    srvloc=$enableval
  else
    srvloc=no
  
+ fi;
  
  	if test "x$srvloc" != "xno"; then
  
***************
*** 8627,8722 ****
  		CPPFLAGS="$CPPFLAGS -I$srvloc/include"
  		LDFLAGS="$LDFLAGS -L$srvloc/lib"
  
! 		echo $ac_n "checking for slp.h""... $ac_c" 1>&6
! echo "configure:8632: checking for slp.h" >&5
! 		cat > conftest.$ac_ext <<EOF
! #line 8634 "configure"
  #include "confdefs.h"
  #include <slp.h>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:8639: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   echo "$ac_t""yes" 1>&6
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   
! 				echo "$ac_t""no" 1>&6
! 				{ echo "configure: error: SLP installation not found" 1>&2; exit 1; }
! 			
! 		
  fi
! rm -f conftest*
! 		echo $ac_n "checking for SLPOpen in -lslp""... $ac_c" 1>&6
! echo "configure:8657: checking for SLPOpen in -lslp" >&5
! ac_lib_var=`echo slp'_'SLPOpen | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lslp  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 8665 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char SLPOpen();
! 
! int main() {
! SLPOpen()
! ; return 0; }
! EOF
! if { (eval echo configure:8676: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   
  			SLP_LIBS="-L$srvloc/lib -lslp"
  			SLP_CFLAGS="-I$srvloc/include"
! 		
  else
!   echo "$ac_t""no" 1>&6
! { echo "configure: error: SLP installation not found" 1>&2; exit 1; }
  fi
  
  
! 		cat >> confdefs.h <<\EOF
  #define USE_SRVLOC 1
! EOF
  
  
  		CPPFLAGS="$savedcppflags"
  		LDFLAGS="$savedldflags"
  	fi
  
- 	
- 	
  
  
  
! 	echo $ac_n "checking for PAM""... $ac_c" 1>&6
! echo "configure:8716: checking for PAM" >&5
! 	# Check whether --with-pam or --without-pam was given.
  if test "${with_pam+set}" = set; then
    withval="$with_pam"
!   
  			require_pam="yes"
  			if test "x$withval" = "xno"; then
  				PAMDIR="NONE"
--- 11916,12048 ----
  		CPPFLAGS="$CPPFLAGS -I$srvloc/include"
  		LDFLAGS="$LDFLAGS -L$srvloc/lib"
  
! 		echo "$as_me:$LINENO: checking for slp.h" >&5
! echo $ECHO_N "checking for slp.h... $ECHO_C" >&6
! 		cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  #include <slp.h>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
  else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
! else
!   echo "$as_me: failed program was:" >&5
    cat conftest.$ac_ext >&5
! 
! 				echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! 				{ { echo "$as_me:$LINENO: error: SLP installation not found" >&5
! echo "$as_me: error: SLP installation not found" >&2;}
!    { (exit 1); exit 1; }; }
! 
! 
  fi
! rm -f conftest.err conftest.$ac_ext
! 		echo "$as_me:$LINENO: checking for SLPOpen in -lslp" >&5
! echo $ECHO_N "checking for SLPOpen in -lslp... $ECHO_C" >&6
! if test "${ac_cv_lib_slp_SLPOpen+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lslp  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char SLPOpen ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! SLPOpen ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_slp_SLPOpen=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_slp_SLPOpen=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_slp_SLPOpen" >&5
! echo "${ECHO_T}$ac_cv_lib_slp_SLPOpen" >&6
! if test $ac_cv_lib_slp_SLPOpen = yes; then
! 
  			SLP_LIBS="-L$srvloc/lib -lslp"
  			SLP_CFLAGS="-I$srvloc/include"
! 
  else
!   { { echo "$as_me:$LINENO: error: SLP installation not found" >&5
! echo "$as_me: error: SLP installation not found" >&2;}
!    { (exit 1); exit 1; }; }
  fi
  
  
! 		cat >>confdefs.h <<\_ACEOF
  #define USE_SRVLOC 1
! _ACEOF
  
  
  		CPPFLAGS="$savedcppflags"
  		LDFLAGS="$savedldflags"
  	fi
  
  
  
  
! 
! 
! 	echo "$as_me:$LINENO: checking for PAM" >&5
! echo $ECHO_N "checking for PAM... $ECHO_C" >&6
! 
! # Check whether --with-pam or --without-pam was given.
  if test "${with_pam+set}" = set; then
    withval="$with_pam"
! 
  			require_pam="yes"
  			if test "x$withval" = "xno"; then
  				PAMDIR="NONE"
***************
*** 8726,8737 ****
  			else
  				PAMDIR="$withval"
  			fi
! 		
  else
    PAMDIR="NONE";require_pam="no"
- 	
- fi
  
  
  	if test "x$PAMDIR" = "xNONE" -a "x$require_pam" != "xnever"; then
  				pam_paths="/ /usr /usr/local"
--- 12052,12062 ----
  			else
  				PAMDIR="$withval"
  			fi
! 
  else
    PAMDIR="NONE";require_pam="no"
  
+ fi;
  
  	if test "x$PAMDIR" = "xNONE" -a "x$require_pam" != "xnever"; then
  				pam_paths="/ /usr /usr/local"
***************
*** 8748,8861 ****
  
  	pam_found="no"
  	if test "x$PAMDIR" != "xNONE"; then
! 		echo "$ac_t""yes (path: $PAMDIR)" 1>&6
! 		ac_safe=`echo "security/pam_appl.h" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for security/pam_appl.h""... $ac_c" 1>&6
! echo "configure:8755: checking for security/pam_appl.h" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 8760 "configure"
  #include "confdefs.h"
  #include <security/pam_appl.h>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:8765: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   
! 			echo $ac_n "checking for pam_set_item in -lpam""... $ac_c" 1>&6
! echo "configure:8783: checking for pam_set_item in -lpam" >&5
! ac_lib_var=`echo pam'_'pam_set_item | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lpam  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 8791 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char pam_set_item();
! 
! int main() {
! pam_set_item()
! ; return 0; }
! EOF
! if { (eval echo configure:8802: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   
  				PAM_CFLAGS="-I$PAMDIR/include"
  				PAM_LIBS="-L$PAMDIR/lib -lpam"
  				pam_found="yes"
! 			
! else
!   echo "$ac_t""no" 1>&6
  fi
  
! 		
! else
!   echo "$ac_t""no" 1>&6
  fi
  
  	else
! 		echo "$ac_t""no" 1>&6
  	fi
  
  	if test "x$pam_found" = "xno"; then
  		if test "x$require_pam" = "xyes"; then
! 			{ echo "configure: error: PAM support missing" 1>&2; exit 1; }
  		fi
  		:
  	else
! 		
  	PAPD_LIBS="$PAPD_LIBS $PAM_LIBS"
  	AFPD_LIBS="$AFPD_LIBS $PAM_LIBS"
  	use_pam_so=yes
  	compile_pam=yes
! 	cat >> confdefs.h <<\EOF
  #define USE_PAM 1
! EOF
  
  
  	fi
  
- 	
- 	
- 	
  
  
! echo $ac_n "checking whether shadow support should be enabled""... $ac_c" 1>&6
! echo "configure:8859: checking whether shadow support should be enabled" >&5
  # Check whether --with-shadow or --without-shadow was given.
  if test "${with_shadow+set}" = set; then
    withval="$with_shadow"
--- 12073,12283 ----
  
  	pam_found="no"
  	if test "x$PAMDIR" != "xNONE"; then
! 		echo "$as_me:$LINENO: result: yes (path: $PAMDIR)" >&5
! echo "${ECHO_T}yes (path: $PAMDIR)" >&6
! 		if test "${ac_cv_header_security_pam_appl_h+set}" = set; then
!   echo "$as_me:$LINENO: checking for security/pam_appl.h" >&5
! echo $ECHO_N "checking for security/pam_appl.h... $ECHO_C" >&6
! if test "${ac_cv_header_security_pam_appl_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: $ac_cv_header_security_pam_appl_h" >&5
! echo "${ECHO_T}$ac_cv_header_security_pam_appl_h" >&6
  else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking security/pam_appl.h usability" >&5
! echo $ECHO_N "checking security/pam_appl.h usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ $ac_includes_default
  #include <security/pam_appl.h>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
! fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking security/pam_appl.h presence" >&5
! echo $ECHO_N "checking security/pam_appl.h presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <security/pam_appl.h>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
! fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
! else
!   echo "$as_me: failed program was:" >&5
    cat conftest.$ac_ext >&5
!   ac_header_preproc=no
  fi
! rm -f conftest.err conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
! echo "${ECHO_T}$ac_header_preproc" >&6
! 
! # So?  What about this header?
! case $ac_header_compiler:$ac_header_preproc in
!   yes:no )
!     { echo "$as_me:$LINENO: WARNING: security/pam_appl.h: accepted by the compiler, rejected by the preprocessor!" >&5
! echo "$as_me: WARNING: security/pam_appl.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
!     { echo "$as_me:$LINENO: WARNING: security/pam_appl.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: security/pam_appl.h: proceeding with the preprocessor's result" >&2;};;
!   no:yes )
!     { echo "$as_me:$LINENO: WARNING: security/pam_appl.h: present but cannot be compiled" >&5
! echo "$as_me: WARNING: security/pam_appl.h: present but cannot be compiled" >&2;}
!     { echo "$as_me:$LINENO: WARNING: security/pam_appl.h: check for missing prerequisite headers?" >&5
! echo "$as_me: WARNING: security/pam_appl.h: check for missing prerequisite headers?" >&2;}
!     { echo "$as_me:$LINENO: WARNING: security/pam_appl.h: proceeding with the preprocessor's result" >&5
! echo "$as_me: WARNING: security/pam_appl.h: proceeding with the preprocessor's result" >&2;};;
! esac
! echo "$as_me:$LINENO: checking for security/pam_appl.h" >&5
! echo $ECHO_N "checking for security/pam_appl.h... $ECHO_C" >&6
! if test "${ac_cv_header_security_pam_appl_h+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! else
!   ac_cv_header_security_pam_appl_h=$ac_header_preproc
  fi
! echo "$as_me:$LINENO: result: $ac_cv_header_security_pam_appl_h" >&5
! echo "${ECHO_T}$ac_cv_header_security_pam_appl_h" >&6
! 
! fi
! if test $ac_cv_header_security_pam_appl_h = yes; then
! 
! 			echo "$as_me:$LINENO: checking for pam_set_item in -lpam" >&5
! echo $ECHO_N "checking for pam_set_item in -lpam... $ECHO_C" >&6
! if test "${ac_cv_lib_pam_pam_set_item+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lpam  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char pam_set_item ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! pam_set_item ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_pam_pam_set_item=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_pam_pam_set_item=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_pam_pam_set_item" >&5
! echo "${ECHO_T}$ac_cv_lib_pam_pam_set_item" >&6
! if test $ac_cv_lib_pam_pam_set_item = yes; then
! 
  				PAM_CFLAGS="-I$PAMDIR/include"
  				PAM_LIBS="-L$PAMDIR/lib -lpam"
  				pam_found="yes"
! 
  fi
  
! 
  fi
  
+ 
  	else
! 		echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  	fi
  
  	if test "x$pam_found" = "xno"; then
  		if test "x$require_pam" = "xyes"; then
! 			{ { echo "$as_me:$LINENO: error: PAM support missing" >&5
! echo "$as_me: error: PAM support missing" >&2;}
!    { (exit 1); exit 1; }; }
  		fi
  		:
  	else
! 
  	PAPD_LIBS="$PAPD_LIBS $PAM_LIBS"
  	AFPD_LIBS="$AFPD_LIBS $PAM_LIBS"
  	use_pam_so=yes
  	compile_pam=yes
! 	cat >>confdefs.h <<\_ACEOF
  #define USE_PAM 1
! _ACEOF
  
  
  	fi
  
  
  
! 
! 
! 
! echo "$as_me:$LINENO: checking whether shadow support should be enabled" >&5
! echo $ECHO_N "checking whether shadow support should be enabled... $ECHO_C" >&6
! 
  # Check whether --with-shadow or --without-shadow was given.
  if test "${with_shadow+set}" = set; then
    withval="$with_shadow"
***************
*** 8863,8894 ****
  else
    shadowpw=no
  
! fi
! 
  if test "x$shadowpw" = "xyes"; then
! 	cat >> confdefs.h <<\EOF
  #define SHADOWPW 1
! EOF
  
  fi
! echo "$ac_t""$shadowpw" 1>&6
  
  # Check whether --enable-shell-check or --disable-shell-check was given.
  if test "${enable_shell_check+set}" = set; then
    enableval="$enable_shell_check"
!   if test "$enableval" = "no"; then 
! 		cat >> confdefs.h <<\EOF
  #define DISABLE_SHELLCHECK 1
! EOF
  
! 		echo "$ac_t""disabling valid shell check" 1>&6
  	fi
  
! fi
  
  
- echo $ac_n "checking whether flock locks should be enabled""... $ac_c" 1>&6
- echo "configure:8892: checking whether flock locks should be enabled" >&5
  # Check whether --with-flock-locks or --without-flock-locks was given.
  if test "${with_flock_locks+set}" = set; then
    withval="$with_flock_locks"
--- 12285,12317 ----
  else
    shadowpw=no
  
! fi;
  if test "x$shadowpw" = "xyes"; then
! 	cat >>confdefs.h <<\_ACEOF
  #define SHADOWPW 1
! _ACEOF
  
  fi
! echo "$as_me:$LINENO: result: $shadowpw" >&5
! echo "${ECHO_T}$shadowpw" >&6
  
  # Check whether --enable-shell-check or --disable-shell-check was given.
  if test "${enable_shell_check+set}" = set; then
    enableval="$enable_shell_check"
!   if test "$enableval" = "no"; then
! 		cat >>confdefs.h <<\_ACEOF
  #define DISABLE_SHELLCHECK 1
! _ACEOF
  
! 		echo "$as_me:$LINENO: result: disabling valid shell check" >&5
! echo "${ECHO_T}disabling valid shell check" >&6
  	fi
  
! fi;
  
+ echo "$as_me:$LINENO: checking whether flock locks should be enabled" >&5
+ echo $ECHO_N "checking whether flock locks should be enabled... $ECHO_C" >&6
  
  # Check whether --with-flock-locks or --without-flock-locks was given.
  if test "${with_flock_locks+set}" = set; then
    withval="$with_flock_locks"
***************
*** 8896,8974 ****
  else
    flock_locks="no"
  
! fi
! 
  if test "x$flock_locks" = "xyes"; then
! 	cat >> confdefs.h <<\EOF
  #define USE_FLOCK_LOCKS 1
! EOF
  
  fi
! echo "$ac_t""$flock_locks" 1>&6
  
  # Check whether --with-tcp-wrappers or --without-tcp-wrappers was given.
  if test "${with_tcp_wrappers+set}" = set; then
    withval="$with_tcp_wrappers"
!   echo $ac_n "checking for tcpd_warn in -lwrap""... $ac_c" 1>&6
! echo "configure:8914: checking for tcpd_warn in -lwrap" >&5
! ac_lib_var=`echo wrap'_'tcpd_warn | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lwrap  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 8922 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char tcpd_warn();
! 
! int main() {
! tcpd_warn()
! ; return 0; }
! EOF
! if { (eval echo configure:8933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!   cat >> confdefs.h <<\EOF
  #define TCPWRAP 1
! EOF
  
  		AFPD_LIBS="$AFPD_LIBS -lwrap"
! 		echo "$ac_t""enabling TCP wrappers support" 1>&6
! 	
! else
!   echo "$ac_t""no" 1>&6
! fi
! 
  
  fi
  
  
  # Check whether --enable-redhat or --disable-redhat was given.
  if test "${enable_redhat+set}" = set; then
    enableval="$enable_redhat"
    if test "$enableval" = "yes"; then
  		sysv_style=redhat
  	fi
! 	echo "$ac_t""enabling redhat-style sysv support" 1>&6
! 
! fi
  
  
  # Check whether --enable-suse or --disable-suse was given.
  if test "${enable_suse+set}" = set; then
--- 12319,12417 ----
  else
    flock_locks="no"
  
! fi;
  if test "x$flock_locks" = "xyes"; then
! 	cat >>confdefs.h <<\_ACEOF
  #define USE_FLOCK_LOCKS 1
! _ACEOF
  
  fi
! echo "$as_me:$LINENO: result: $flock_locks" >&5
! echo "${ECHO_T}$flock_locks" >&6
! 
  
  # Check whether --with-tcp-wrappers or --without-tcp-wrappers was given.
  if test "${with_tcp_wrappers+set}" = set; then
    withval="$with_tcp_wrappers"
!   echo "$as_me:$LINENO: checking for tcpd_warn in -lwrap" >&5
! echo $ECHO_N "checking for tcpd_warn in -lwrap... $ECHO_C" >&6
! if test "${ac_cv_lib_wrap_tcpd_warn+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lwrap  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char tcpd_warn ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! tcpd_warn ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_wrap_tcpd_warn=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_wrap_tcpd_warn=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_wrap_tcpd_warn" >&5
! echo "${ECHO_T}$ac_cv_lib_wrap_tcpd_warn" >&6
! if test $ac_cv_lib_wrap_tcpd_warn = yes; then
!   cat >>confdefs.h <<\_ACEOF
  #define TCPWRAP 1
! _ACEOF
  
  		AFPD_LIBS="$AFPD_LIBS -lwrap"
! 		echo "$as_me:$LINENO: result: enabling TCP wrappers support" >&5
! echo "${ECHO_T}enabling TCP wrappers support" >&6
  
  fi
  
  
+ fi;
+ 
  # Check whether --enable-redhat or --disable-redhat was given.
  if test "${enable_redhat+set}" = set; then
    enableval="$enable_redhat"
    if test "$enableval" = "yes"; then
  		sysv_style=redhat
  	fi
! 	echo "$as_me:$LINENO: result: enabling redhat-style sysv support" >&5
! echo "${ECHO_T}enabling redhat-style sysv support" >&6
  
+ fi;
  
  # Check whether --enable-suse or --disable-suse was given.
  if test "${enable_suse+set}" = set; then
***************
*** 8976,8985 ****
    if test "$enableval" = "yes"; then
  		sysv_style=suse
  	fi
! 	echo "$ac_t""enabling suse-style sysv support" 1>&6
! 
! fi
  
  
  # Check whether --enable-cobalt or --disable-cobalt was given.
  if test "${enable_cobalt+set}" = set; then
--- 12419,12428 ----
    if test "$enableval" = "yes"; then
  		sysv_style=suse
  	fi
! 	echo "$as_me:$LINENO: result: enabling suse-style sysv support" >&5
! echo "${ECHO_T}enabling suse-style sysv support" >&6
  
+ fi;
  
  # Check whether --enable-cobalt or --disable-cobalt was given.
  if test "${enable_cobalt+set}" = set; then
***************
*** 8987,8996 ****
    if test "$enableval" = "yes"; then
  		sysv_style=cobalt
  	fi
! 	echo "$ac_t""enabling cobalt-style sysv support" 1>&6
! 
! fi
  
  
  # Check whether --enable-netbsd or --disable-netbsd was given.
  if test "${enable_netbsd+set}" = set; then
--- 12430,12439 ----
    if test "$enableval" = "yes"; then
  		sysv_style=cobalt
  	fi
! 	echo "$as_me:$LINENO: result: enabling cobalt-style sysv support" >&5
! echo "${ECHO_T}enabling cobalt-style sysv support" >&6
  
+ fi;
  
  # Check whether --enable-netbsd or --disable-netbsd was given.
  if test "${enable_netbsd+set}" = set; then
***************
*** 8998,9010 ****
    if test "x$enableval" = "xyes"; then
  		sysv_style=netbsd
  	fi
! 	echo "$ac_t""enabling NetBSD-style rc.d support" 1>&6
! 
! fi
  
  
! echo $ac_n "checking whether timelord should be compiled""... $ac_c" 1>&6
! echo "configure:9008: checking whether timelord should be compiled" >&5
  compile_timelord=no
  # Check whether --enable-timelord or --disable-timelord was given.
  if test "${enable_timelord+set}" = set; then
--- 12441,12453 ----
    if test "x$enableval" = "xyes"; then
  		sysv_style=netbsd
  	fi
! 	echo "$as_me:$LINENO: result: enabling NetBSD-style rc.d support" >&5
! echo "${ECHO_T}enabling NetBSD-style rc.d support" >&6
  
+ fi;
  
! echo "$as_me:$LINENO: checking whether timelord should be compiled" >&5
! echo $ECHO_N "checking whether timelord should be compiled... $ECHO_C" >&6
  compile_timelord=no
  # Check whether --enable-timelord or --disable-timelord was given.
  if test "${enable_timelord+set}" = set; then
***************
*** 9013,9021 ****
  else
    compile_timelord="no"
  
! fi
  
- echo "$ac_t""$compile_timelord" 1>&6
  
  # Check whether --with-uams-path or --without-uams-path was given.
  if test "${with_uams_path+set}" = set; then
--- 12456,12465 ----
  else
    compile_timelord="no"
  
! fi;
! echo "$as_me:$LINENO: result: $compile_timelord" >&5
! echo "${ECHO_T}$compile_timelord" >&6
  
  
  # Check whether --with-uams-path or --without-uams-path was given.
  if test "${with_uams_path+set}" = set; then
***************
*** 9024,9031 ****
  else
    uams_path="${PKGCONFDIR}/uams"
  
! fi
! 
  
  
  # Check whether --enable-fhs or --disable-fhs was given.
--- 12468,12474 ----
  else
    uams_path="${PKGCONFDIR}/uams"
  
! fi;
  
  
  # Check whether --enable-fhs or --disable-fhs was given.
***************
*** 9037,9056 ****
  		PKGCONFDIR=${sysconfdir}/netatalk
  		use_pam_so=yes
  		mandir="/usr/share/man"
! 		cat >> confdefs.h <<\EOF
  #define FHS_COMPATIBILITY 1
! EOF
  
  	fi
! 	echo "$ac_t""enabling Filesystem Hierarchy Standard (FHS) compatibility" 1>&6
  
! fi
  
  
  
! cat >> confdefs.h <<EOF
  #define UAMS_PATH "${uams_path}"
! EOF
  
  UAMS_PATH="${uams_path}"
  
--- 12480,12500 ----
  		PKGCONFDIR=${sysconfdir}/netatalk
  		use_pam_so=yes
  		mandir="/usr/share/man"
! 		cat >>confdefs.h <<\_ACEOF
  #define FHS_COMPATIBILITY 1
! _ACEOF
  
  	fi
! 	echo "$as_me:$LINENO: result: enabling Filesystem Hierarchy Standard (FHS) compatibility" >&5
! echo "${ECHO_T}enabling Filesystem Hierarchy Standard (FHS) compatibility" >&6
  
! fi;
  
  
  
! cat >>confdefs.h <<_ACEOF
  #define UAMS_PATH "${uams_path}"
! _ACEOF
  
  UAMS_PATH="${uams_path}"
  
***************
*** 9084,9426 ****
  
  
  if test x"$this_os" = "xaix"; then
! 	echo "$ac_t"" * AIX specific configuration" 1>&6
! 	cat >> confdefs.h <<\EOF
  #define NO_STRUCT_TM_GMTOFF 1
! EOF
  
  
! 				cat >> confdefs.h <<\EOF
  #define HAVE_32BIT_LONGS 1
! EOF
  
  fi
  
! if test x"$this_os" = "xfreebsd"; then 
! 	echo "$ac_t"" * FreeBSD specific configuration" 1>&6
! 	cat >> confdefs.h <<\EOF
  #define BSD4_4 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define SENDFILE_FLAVOR_BSD 1
! EOF
  
  
! 	cat >> confdefs.h <<\EOF
  #define NO_CRYPT_H 1
! EOF
  
  fi
  
  if test x"$this_os" = "xhpux11"; then
! 	echo "$ac_t"" * HP-UX 11 specific configuration" 1>&6
  
! 	cat >> confdefs.h <<\EOF
  #define _ISOC9X_SOURCE 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define NO_STRUCT_TM_GMTOFF 1
! EOF
  
  fi
  
  if test x"$this_os" = "xirix"; then
! 	echo "$ac_t"" * IRIX specific configuration" 1>&6
  
! 	cat >> confdefs.h <<\EOF
  #define NO_STRUCT_TM_GMTOFF 1
! EOF
  
  fi
  
! if test x"$this_os" = "xlinux"; then 
! 	echo "$ac_t"" * Linux specific configuration" 1>&6
  
! 		for ac_hdr in sys/quota.h linux/quota.h
  do
! ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
! echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:9146: checking for $ac_hdr" >&5
! if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 9151 "configure"
  #include "confdefs.h"
! #include <$ac_hdr>
! EOF
! ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:9156: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
! ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
! if test -z "$ac_err"; then
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
  else
!   echo "$ac_err" >&5
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
! rm -f conftest*
  fi
! if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_hdr 1
! EOF
!  
  else
!   echo "$ac_t""no" 1>&6
  fi
  done
  
! 	echo $ac_n "checking for quotactl""... $ac_c" 1>&6
! echo "configure:9183: checking for quotactl" >&5
! if eval "test \"`echo '$''{'ac_cv_func_quotactl'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   cat > conftest.$ac_ext <<EOF
! #line 9188 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char quotactl(); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char quotactl();
! 
! int main() {
  
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_quotactl) || defined (__stub___quotactl)
  choke me
  #else
! quotactl();
  #endif
  
! ; return 0; }
! EOF
! if { (eval echo configure:9211: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_func_quotactl=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_func_quotactl=no"
  fi
! rm -f conftest*
  fi
! 
! if eval "test \"`echo '$ac_cv_func_'quotactl`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
    :
  else
!   echo "$ac_t""no" 1>&6
! cat >> confdefs.h <<\EOF
  #define NEED_QUOTACTL_WRAPPER 1
! EOF
  
- 		echo "$ac_t""enabling quotactl wrapper" 1>&6
- 	
  fi
  
  
! 				cat >> confdefs.h <<\EOF
  #define HAVE_BROKEN_DBTOB 1
! EOF
  
  
- 			
  	majorvers="`uname -r | sed 's/\([0-9]\)..*/\1/'`"
  	minorvers="`uname -r | sed 's/[0-9]\.\([0-9]\)\..*/\1/'`"
  	if [ $majorvers -ge 2 ]; then
  		if [ $minorvers -ge 2 ]; then
! 			
! 			echo "$ac_t"" * found Linux 2.2.x or higher" 1>&6
! 			cat >> confdefs.h <<\EOF
  #define SENDFILE_FLAVOR_LINUX 1
! EOF
  
  		else
! 			echo "$ac_t"" * found Linux 2.0.x " 1>&6 
  		fi
  	fi
  
! 		if test x"$this_cpu" = "xalpha"; then 
! 		echo "$ac_t""enabling gcc memcpy bug workaround" 1>&6
! 		cat >> confdefs.h <<\EOF
  #define HAVE_GCC_MEMCPY_BUG 1
! EOF
  
  	fi
  	need_dash_r=no
  fi
  
! if test x"$this_os" = "xmacosx"; then 
! 	echo "$ac_t"" * Mac OSX specific configuration" 1>&6
! 	cat >> confdefs.h <<\EOF
  #define BSD4_4 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define HAVE_BROKEN_CPP 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define HAVE_2ARG_DBTOB 1
! EOF
  
! 		cat >> confdefs.h <<\EOF
  #define MACOSX_SERVER 1
! EOF
  
  fi
  
! if test x"$this_os" = "xnetbsd"; then 
! 	echo "$ac_t"" * NetBSD specific configuration" 1>&6
! 	cat >> confdefs.h <<\EOF
  #define BSD4_4 1
! EOF
  
  	if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
  		# NetBSD ELF machines don't have to have DLSYM_PREPEND_UNDERSCORE.
  		# If this test is true, it's not an ELF box.
  		# This REALLY should be a configure test.
! 		cat >> confdefs.h <<\EOF
  #define DLSYM_PREPEND_UNDERSCORE 1
! EOF
  
  	fi
  	CFLAGS="-I\$(top_srcdir)/sys/netbsd -I/usr/include/kerberosIV $CFLAGS"
! 	need_dash_r=yes 
  
! 		cat >> confdefs.h <<\EOF
  #define UAM_DHX 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define NO_CRYPT_H 1
! EOF
  
  fi
  
! if test x"$this_os" = "xopenbsd"; then 
! 	echo "$ac_t"" * OpenBSD specific configuration" 1>&6
! 	cat >> confdefs.h <<\EOF
  #define BSD4_4 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define DLSYM_PREPEND_UNDERSCORE 1
! EOF
  
  
! 		cat >> confdefs.h <<\EOF
  #define UAM_DHX 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define NO_CRYPT_H 1
! EOF
  
  fi
  
! if test x"$this_os" = "xsolaris"; then 
! 	echo "$ac_t"" * Solaris specific configuration" 1>&6
! 	cat >> confdefs.h <<\EOF
  #define __svr4__ 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define _ISOC9X_SOURCE 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define NO_STRUCT_TM_GMTOFF 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define SOLARIS 1
! EOF
  
  	CFLAGS="-I\$(top_srcdir)/sys/generic $CFLAGS"
  	need_dash_r=yes
  
! 	echo "$ac_t""enabling Solaris kernel module build" 1>&6
  	solaris_module=yes
  fi
  
! if test x"$this_os" = "xtru64"; then 
! 	echo "$ac_t"" * Tru64 specific configuration" 1>&6
! 	cat >> confdefs.h <<\EOF
  #define NO_DDP 1
! EOF
  
! 	cat >> confdefs.h <<\EOF
  #define HAVE_64BIT_LONGS 1
! EOF
  
! 		cat >> confdefs.h <<\EOF
  #define USE_OLD_RQUOTA 1
! EOF
  
! 		cat >> confdefs.h <<\EOF
  #define TRU64 1
! EOF
  
! 	echo $ac_n "checking for set_auth_parameters in -lsecurity""... $ac_c" 1>&6
! echo "configure:9381: checking for set_auth_parameters in -lsecurity" >&5
! ac_lib_var=`echo security'_'set_auth_parameters | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lsecurity  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 9389 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
!     builtin and then its argument prototype would still apply.  */
! char set_auth_parameters();
! 
! int main() {
! set_auth_parameters()
! ; return 0; }
! EOF
! if { (eval echo configure:9400: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo security | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lsecurity $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
  	CFLAGS="-I\$(top_srcdir)/sys/tru64 $CFLAGS"
--- 12528,12999 ----
  
  
  if test x"$this_os" = "xaix"; then
! 	echo "$as_me:$LINENO: result:  * AIX specific configuration" >&5
! echo "${ECHO_T} * AIX specific configuration" >&6
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_STRUCT_TM_GMTOFF 1
! _ACEOF
  
  
! 				cat >>confdefs.h <<\_ACEOF
  #define HAVE_32BIT_LONGS 1
! _ACEOF
  
  fi
  
! if test x"$this_os" = "xfreebsd"; then
! 	echo "$as_me:$LINENO: result:  * FreeBSD specific configuration" >&5
! echo "${ECHO_T} * FreeBSD specific configuration" >&6
! 	cat >>confdefs.h <<\_ACEOF
  #define BSD4_4 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define SENDFILE_FLAVOR_BSD 1
! _ACEOF
  
  
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_CRYPT_H 1
! _ACEOF
  
  fi
  
  if test x"$this_os" = "xhpux11"; then
! 	echo "$as_me:$LINENO: result:  * HP-UX 11 specific configuration" >&5
! echo "${ECHO_T} * HP-UX 11 specific configuration" >&6
  
! 	cat >>confdefs.h <<\_ACEOF
  #define _ISOC9X_SOURCE 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_STRUCT_TM_GMTOFF 1
! _ACEOF
  
  fi
  
  if test x"$this_os" = "xirix"; then
! 	echo "$as_me:$LINENO: result:  * IRIX specific configuration" >&5
! echo "${ECHO_T} * IRIX specific configuration" >&6
  
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_STRUCT_TM_GMTOFF 1
! _ACEOF
  
  fi
  
! if test x"$this_os" = "xlinux"; then
! 	echo "$as_me:$LINENO: result:  * Linux specific configuration" >&5
! echo "${ECHO_T} * Linux specific configuration" >&6
  
! 
! 
! for ac_header in sys/quota.h linux/quota.h
  do
! as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo "$as_me:$LINENO: checking for $ac_header" >&5
! echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
! if eval "test \"\${$as_ac_Header+set}\" = set"; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
! fi
! echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
! echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
  else
!   # Is the header compilable?
! echo "$as_me:$LINENO: checking $ac_header usability" >&5
! echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
! $ac_includes_default
! #include <$ac_header>
! _ACEOF
! rm -f conftest.$ac_objext
! if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
!   (eval $ac_compile) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest.$ac_objext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_header_compiler=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_header_compiler=no
  fi
! rm -f conftest.$ac_objext conftest.$ac_ext
! echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
! echo "${ECHO_T}$ac_header_compiler" >&6
! 
! # Is the header present?
! echo "$as_me:$LINENO: checking $ac_header presence" >&5
! echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
! #include "confdefs.h"
! #include <$ac_header>
! _ACEOF
! if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
!   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
!   ac_status=$?
!   egrep -v '^ *\+' conftest.er1 >conftest.err
!   rm -f conftest.er1
!   cat conftest.err >&5
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } >/dev/null; then
!   if test -s conftest.err; then
!     ac_cpp_err=$ac_c_preproc_warn_flag
!   else
!     ac_cpp_err=
!   fi
! else
!   ac_cpp_err=yes
  fi
! if test -z "$ac_cpp_err"; then
!   ac_header_preproc=yes
  else
!   echo "$as_me: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   ac_header_preproc=no
  fi
+ rm -f conftest.err conftest.$ac_ext
+ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+ echo "${ECHO_T}$ac_header_preproc" >&6
+ 
+ # So?  What about this header?
+ case $ac_header_compiler:$ac_header_preproc in
+   yes:no )
+     { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+ echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+ echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+   no:yes )
+     { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+ echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+     { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+ echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+     { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+ echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+ esac
+ echo "$as_me:$LINENO: checking for $ac_header" >&5
+ echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+ if eval "test \"\${$as_ac_Header+set}\" = set"; then
+   echo $ECHO_N "(cached) $ECHO_C" >&6
+ else
+   eval "$as_ac_Header=$ac_header_preproc"
+ fi
+ echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+ echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+ 
+ fi
+ if test `eval echo '${'$as_ac_Header'}'` = yes; then
+   cat >>confdefs.h <<_ACEOF
+ #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+ _ACEOF
+ 
+ fi
+ 
  done
  
! 	echo "$as_me:$LINENO: checking for quotactl" >&5
! echo $ECHO_N "checking for quotactl... $ECHO_C" >&6
! if test "${ac_cv_func_quotactl+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
!     which can conflict with char quotactl (); below.  */
  #include <assert.h>
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char quotactl ();
! char (*f) ();
  
+ #ifdef F77_DUMMY_MAIN
+ #  ifdef __cplusplus
+      extern "C"
+ #  endif
+    int F77_DUMMY_MAIN() { return 1; }
+ #endif
+ int
+ main ()
+ {
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
  #if defined (__stub_quotactl) || defined (__stub___quotactl)
  choke me
  #else
! f = quotactl;
  #endif
  
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_func_quotactl=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_func_quotactl=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
  fi
! echo "$as_me:$LINENO: result: $ac_cv_func_quotactl" >&5
! echo "${ECHO_T}$ac_cv_func_quotactl" >&6
! if test $ac_cv_func_quotactl = yes; then
    :
  else
!   cat >>confdefs.h <<\_ACEOF
  #define NEED_QUOTACTL_WRAPPER 1
! _ACEOF
! 
! 		echo "$as_me:$LINENO: result: enabling quotactl wrapper" >&5
! echo "${ECHO_T}enabling quotactl wrapper" >&6
  
  fi
  
  
! 				cat >>confdefs.h <<\_ACEOF
  #define HAVE_BROKEN_DBTOB 1
! _ACEOF
! 
  
  
  	majorvers="`uname -r | sed 's/\([0-9]\)..*/\1/'`"
  	minorvers="`uname -r | sed 's/[0-9]\.\([0-9]\)\..*/\1/'`"
  	if [ $majorvers -ge 2 ]; then
  		if [ $minorvers -ge 2 ]; then
! 
! 			echo "$as_me:$LINENO: result:  * found Linux 2.2.x or higher" >&5
! echo "${ECHO_T} * found Linux 2.2.x or higher" >&6
! 			cat >>confdefs.h <<\_ACEOF
  #define SENDFILE_FLAVOR_LINUX 1
! _ACEOF
  
  		else
! 			echo "$as_me:$LINENO: result:  * found Linux 2.0.x " >&5
! echo "${ECHO_T} * found Linux 2.0.x " >&6
  		fi
  	fi
  
! 		if test x"$this_cpu" = "xalpha"; then
! 		echo "$as_me:$LINENO: result: enabling gcc memcpy bug workaround" >&5
! echo "${ECHO_T}enabling gcc memcpy bug workaround" >&6
! 		cat >>confdefs.h <<\_ACEOF
  #define HAVE_GCC_MEMCPY_BUG 1
! _ACEOF
  
  	fi
  	need_dash_r=no
  fi
  
! if test x"$this_os" = "xmacosx"; then
! 	echo "$as_me:$LINENO: result:  * Mac OSX specific configuration" >&5
! echo "${ECHO_T} * Mac OSX specific configuration" >&6
! 	cat >>confdefs.h <<\_ACEOF
  #define BSD4_4 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define HAVE_BROKEN_CPP 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define HAVE_2ARG_DBTOB 1
! _ACEOF
  
! 		cat >>confdefs.h <<\_ACEOF
  #define MACOSX_SERVER 1
! _ACEOF
  
  fi
  
! if test x"$this_os" = "xnetbsd"; then
! 	echo "$as_me:$LINENO: result:  * NetBSD specific configuration" >&5
! echo "${ECHO_T} * NetBSD specific configuration" >&6
! 	cat >>confdefs.h <<\_ACEOF
  #define BSD4_4 1
! _ACEOF
  
  	if echo __ELF__ | $CC -E - | grep __ELF__ > /dev/null; then
  		# NetBSD ELF machines don't have to have DLSYM_PREPEND_UNDERSCORE.
  		# If this test is true, it's not an ELF box.
  		# This REALLY should be a configure test.
! 		cat >>confdefs.h <<\_ACEOF
  #define DLSYM_PREPEND_UNDERSCORE 1
! _ACEOF
  
  	fi
  	CFLAGS="-I\$(top_srcdir)/sys/netbsd -I/usr/include/kerberosIV $CFLAGS"
! 	need_dash_r=yes
  
! 		cat >>confdefs.h <<\_ACEOF
  #define UAM_DHX 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_CRYPT_H 1
! _ACEOF
  
  fi
  
! if test x"$this_os" = "xopenbsd"; then
! 	echo "$as_me:$LINENO: result:  * OpenBSD specific configuration" >&5
! echo "${ECHO_T} * OpenBSD specific configuration" >&6
! 	cat >>confdefs.h <<\_ACEOF
  #define BSD4_4 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define DLSYM_PREPEND_UNDERSCORE 1
! _ACEOF
  
  
! 		cat >>confdefs.h <<\_ACEOF
  #define UAM_DHX 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_CRYPT_H 1
! _ACEOF
  
  fi
  
! if test x"$this_os" = "xsolaris"; then
! 	echo "$as_me:$LINENO: result:  * Solaris specific configuration" >&5
! echo "${ECHO_T} * Solaris specific configuration" >&6
! 	cat >>confdefs.h <<\_ACEOF
  #define __svr4__ 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define _ISOC9X_SOURCE 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_STRUCT_TM_GMTOFF 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define SOLARIS 1
! _ACEOF
  
  	CFLAGS="-I\$(top_srcdir)/sys/generic $CFLAGS"
  	need_dash_r=yes
  
! 	echo "$as_me:$LINENO: result: enabling Solaris kernel module build" >&5
! echo "${ECHO_T}enabling Solaris kernel module build" >&6
  	solaris_module=yes
  fi
  
! if test x"$this_os" = "xtru64"; then
! 	echo "$as_me:$LINENO: result:  * Tru64 specific configuration" >&5
! echo "${ECHO_T} * Tru64 specific configuration" >&6
! 	cat >>confdefs.h <<\_ACEOF
  #define NO_DDP 1
! _ACEOF
  
! 	cat >>confdefs.h <<\_ACEOF
  #define HAVE_64BIT_LONGS 1
! _ACEOF
  
! 		cat >>confdefs.h <<\_ACEOF
  #define USE_OLD_RQUOTA 1
! _ACEOF
  
! 		cat >>confdefs.h <<\_ACEOF
  #define TRU64 1
! _ACEOF
  
! 
! echo "$as_me:$LINENO: checking for set_auth_parameters in -lsecurity" >&5
! echo $ECHO_N "checking for set_auth_parameters in -lsecurity... $ECHO_C" >&6
! if test "${ac_cv_lib_security_set_auth_parameters+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lsecurity  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
+ 
  /* Override any gcc2 internal prototype to avoid an error.  */
+ #ifdef __cplusplus
+ extern "C"
+ #endif
  /* We use char because int might match the return type of a gcc2
!    builtin and then its argument prototype would still apply.  */
! char set_auth_parameters ();
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! set_auth_parameters ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_security_set_auth_parameters=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_security_set_auth_parameters=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_security_set_auth_parameters" >&5
! echo "${ECHO_T}$ac_cv_lib_security_set_auth_parameters" >&6
! if test $ac_cv_lib_security_set_auth_parameters = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBSECURITY 1
! _ACEOF
  
    LIBS="-lsecurity $LIBS"
  
  fi
  
  	CFLAGS="-I\$(top_srcdir)/sys/tru64 $CFLAGS"
***************
*** 9428,9438 ****
  	sysv_style=tru64
  fi
  
  
! 	# Check whether --with-ssl-dir or --without-ssl-dir was given.
  if test "${with_ssl_dir+set}" = set; then
    withval="$with_ssl_dir"
!   
  			if test "x$withval" = "xno"; then
  				tryssl=no
  			elif test "x$withval" = "xyes"; then
--- 13001,13146 ----
  	sysv_style=tru64
  fi
  
+ echo "$as_me:$LINENO: checking whether to use DCE plaintext authentication" >&5
+ echo $ECHO_N "checking whether to use DCE plaintext authentication... $ECHO_C" >&6
  
! # Check whether --with-dce or --without-dce was given.
! if test "${with_dce+set}" = set; then
!   withval="$with_dce"
!    case "$withval" in
!   yes)
!     echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
!     cat >>confdefs.h <<\_ACEOF
! #define WITH_DCE 1
! _ACEOF
! 
!     LIBS="$LIBS -ldce -lpthread"
!     CFLAGS="$CFLAGS -D_REENTRANT"
!     ;;
!   *)
!     echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
!     ;;
!   esac
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! 
! fi;
! 
! echo "$as_me:$LINENO: checking whether to use DCE encrypted authentication" >&5
! echo $ECHO_N "checking whether to use DCE encrypted authentication... $ECHO_C" >&6
! 
! # Check whether --with-dce-encrypted or --without-dce-encrypted was given.
! if test "${with_dce_encrypted+set}" = set; then
!   withval="$with_dce_encrypted"
!    case "$withval" in
!   yes)
!     echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
!     cat >>confdefs.h <<\_ACEOF
! #define WITH_DCE_ENCRYPTED 1
! _ACEOF
! 
!     LIBS="$LIBS -lsec_auth"
!     ;;
!   *)
!     echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
!     ;;
!   esac
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! 
! fi;
! 
! echo "$as_me:$LINENO: checking whether to use DCE context refresh" >&5
! echo $ECHO_N "checking whether to use DCE context refresh... $ECHO_C" >&6
! 
! # Check whether --with-dce-refresh or --without-dce-refresh was given.
! if test "${with_dce_refresh+set}" = set; then
!   withval="$with_dce_refresh"
!    case "$withval" in
!   yes)
!     echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
!     cat >>confdefs.h <<\_ACEOF
! #define WITH_DCE_REFRESH 1
! _ACEOF
! 
!     ;;
!   *)
!     echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
!     ;;
!   esac
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! 
! fi;
! 
! echo "$as_me:$LINENO: checking whether to work around broken IBM DCE security API" >&5
! echo $ECHO_N "checking whether to work around broken IBM DCE security API... $ECHO_C" >&6
! 
! # Check whether --with-dce-ibm-kludge or --without-dce-ibm-kludge was given.
! if test "${with_dce_ibm_kludge+set}" = set; then
!   withval="$with_dce_ibm_kludge"
!    case "$withval" in
!   yes)
!     echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
!     cat >>confdefs.h <<\_ACEOF
! #define WITH_DCE_IBM_KLUDGE 1
! _ACEOF
! 
!     ;;
!   *)
!     echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
!     ;;
!   esac
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! 
! fi;
! 
! echo "$as_me:$LINENO: checking whether to use DFS" >&5
! echo $ECHO_N "checking whether to use DFS... $ECHO_C" >&6
! 
! # Check whether --with-dfs or --without-dfs was given.
! if test "${with_dfs+set}" = set; then
!   withval="$with_dfs"
!    case "$withval" in
!   yes)
!     echo "$as_me:$LINENO: result: yes" >&5
! echo "${ECHO_T}yes" >&6
!     cat >>confdefs.h <<\_ACEOF
! #define WITH_DFS 1
! _ACEOF
! 
!     LIBS="$LIBS -ldcedfs"
!     ;;
!   *)
!     echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
!     ;;
!   esac
! else
!   echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
! 
! fi;
! 
! 
! 
! # Check whether --with-ssl-dir or --without-ssl-dir was given.
  if test "${with_ssl_dir+set}" = set; then
    withval="$with_ssl_dir"
! 
  			if test "x$withval" = "xno"; then
  				tryssl=no
  			elif test "x$withval" = "xyes"; then
***************
*** 9442,9461 ****
  								tryssl=yes
  				tryssldir="$withval"
  			fi
! 		
  else
    tryssl=yes
- 	
- fi
  
  
  	SSL_CFLAGS=""
  	SSL_LIBS=""
  	compile_ssl=no
  
  	if test "$tryssl" = "yes"; then
! 		echo $ac_n "checking for SSL""... $ac_c" 1>&6
! echo "configure:9459: checking for SSL" >&5
  		for ssldir in "" $tryssldir /usr /usr/local/openssl /usr/lib/openssl /usr/local/ssl /usr/lib/ssl /usr/local /usr/pkg /opt /opt/openssl /usr/local/ssl ; do
  			if test -f "$ssldir/include/openssl/cast.h" ; then
  				SSL_CFLAGS="$SSL_CFLAGS -I$ssldir/include -I$ssldir/include/openssl"
--- 13150,13168 ----
  								tryssl=yes
  				tryssldir="$withval"
  			fi
! 
  else
    tryssl=yes
  
+ fi;
  
  	SSL_CFLAGS=""
  	SSL_LIBS=""
  	compile_ssl=no
  
  	if test "$tryssl" = "yes"; then
! 		echo "$as_me:$LINENO: checking for SSL" >&5
! echo $ECHO_N "checking for SSL... $ECHO_C" >&6
  		for ssldir in "" $tryssldir /usr /usr/local/openssl /usr/lib/openssl /usr/local/ssl /usr/lib/ssl /usr/local /usr/pkg /opt /opt/openssl /usr/local/ssl ; do
  			if test -f "$ssldir/include/openssl/cast.h" ; then
  				SSL_CFLAGS="$SSL_CFLAGS -I$ssldir/include -I$ssldir/include/openssl"
***************
*** 9463,9613 ****
  				if test "x$need_dash_r" = "xyes"; then
  					SSL_LIBS="$SSL_LIBS -R$ssldir/lib -R$ssldir"
  				fi
! 				echo "$ac_t""$ssldir (enabling RANDNUM and DHX support)" 1>&6
  
! 								echo $ac_n "checking for main in -lcrypto""... $ac_c" 1>&6
! echo "configure:9470: checking for main in -lcrypto" >&5
! ac_lib_var=`echo crypto'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-lcrypto  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 9478 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:9485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo crypto | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-lcrypto $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
! 								echo $ac_n "checking for main in -ldes""... $ac_c" 1>&6
! echo "configure:9513: checking for main in -ldes" >&5
! ac_lib_var=`echo des'_'main | sed 'y%./+-%__p_%'`
! if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&6
  else
!   ac_save_LIBS="$LIBS"
  LIBS="-ldes  $LIBS"
! cat > conftest.$ac_ext <<EOF
! #line 9521 "configure"
  #include "confdefs.h"
  
! int main() {
! main()
! ; return 0; }
! EOF
! if { (eval echo configure:9528: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=yes"
  else
!   echo "configure: failed program was:" >&5
!   cat conftest.$ac_ext >&5
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib_var=no"
  fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
  fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
!   echo "$ac_t""yes" 1>&6
!     ac_tr_lib=HAVE_LIB`echo des | sed -e 's/[^a-zA-Z0-9_]/_/g' \
!     -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
!   cat >> confdefs.h <<EOF
! #define $ac_tr_lib 1
! EOF
  
    LIBS="-ldes $LIBS"
  
- else
-   echo "$ac_t""no" 1>&6
  fi
  
  
! 		 		cat >> confdefs.h <<\EOF
  #define OPENSSL_DHX 1
! EOF
  
! 				cat >> confdefs.h <<\EOF
  #define UAM_DHX 1
! EOF
  
  				compile_ssl=yes
  				break
  			fi
  		done
  		if test "x$compile_ssl" = "xno"; then
! 			echo "$ac_t""no" 1>&6
  		fi
  	fi
! 	
! 	
  
  
  
  # Check whether --enable-pgp-uam or --disable-pgp-uam was given.
  if test "${enable_pgp_uam+set}" = set; then
    enableval="$enable_pgp_uam"
!   if test "$enableval" = "yes"; then 
! 		if test "$compile_ssl" = "yes"; then 
! 			cat >> confdefs.h <<\EOF
  #define UAM_PGP 1
! EOF
  
  			compile_pgp=yes
! 			echo "$ac_t""enabling build with PGP UAM module" 1>&6
  		fi
  	fi
  
! fi
! 
  
  
  # Check whether --enable-krb4-uam or --disable-krb4-uam was given.
  if test "${enable_krb4_uam+set}" = set; then
    enableval="$enable_krb4_uam"
    if test "$enableval" = "yes"; then
! 		cat >> confdefs.h <<\EOF
  #define UAM_KRB4 1
! EOF
  
  		compile_kerberos=yes
! 		echo "$ac_t""enabling build with Kerberos v4 UAM module" 1>&6
  	fi
  
! fi
! 
  
! echo $ac_n "checking whether configuration files should be overwritten""... $ac_c" 1>&6
! echo "configure:9611: checking whether configuration files should be overwritten" >&5
  # Check whether --enable-overwrite or --disable-overwrite was given.
  if test "${enable_overwrite+set}" = set; then
    enableval="$enable_overwrite"
--- 13170,13354 ----
  				if test "x$need_dash_r" = "xyes"; then
  					SSL_LIBS="$SSL_LIBS -R$ssldir/lib -R$ssldir"
  				fi
! 				echo "$as_me:$LINENO: result: $ssldir (enabling RANDNUM and DHX support)" >&5
! echo "${ECHO_T}$ssldir (enabling RANDNUM and DHX support)" >&6
  
! 
! echo "$as_me:$LINENO: checking for main in -lcrypto" >&5
! echo $ECHO_N "checking for main in -lcrypto... $ECHO_C" >&6
! if test "${ac_cv_lib_crypto_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-lcrypto  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_crypto_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_crypto_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_crypto_main" >&5
! echo "${ECHO_T}$ac_cv_lib_crypto_main" >&6
! if test $ac_cv_lib_crypto_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBCRYPTO 1
! _ACEOF
  
    LIBS="-lcrypto $LIBS"
  
  fi
  
! 
! echo "$as_me:$LINENO: checking for main in -ldes" >&5
! echo $ECHO_N "checking for main in -ldes... $ECHO_C" >&6
! if test "${ac_cv_lib_des_main+set}" = set; then
!   echo $ECHO_N "(cached) $ECHO_C" >&6
  else
!   ac_check_lib_save_LIBS=$LIBS
  LIBS="-ldes  $LIBS"
! cat >conftest.$ac_ext <<_ACEOF
! #line $LINENO "configure"
  #include "confdefs.h"
  
! 
! #ifdef F77_DUMMY_MAIN
! #  ifdef __cplusplus
!      extern "C"
! #  endif
!    int F77_DUMMY_MAIN() { return 1; }
! #endif
! int
! main ()
! {
! main ();
!   ;
!   return 0;
! }
! _ACEOF
! rm -f conftest.$ac_objext conftest$ac_exeext
! if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
!   (eval $ac_link) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); } &&
!          { ac_try='test -s conftest$ac_exeext'
!   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
!   (eval $ac_try) 2>&5
!   ac_status=$?
!   echo "$as_me:$LINENO: \$? = $ac_status" >&5
!   (exit $ac_status); }; }; then
!   ac_cv_lib_des_main=yes
  else
!   echo "$as_me: failed program was:" >&5
! cat conftest.$ac_ext >&5
! ac_cv_lib_des_main=no
  fi
! rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
! LIBS=$ac_check_lib_save_LIBS
  fi
! echo "$as_me:$LINENO: result: $ac_cv_lib_des_main" >&5
! echo "${ECHO_T}$ac_cv_lib_des_main" >&6
! if test $ac_cv_lib_des_main = yes; then
!   cat >>confdefs.h <<_ACEOF
! #define HAVE_LIBDES 1
! _ACEOF
  
    LIBS="-ldes $LIBS"
  
  fi
  
  
! 		 		cat >>confdefs.h <<\_ACEOF
  #define OPENSSL_DHX 1
! _ACEOF
  
! 				cat >>confdefs.h <<\_ACEOF
  #define UAM_DHX 1
! _ACEOF
  
  				compile_ssl=yes
  				break
  			fi
  		done
  		if test "x$compile_ssl" = "xno"; then
! 			echo "$as_me:$LINENO: result: no" >&5
! echo "${ECHO_T}no" >&6
  		fi
  	fi
! 
! 
  
  
  
  # Check whether --enable-pgp-uam or --disable-pgp-uam was given.
  if test "${enable_pgp_uam+set}" = set; then
    enableval="$enable_pgp_uam"
!   if test "$enableval" = "yes"; then
! 		if test "$compile_ssl" = "yes"; then
! 			cat >>confdefs.h <<\_ACEOF
  #define UAM_PGP 1
! _ACEOF
  
  			compile_pgp=yes
! 			echo "$as_me:$LINENO: result: enabling build with PGP UAM module" >&5
! echo "${ECHO_T}enabling build with PGP UAM module" >&6
  		fi
  	fi
  
! fi;
  
  
  # Check whether --enable-krb4-uam or --disable-krb4-uam was given.
  if test "${enable_krb4_uam+set}" = set; then
    enableval="$enable_krb4_uam"
    if test "$enableval" = "yes"; then
! 		cat >>confdefs.h <<\_ACEOF
  #define UAM_KRB4 1
! _ACEOF
  
  		compile_kerberos=yes
! 		echo "$as_me:$LINENO: result: enabling build with Kerberos v4 UAM module" >&5
! echo "${ECHO_T}enabling build with Kerberos v4 UAM module" >&6
  	fi
  
! fi;
  
! echo "$as_me:$LINENO: checking whether configuration files should be overwritten" >&5
! echo $ECHO_N "checking whether configuration files should be overwritten... $ECHO_C" >&6
  # Check whether --enable-overwrite or --disable-overwrite was given.
  if test "${enable_overwrite+set}" = set; then
    enableval="$enable_overwrite"
***************
*** 9615,9623 ****
  else
    OVERWRITE_CONFIG="no"
  
! fi
! 
! echo "$ac_t""$OVERWRITE_CONFIG" 1>&6
  
  
  
--- 13356,13364 ----
  else
    OVERWRITE_CONFIG="no"
  
! fi;
! echo "$as_me:$LINENO: result: $OVERWRITE_CONFIG" >&5
! echo "${ECHO_T}$OVERWRITE_CONFIG" >&6
  
  
  
***************
*** 9754,10369 ****
  fi
  
  
! trap '' 1 2 15
! cat > confcache <<\EOF
  # This file is a shell script that caches the results of configure
  # tests run on this system so they can be shared between configure
! # scripts and configure runs.  It is not useful on other systems.
! # If it contains results you don't want to keep, you may remove or edit it.
  #
! # By default, configure uses ./config.cache as the cache file,
! # creating it if it does not exist already.  You can give configure
! # the --cache-file=FILE option to use a different cache file; that is
! # what configure does when it calls configure scripts in
! # subdirectories, so they share the cache.
! # Giving --cache-file=/dev/null disables caching, for debugging configure.
! # config.status only pays attention to the cache file if you give it the
! # --recheck option to rerun configure.
  #
! EOF
  # The following way of writing the cache mishandles newlines in values,
  # but we know of no workaround that is simple, portable, and efficient.
  # So, don't put newlines in cache variables' values.
  # Ultrix sh set writes to stderr and can't be redirected directly,
  # and sets the high bit in the cache file unless we assign to the vars.
! (set) 2>&1 |
!   case `(ac_space=' '; set | grep ac_space) 2>&1` in
!   *ac_space=\ *)
!     # `set' does not quote correctly, so add quotes (double-quote substitution
!     # turns \\\\ into \\, and sed turns \\ into \).
!     sed -n \
!       -e "s/'/'\\\\''/g" \
!       -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
!     ;;
!   *)
!     # `set' quotes correctly as required by POSIX, so do not add quotes.
!     sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
!     ;;
!   esac >> confcache
! if cmp -s $cache_file confcache; then
!   :
! else
    if test -w $cache_file; then
!     echo "updating cache $cache_file"
!     cat confcache > $cache_file
    else
      echo "not updating unwritable cache $cache_file"
    fi
  fi
  rm -f confcache
  
- trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15
- 
  test "x$prefix" = xNONE && prefix=$ac_default_prefix
  # Let make expand exec_prefix.
  test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
  
! # Any assignment to VPATH causes Sun make to only execute
! # the first set of double-colon rules, so remove it if not needed.
! # If there is a colon in the path, we need to keep it.
  if test "x$srcdir" = x.; then
!   ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
  fi
  
- trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15
- 
  DEFS=-DHAVE_CONFIG_H
  
- # Without the "./", some shells look in PATH for config.status.
- : ${CONFIG_STATUS=./config.status}
  
! echo creating $CONFIG_STATUS
! rm -f $CONFIG_STATUS
! cat > $CONFIG_STATUS <<EOF
! #! /bin/sh
! # Generated automatically by configure.
  # Run this file to recreate the current configuration.
- # This directory was configured as follows,
- # on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
- #
- # $0 $ac_configure_args
- #
  # Compiler output produced by configure, useful for debugging
! # configure, is in ./config.log if it exists.
  
! ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
! for ac_option
  do
!   case "\$ac_option" in
!   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
!     echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
!     exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
!   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
!     echo "$CONFIG_STATUS generated by autoconf version 2.13"
!     exit 0 ;;
!   -help | --help | --hel | --he | --h)
!     echo "\$ac_cs_usage"; exit 0 ;;
!   *) echo "\$ac_cs_usage"; exit 1 ;;
    esac
  done
  
! ac_given_srcdir=$srcdir
! ac_given_INSTALL="$INSTALL"
  
! trap 'rm -fr `echo "Makefile
! 	bin/Makefile
! 	bin/adv1tov2/Makefile
! 	bin/aecho/Makefile
! 	bin/afile/Makefile
! 	bin/afppasswd/Makefile
! 	bin/cnid/Makefile
! 	bin/cnid/cnid_maint
! 	bin/getzones/Makefile
! 	bin/megatron/Makefile
! 	bin/nbp/Makefile
! 	bin/pap/Makefile
! 	bin/psorder/Makefile
! 	config/Makefile
! 	contrib/Makefile
! 	contrib/macusers/Makefile
! 	contrib/macusers/macusers
! 	contrib/nu/Makefile
! 	contrib/nu/nu
! 	contrib/printing/Makefile
! 	contrib/shell_utils/Makefile
! 	contrib/shell_utils/afpd-mtab.pl
! 	contrib/shell_utils/apple_cp
! 	contrib/shell_utils/apple_mv
! 	contrib/shell_utils/apple_rm
! 	contrib/shell_utils/cleanappledouble.pl
! 	contrib/shell_utils/netatalkshorternamelinks.pl
! 	contrib/timelord/Makefile
! 	distrib/Makefile
! 	distrib/config/Makefile
! 	distrib/config/netatalk-config
! 	distrib/initscripts/Makefile
! 	distrib/m4/Makefile
! 	doc/Makefile
! 	etc/Makefile
! 	etc/afpd/Makefile
! 	etc/afpd/nls/Makefile
! 	etc/atalkd/Makefile
! 	etc/uams/Makefile
! 	etc/uams/uams_krb4/Makefile
! 	etc/papd/Makefile
! 	etc/psf/Makefile
! 	include/Makefile
! 	include/atalk/Makefile
! 	libatalk/Makefile
! 	libatalk/adouble/Makefile
! 	libatalk/asp/Makefile
! 	libatalk/atp/Makefile
! 	libatalk/cnid/Makefile
! 	libatalk/compat/Makefile
! 	libatalk/dsi/Makefile
! 	libatalk/nbp/Makefile
! 	libatalk/netddp/Makefile
! 	libatalk/util/Makefile
! 	macros/Makefile
! 	man/Makefile
! 	man/man1/Makefile
! 	man/man3/Makefile
! 	man/man4/Makefile
! 	man/man5/Makefile
! 	man/man8/Makefile
! 	sys/Makefile
! 	sys/generic/Makefile
! 	sys/generic/sys/Makefile
! 	sys/netatalk/Makefile
! 	sys/netbsd/Makefile
! 	sys/netbsd/netatalk/Makefile
! 	sys/solaris/Makefile
! 	sys/solaris/Makefile.kernel
! 	sys/sunos/Makefile
! 	sys/ultrix/Makefile
! 	 config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
! EOF
! cat >> $CONFIG_STATUS <<EOF
  
- # Protect against being on the right side of a sed subst in config.status.
- sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
-  s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
- $ac_vpsub
- $extrasub
- s%@PERL@%$PERL%g
- s%@GREP@%$GREP%g
- s%@PS@%$PS%g
- s%@SHELL@%$SHELL%g
- s%@CFLAGS@%$CFLAGS%g
- s%@CPPFLAGS@%$CPPFLAGS%g
- s%@CXXFLAGS@%$CXXFLAGS%g
- s%@FFLAGS@%$FFLAGS%g
- s%@DEFS@%$DEFS%g
- s%@LDFLAGS@%$LDFLAGS%g
- s%@LIBS@%$LIBS%g
- s%@exec_prefix@%$exec_prefix%g
- s%@prefix@%$prefix%g
- s%@program_transform_name@%$program_transform_name%g
- s%@bindir@%$bindir%g
- s%@sbindir@%$sbindir%g
- s%@libexecdir@%$libexecdir%g
- s%@datadir@%$datadir%g
- s%@sysconfdir@%$sysconfdir%g
- s%@sharedstatedir@%$sharedstatedir%g
- s%@localstatedir@%$localstatedir%g
- s%@libdir@%$libdir%g
- s%@includedir@%$includedir%g
- s%@oldincludedir@%$oldincludedir%g
- s%@infodir@%$infodir%g
- s%@mandir@%$mandir%g
- s%@NETATALK_VERSION@%$NETATALK_VERSION%g
- s%@host@%$host%g
- s%@host_alias@%$host_alias%g
- s%@host_cpu@%$host_cpu%g
- s%@host_vendor@%$host_vendor%g
- s%@host_os@%$host_os%g
- s%@target@%$target%g
- s%@target_alias@%$target_alias%g
- s%@target_cpu@%$target_cpu%g
- s%@target_vendor@%$target_vendor%g
- s%@target_os@%$target_os%g
- s%@build@%$build%g
- s%@build_alias@%$build_alias%g
- s%@build_cpu@%$build_cpu%g
- s%@build_vendor@%$build_vendor%g
- s%@build_os@%$build_os%g
- s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
- s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g
- s%@INSTALL_DATA@%$INSTALL_DATA%g
- s%@PACKAGE@%$PACKAGE%g
- s%@VERSION@%$VERSION%g
- s%@EXEEXT@%$EXEEXT%g
- s%@OBJEXT@%$OBJEXT%g
- s%@ACLOCAL@%$ACLOCAL%g
- s%@AUTOCONF@%$AUTOCONF%g
- s%@AUTOMAKE@%$AUTOMAKE%g
- s%@AUTOHEADER@%$AUTOHEADER%g
- s%@MAKEINFO@%$MAKEINFO%g
- s%@AMTAR@%$AMTAR%g
- s%@install_sh@%$install_sh%g
- s%@INSTALL_STRIP_PROGRAM@%$INSTALL_STRIP_PROGRAM%g
- s%@AWK@%$AWK%g
- s%@SET_MAKE@%$SET_MAKE%g
- s%@AMDEP_TRUE@%$AMDEP_TRUE%g
- s%@AMDEP_FALSE@%$AMDEP_FALSE%g
- s%@AMDEPBACKSLASH@%$AMDEPBACKSLASH%g
- s%@DEPDIR@%$DEPDIR%g
- s%@CC@%$CC%g
- s%@am__include@%$am__include%g
- s%@am__quote@%$am__quote%g
- s%@CCDEPMODE@%$CCDEPMODE%g
- s%@LN_S@%$LN_S%g
- s%@ECHO@%$ECHO%g
- s%@RANLIB@%$RANLIB%g
- s%@STRIP@%$STRIP%g
- s%@CPP@%$CPP%g
- s%@LIBTOOL@%$LIBTOOL%g
- s%@LIBOBJS@%$LIBOBJS%g
- s%@AFS_LIBS@%$AFS_LIBS%g
- s%@AFS_CFLAGS@%$AFS_CFLAGS%g
- s%@PKGCONFDIR@%$PKGCONFDIR%g
- s%@NLSDIR@%$NLSDIR%g
- s%@COMPILE_CNID_TRUE@%$COMPILE_CNID_TRUE%g
- s%@COMPILE_CNID_FALSE@%$COMPILE_CNID_FALSE%g
- s%@DB3_CFLAGS@%$DB3_CFLAGS%g
- s%@DB3_LIBS@%$DB3_LIBS%g
- s%@DB3_PATH@%$DB3_PATH%g
- s%@QUOTA_LIBS@%$QUOTA_LIBS%g
- s%@SLP_LIBS@%$SLP_LIBS%g
- s%@SLP_CFLAGS@%$SLP_CFLAGS%g
- s%@PAMDIR@%$PAMDIR%g
- s%@PAM_CFLAGS@%$PAM_CFLAGS%g
- s%@PAM_LIBS@%$PAM_LIBS%g
- s%@UAMS_PATH@%$UAMS_PATH%g
- s%@SSL_CFLAGS@%$SSL_CFLAGS%g
- s%@SSL_LIBS@%$SSL_LIBS%g
- s%@AFPD_LIBS@%$AFPD_LIBS%g
- s%@PAPD_LIBS@%$PAPD_LIBS%g
- s%@OVERWRITE_CONFIG@%$OVERWRITE_CONFIG%g
- s%@SOLARIS_MODULE_TRUE@%$SOLARIS_MODULE_TRUE%g
- s%@SOLARIS_MODULE_FALSE@%$SOLARIS_MODULE_FALSE%g
- s%@COMPILE_TIMELORD_TRUE@%$COMPILE_TIMELORD_TRUE%g
- s%@COMPILE_TIMELORD_FALSE@%$COMPILE_TIMELORD_FALSE%g
- s%@USE_DHX_TRUE@%$USE_DHX_TRUE%g
- s%@USE_DHX_FALSE@%$USE_DHX_FALSE%g
- s%@USE_KERBEROS_TRUE@%$USE_KERBEROS_TRUE%g
- s%@USE_KERBEROS_FALSE@%$USE_KERBEROS_FALSE%g
- s%@USE_PAM_SO_TRUE@%$USE_PAM_SO_TRUE%g
- s%@USE_PAM_SO_FALSE@%$USE_PAM_SO_FALSE%g
- s%@USE_PAM_TRUE@%$USE_PAM_TRUE%g
- s%@USE_PAM_FALSE@%$USE_PAM_FALSE%g
- s%@BUILD_PAM_TRUE@%$BUILD_PAM_TRUE%g
- s%@BUILD_PAM_FALSE@%$BUILD_PAM_FALSE%g
- s%@USE_PGP_TRUE@%$USE_PGP_TRUE%g
- s%@USE_PGP_FALSE@%$USE_PGP_FALSE%g
- s%@USE_COBALT_TRUE@%$USE_COBALT_TRUE%g
- s%@USE_COBALT_FALSE@%$USE_COBALT_FALSE%g
- s%@USE_NETBSD_TRUE@%$USE_NETBSD_TRUE%g
- s%@USE_NETBSD_FALSE@%$USE_NETBSD_FALSE%g
- s%@USE_REDHAT_TRUE@%$USE_REDHAT_TRUE%g
- s%@USE_REDHAT_FALSE@%$USE_REDHAT_FALSE%g
- s%@USE_SUSE_TRUE@%$USE_SUSE_TRUE%g
- s%@USE_SUSE_FALSE@%$USE_SUSE_FALSE%g
- s%@USE_SHADOWPW_TRUE@%$USE_SHADOWPW_TRUE%g
- s%@USE_SHADOWPW_FALSE@%$USE_SHADOWPW_FALSE%g
- s%@USE_TRU64_TRUE@%$USE_TRU64_TRUE%g
- s%@USE_TRU64_FALSE@%$USE_TRU64_FALSE%g
  
! CEOF
! EOF
  
! cat >> $CONFIG_STATUS <<\EOF
  
! # Split the substitutions into bite-sized pieces for seds with
! # small command number limits, like on Digital OSF/1 and HP-UX.
! ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
! ac_file=1 # Number of current file.
! ac_beg=1 # First line for current file.
! ac_end=$ac_max_sed_cmds # Line after last line for current file.
! ac_more_lines=:
! ac_sed_cmds=""
! while $ac_more_lines; do
!   if test $ac_beg -gt 1; then
!     sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
!   else
!     sed "${ac_end}q" conftest.subs > conftest.s$ac_file
!   fi
!   if test ! -s conftest.s$ac_file; then
!     ac_more_lines=false
!     rm -f conftest.s$ac_file
    else
!     if test -z "$ac_sed_cmds"; then
!       ac_sed_cmds="sed -f conftest.s$ac_file"
!     else
!       ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
!     fi
!     ac_file=`expr $ac_file + 1`
!     ac_beg=$ac_end
!     ac_end=`expr $ac_end + $ac_max_sed_cmds`
    fi
! done
! if test -z "$ac_sed_cmds"; then
!   ac_sed_cmds=cat
  fi
! EOF
  
! cat >> $CONFIG_STATUS <<EOF
  
! CONFIG_FILES=\${CONFIG_FILES-"Makefile
! 	bin/Makefile
! 	bin/adv1tov2/Makefile
! 	bin/aecho/Makefile
! 	bin/afile/Makefile
! 	bin/afppasswd/Makefile
! 	bin/cnid/Makefile
! 	bin/cnid/cnid_maint
! 	bin/getzones/Makefile
! 	bin/megatron/Makefile
! 	bin/nbp/Makefile
! 	bin/pap/Makefile
! 	bin/psorder/Makefile
! 	config/Makefile
! 	contrib/Makefile
! 	contrib/macusers/Makefile
! 	contrib/macusers/macusers
! 	contrib/nu/Makefile
! 	contrib/nu/nu
! 	contrib/printing/Makefile
! 	contrib/shell_utils/Makefile
! 	contrib/shell_utils/afpd-mtab.pl
! 	contrib/shell_utils/apple_cp
! 	contrib/shell_utils/apple_mv
! 	contrib/shell_utils/apple_rm
! 	contrib/shell_utils/cleanappledouble.pl
! 	contrib/shell_utils/netatalkshorternamelinks.pl
! 	contrib/timelord/Makefile
! 	distrib/Makefile
! 	distrib/config/Makefile
! 	distrib/config/netatalk-config
! 	distrib/initscripts/Makefile
! 	distrib/m4/Makefile
! 	doc/Makefile
! 	etc/Makefile
! 	etc/afpd/Makefile
! 	etc/afpd/nls/Makefile
! 	etc/atalkd/Makefile
! 	etc/uams/Makefile
! 	etc/uams/uams_krb4/Makefile
! 	etc/papd/Makefile
! 	etc/psf/Makefile
! 	include/Makefile
! 	include/atalk/Makefile
! 	libatalk/Makefile
! 	libatalk/adouble/Makefile
! 	libatalk/asp/Makefile
! 	libatalk/atp/Makefile
! 	libatalk/cnid/Makefile
! 	libatalk/compat/Makefile
! 	libatalk/dsi/Makefile
! 	libatalk/nbp/Makefile
! 	libatalk/netddp/Makefile
! 	libatalk/util/Makefile
! 	macros/Makefile
! 	man/Makefile
! 	man/man1/Makefile
! 	man/man3/Makefile
! 	man/man4/Makefile
! 	man/man5/Makefile
! 	man/man8/Makefile
! 	sys/Makefile
! 	sys/generic/Makefile
! 	sys/generic/sys/Makefile
! 	sys/netatalk/Makefile
! 	sys/netbsd/Makefile
! 	sys/netbsd/netatalk/Makefile
! 	sys/solaris/Makefile
! 	sys/solaris/Makefile.kernel
! 	sys/sunos/Makefile
! 	sys/ultrix/Makefile
! 	"}
! EOF
! cat >> $CONFIG_STATUS <<\EOF
! for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
!   # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
!   case "$ac_file" in
!   *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
!        ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
!   *) ac_file_in="${ac_file}.in" ;;
    esac
  
!   # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.
  
!   # Remove last slash and all that follows it.  Not all systems have dirname.
!   ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
!   if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
!     # The file is in a subdirectory.
!     test ! -d "$ac_dir" && mkdir "$ac_dir"
!     ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
!     # A "../" for each directory in $ac_dir_suffix.
!     ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
!   else
!     ac_dir_suffix= ac_dots=
    fi
  
!   case "$ac_given_srcdir" in
!   .)  srcdir=.
!       if test -z "$ac_dots"; then top_srcdir=.
!       else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
!   /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
!   *) # Relative path.
!     srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
!     top_srcdir="$ac_dots$ac_given_srcdir" ;;
    esac
  
!   case "$ac_given_INSTALL" in
!   [/$]*) INSTALL="$ac_given_INSTALL" ;;
!   *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
    esac
  
!   echo creating "$ac_file"
!   rm -f "$ac_file"
!   configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
!   case "$ac_file" in
!   *Makefile*) ac_comsub="1i\\
! # $configure_input" ;;
!   *) ac_comsub= ;;
    esac
  
!   ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
!   sed -e "$ac_comsub
! s%@configure_input@%$configure_input%g
! s%@srcdir@%$srcdir%g
! s%@top_srcdir@%$top_srcdir%g
! s%@INSTALL@%$INSTALL%g
! " $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
! fi; done
! rm -f conftest.s*
  
  # These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
  # NAME is the cpp macro being defined and VALUE is the value it is being given.
  #
  # ac_d sets the value in "#define NAME VALUE" lines.
! ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
! ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
! ac_dC='\3'
! ac_dD='%g'
! # ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
! ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
! ac_uB='\([ 	]\)%\1#\2define\3'
  ac_uC=' '
! ac_uD='\4%g'
! # ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
! ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
! ac_eB='$%\1#\2define\3'
! ac_eC=' '
! ac_eD='%g'
  
! if test "${CONFIG_HEADERS+set}" != set; then
! EOF
! cat >> $CONFIG_STATUS <<EOF
!   CONFIG_HEADERS="config.h"
! EOF
! cat >> $CONFIG_STATUS <<\EOF
! fi
! for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
    # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
!   case "$ac_file" in
!   *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
!        ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
!   *) ac_file_in="${ac_file}.in" ;;
    esac
  
!   echo creating $ac_file
  
!   rm -f conftest.frag conftest.in conftest.out
!   ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
!   cat $ac_file_inputs > conftest.in
  
! EOF
  
! # Transform confdefs.h into a sed script conftest.vals that substitutes
! # the proper values into config.h.in to produce config.h.  And first:
! # Protect against being on the right side of a sed subst in config.status.
! # Protect against being in an unquoted here document in config.status.
! rm -f conftest.vals
! cat > conftest.hdr <<\EOF
! s/[\\&%]/\\&/g
! s%[\\$`]%\\&%g
! s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
! s%ac_d%ac_u%gp
! s%ac_u%ac_e%gp
! EOF
! sed -n -f conftest.hdr confdefs.h > conftest.vals
! rm -f conftest.hdr
  
  # This sed command replaces #undef with comments.  This is necessary, for
  # example, in the case of _POSIX_SOURCE, which is predefined and required
  # on some systems where configure will not decide to define it.
! cat >> conftest.vals <<\EOF
! s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
! EOF
  
! # Break up conftest.vals because some shells have a limit on
! # the size of here documents, and old seds have small limits too.
  
  rm -f conftest.tail
! while :
  do
!   ac_lines=`grep -c . conftest.vals`
!   # grep -c gives empty output for an empty file on some AIX systems.
!   if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
!   # Write a limited-size here document to conftest.frag.
!   echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
!   sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
    echo 'CEOF
!   sed -f conftest.frag conftest.in > conftest.out
!   rm -f conftest.in
!   mv conftest.out conftest.in
! ' >> $CONFIG_STATUS
!   sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
!   rm -f conftest.vals
!   mv conftest.tail conftest.vals
  done
! rm -f conftest.vals
  
! cat >> $CONFIG_STATUS <<\EOF
!   rm -f conftest.frag conftest.h
!   echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
!   cat conftest.in >> conftest.h
!   rm -f conftest.in
!   if cmp -s $ac_file conftest.h 2>/dev/null; then
!     echo "$ac_file is unchanged"
!     rm -f conftest.h
    else
!     # Remove last slash and all that follows it.  Not all systems have dirname.
!       ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
!       if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
!       # The file is in a subdirectory.
!       test ! -d "$ac_dir" && mkdir "$ac_dir"
!     fi
!     rm -f $ac_file
!     mv conftest.h $ac_file
    fi
! fi; done
  
! EOF
! cat >> $CONFIG_STATUS <<EOF
! am_indx=1
! for am_file in config.h; do
!   case " \$CONFIG_HEADERS " in
!   *" \$am_file "*)
!     am_dir=\`echo \$am_file |sed 's%:.*%%;s%[^/]*\$%%'\`
!     if test -n "\$am_dir"; then
!       am_tmpdir=\`echo \$am_dir |sed 's%^\(/*\).*\$%\1%'\`
!       for am_subdir in \`echo \$am_dir |sed 's%/% %'\`; do
!         am_tmpdir=\$am_tmpdir\$am_subdir/
!         if test ! -d \$am_tmpdir; then
!           mkdir \$am_tmpdir
!         fi
!       done
      fi
!     echo timestamp > "\$am_dir"stamp-h\$am_indx
!     ;;
    esac
-   am_indx=\`expr \$am_indx + 1\`
  done
! AMDEP_TRUE="$AMDEP_TRUE"
! ac_aux_dir="$ac_aux_dir"
  
- EOF
- cat >> $CONFIG_STATUS <<\EOF
- test -z "$CONFIG_HEADERS" || echo timestamp >	   stamp-h
  
  test x"$AMDEP_TRUE" != x"" ||
  for mf in $CONFIG_FILES; do
    case "$mf" in
--- 13495,14724 ----
  fi
  
  
! ac_config_files="$ac_config_files Makefile bin/Makefile bin/adv1tov2/Makefile bin/aecho/Makefile bin/afile/Makefile bin/afppasswd/Makefile bin/cnid/Makefile bin/cnid/cnid_maint bin/getzones/Makefile bin/megatron/Makefile bin/nbp/Makefile bin/pap/Makefile bin/psorder/Makefile config/Makefile contrib/Makefile contrib/macusers/Makefile contrib/macusers/macusers contrib/nu/Makefile contrib/nu/nu contrib/printing/Makefile contrib/shell_utils/Makefile contrib/shell_utils/afpd-mtab.pl contrib/shell_utils/apple_cp contrib/shell_utils/apple_mv contrib/shell_utils/apple_rm contrib/shell_utils/cleanappledouble.pl contrib/shell_utils/netatalkshorternamelinks.pl contrib/timelord/Makefile distrib/Makefile distrib/config/Makefile distrib/config/netatalk-config distrib/initscripts/Makefile distrib/m4/Makefile doc/Makefile etc/Makefile etc/afpd/Makefile etc/afpd/nls/Makefile etc/atalkd/Makefile etc/uams/Makefile etc/uams/uams_krb4/Makefile etc/papd/Makefile etc/psf/Makefile include/Makefile include/atalk/Makefile libatalk/Makefile libatalk/adouble/Makefile libatalk/asp/Makefile libatalk/atp/Makefile libatalk/cnid/Makefile libatalk/compat/Makefile libatalk/dsi/Makefile libatalk/nbp/Makefile libatalk/netddp/Makefile libatalk/util/Makefile macros/Makefile man/Makefile man/man1/Makefile man/man3/Makefile man/man4/Makefile man/man5/Makefile man/man8/Makefile sys/Makefile sys/generic/Makefile sys/generic/sys/Makefile sys/netatalk/Makefile sys/netbsd/Makefile sys/netbsd/netatalk/Makefile sys/solaris/Makefile sys/solaris/Makefile.kernel sys/sunos/Makefile sys/ultrix/Makefile"
! ac_config_commands="$ac_config_commands default"
! cat >confcache <<\_ACEOF
  # This file is a shell script that caches the results of configure
  # tests run on this system so they can be shared between configure
! # scripts and configure runs, see configure's option --config-cache.
! # It is not useful on other systems.  If it contains results you don't
! # want to keep, you may remove or edit it.
  #
! # config.status only pays attention to the cache file if you give it
! # the --recheck option to rerun configure.
  #
! # `ac_cv_env_foo' variables (set or unset) will be overriden when
! # loading this file, other *unset* `ac_cv_foo' will be assigned the
! # following values.
! 
! _ACEOF
! 
  # The following way of writing the cache mishandles newlines in values,
  # but we know of no workaround that is simple, portable, and efficient.
  # So, don't put newlines in cache variables' values.
  # Ultrix sh set writes to stderr and can't be redirected directly,
  # and sets the high bit in the cache file unless we assign to the vars.
! {
!   (set) 2>&1 |
!     case `(ac_space=' '; set | grep ac_space) 2>&1` in
!     *ac_space=\ *)
!       # `set' does not quote correctly, so add quotes (double-quote
!       # substitution turns \\\\ into \\, and sed turns \\ into \).
!       sed -n \
!         "s/'/'\\\\''/g;
!     	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
!       ;;
!     *)
!       # `set' quotes correctly as required by POSIX, so do not add quotes.
!       sed -n \
!         "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
!       ;;
!     esac;
! } |
!   sed '
!      t clear
!      : clear
!      s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
!      t end
!      /^ac_cv_env/!s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
!      : end' >>confcache
! if cmp -s $cache_file confcache; then :; else
    if test -w $cache_file; then
!     test "x$cache_file" != "x/dev/null" && echo "updating cache $cache_file"
!     cat confcache >$cache_file
    else
      echo "not updating unwritable cache $cache_file"
    fi
  fi
  rm -f confcache
  
  test "x$prefix" = xNONE && prefix=$ac_default_prefix
  # Let make expand exec_prefix.
  test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
  
! # VPATH may cause trouble with some makes, so we remove $(srcdir),
! # ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
! # trailing colons and then remove the whole line if VPATH becomes empty
! # (actually we leave an empty line to preserve line numbers).
  if test "x$srcdir" = x.; then
!   ac_vpsub='/^[ 	]*VPATH[ 	]*=/{
! s/:*\$(srcdir):*/:/;
! s/:*\${srcdir}:*/:/;
! s/:*@srcdir@:*/:/;
! s/^\([^=]*=[ 	]*\):*/\1/;
! s/:*$//;
! s/^[^=]*=[ 	]*$//;
! }'
  fi
  
  DEFS=-DHAVE_CONFIG_H
  
  
! : ${CONFIG_STATUS=./config.status}
! ac_clean_files_save=$ac_clean_files
! ac_clean_files="$ac_clean_files $CONFIG_STATUS"
! { echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
! echo "$as_me: creating $CONFIG_STATUS" >&6;}
! cat >$CONFIG_STATUS <<_ACEOF
! #! $SHELL
! # Generated by $as_me.
  # Run this file to recreate the current configuration.
  # Compiler output produced by configure, useful for debugging
! # configure, is in config.log if it exists.
  
! debug=false
! SHELL=\${CONFIG_SHELL-$SHELL}
! _ACEOF
! 
! cat >>$CONFIG_STATUS <<\_ACEOF
! 
! ## --------------------- ##
! ## M4sh Initialization.  ##
! ## --------------------- ##
! 
! # Be Bourne compatible
! if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
!   emulate sh
!   NULLCMD=:
! elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
!   set -o posix
! fi
! 
! # NLS nuisances.
! # Support unset when possible.
! if (FOO=FOO; unset FOO) >/dev/null 2>&1; then
!   as_unset=unset
! else
!   as_unset=false
! fi
! 
! (set +x; test -n "`(LANG=C; export LANG) 2>&1`") &&
!     { $as_unset LANG || test "${LANG+set}" != set; } ||
!       { LANG=C; export LANG; }
! (set +x; test -n "`(LC_ALL=C; export LC_ALL) 2>&1`") &&
!     { $as_unset LC_ALL || test "${LC_ALL+set}" != set; } ||
!       { LC_ALL=C; export LC_ALL; }
! (set +x; test -n "`(LC_TIME=C; export LC_TIME) 2>&1`") &&
!     { $as_unset LC_TIME || test "${LC_TIME+set}" != set; } ||
!       { LC_TIME=C; export LC_TIME; }
! (set +x; test -n "`(LC_CTYPE=C; export LC_CTYPE) 2>&1`") &&
!     { $as_unset LC_CTYPE || test "${LC_CTYPE+set}" != set; } ||
!       { LC_CTYPE=C; export LC_CTYPE; }
! (set +x; test -n "`(LANGUAGE=C; export LANGUAGE) 2>&1`") &&
!     { $as_unset LANGUAGE || test "${LANGUAGE+set}" != set; } ||
!       { LANGUAGE=C; export LANGUAGE; }
! (set +x; test -n "`(LC_COLLATE=C; export LC_COLLATE) 2>&1`") &&
!     { $as_unset LC_COLLATE || test "${LC_COLLATE+set}" != set; } ||
!       { LC_COLLATE=C; export LC_COLLATE; }
! (set +x; test -n "`(LC_NUMERIC=C; export LC_NUMERIC) 2>&1`") &&
!     { $as_unset LC_NUMERIC || test "${LC_NUMERIC+set}" != set; } ||
!       { LC_NUMERIC=C; export LC_NUMERIC; }
! (set +x; test -n "`(LC_MESSAGES=C; export LC_MESSAGES) 2>&1`") &&
!     { $as_unset LC_MESSAGES || test "${LC_MESSAGES+set}" != set; } ||
!       { LC_MESSAGES=C; export LC_MESSAGES; }
! 
! 
! # Name of the executable.
! as_me=`(basename "$0") 2>/dev/null ||
! $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
! 	 X"$0" : 'X\(//\)$' \| \
! 	 X"$0" : 'X\(/\)$' \| \
! 	 .     : '\(.\)' 2>/dev/null ||
! echo X/"$0" |
!     sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
!   	  /^X\/\(\/\/\)$/{ s//\1/; q; }
!   	  /^X\/\(\/\).*/{ s//\1/; q; }
!   	  s/.*/./; q'`
! 
! # PATH needs CR, and LINENO needs CR and PATH.
! # Avoid depending upon Character Ranges.
! as_cr_letters='abcdefghijklmnopqrstuvwxyz'
! as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
! as_cr_Letters=$as_cr_letters$as_cr_LETTERS
! as_cr_digits='0123456789'
! as_cr_alnum=$as_cr_Letters$as_cr_digits
! 
! # The user is always right.
! if test "${PATH_SEPARATOR+set}" != set; then
!   echo "#! /bin/sh" >conftest.sh
!   echo  "exit 0"   >>conftest.sh
!   chmod +x conftest.sh
!   if (PATH=".;."; conftest.sh) >/dev/null 2>&1; then
!     PATH_SEPARATOR=';'
!   else
!     PATH_SEPARATOR=:
!   fi
!   rm -f conftest.sh
! fi
! 
! 
!   as_lineno_1=$LINENO
!   as_lineno_2=$LINENO
!   as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
!   test "x$as_lineno_1" != "x$as_lineno_2" &&
!   test "x$as_lineno_3"  = "x$as_lineno_2"  || {
!   # Find who we are.  Look in the path if we contain no path at all
!   # relative or not.
!   case $0 in
!     *[\\/]* ) as_myself=$0 ;;
!     *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
! for as_dir in $PATH
  do
!   IFS=$as_save_IFS
!   test -z "$as_dir" && as_dir=.
!   test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
! done
! 
!        ;;
    esac
+   # We did not find ourselves, most probably we were run as `sh COMMAND'
+   # in which case we are not to be found in the path.
+   if test "x$as_myself" = x; then
+     as_myself=$0
+   fi
+   if test ! -f "$as_myself"; then
+     { { echo "$as_me:$LINENO: error: cannot find myself; rerun with an absolute path" >&5
+ echo "$as_me: error: cannot find myself; rerun with an absolute path" >&2;}
+    { (exit 1); exit 1; }; }
+   fi
+   case $CONFIG_SHELL in
+   '')
+     as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+   for as_base in sh bash ksh sh5; do
+ 	 case $as_dir in
+ 	 /*)
+ 	   if ("$as_dir/$as_base" -c '
+   as_lineno_1=$LINENO
+   as_lineno_2=$LINENO
+   as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+   test "x$as_lineno_1" != "x$as_lineno_2" &&
+   test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+ 	     CONFIG_SHELL=$as_dir/$as_base
+ 	     export CONFIG_SHELL
+ 	     exec "$CONFIG_SHELL" "$0" ${1+"$@"}
+ 	   fi;;
+ 	 esac
+        done
  done
+ ;;
+   esac
  
!   # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
!   # uniformly replaced by the line number.  The first 'sed' inserts a
!   # line-number line before each line; the second 'sed' does the real
!   # work.  The second script uses 'N' to pair each line-number line
!   # with the numbered line, and appends trailing '-' during
!   # substitution so that $LINENO is not a special case at line end.
!   # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
!   # second 'sed' script.  Blame Lee E. McMahon for sed's syntax.  :-)
!   sed '=' <$as_myself |
!     sed '
!       N
!       s,$,-,
!       : loop
!       s,^\(['$as_cr_digits']*\)\(.*\)[$]LINENO\([^'$as_cr_alnum'_]\),\1\2\1\3,
!       t loop
!       s,-$,,
!       s,^['$as_cr_digits']*\n,,
!     ' >$as_me.lineno &&
!   chmod +x $as_me.lineno ||
!     { { echo "$as_me:$LINENO: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&5
! echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2;}
!    { (exit 1); exit 1; }; }
  
!   # Don't try to exec as it changes $[0], causing all sort of problems
!   # (the dirname of $[0] is not the place where we might find the
!   # original and so on.  Autoconf is especially sensible to this).
!   . ./$as_me.lineno
!   # Exit status is that of the last command.
!   exit
! }
  
  
! case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
!   *c*,-n*) ECHO_N= ECHO_C='
! ' ECHO_T='	' ;;
!   *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
!   *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
! esac
  
! if expr a : '\(a\)' >/dev/null 2>&1; then
!   as_expr=expr
! else
!   as_expr=false
! fi
  
! rm -f conf$$ conf$$.exe conf$$.file
! echo >conf$$.file
! if ln -s conf$$.file conf$$ 2>/dev/null; then
!   # We could just check for DJGPP; but this test a) works b) is more generic
!   # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
!   if test -f conf$$.exe; then
!     # Don't use ln at all; we don't have any links
!     as_ln_s='cp -p'
    else
!     as_ln_s='ln -s'
    fi
! elif ln conf$$.file conf$$ 2>/dev/null; then
!   as_ln_s=ln
! else
!   as_ln_s='cp -p'
  fi
! rm -f conf$$ conf$$.exe conf$$.file
  
! as_executable_p="test -f"
  
! # Sed expression to map a string onto a valid CPP name.
! as_tr_cpp="sed y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g"
! 
! # Sed expression to map a string onto a valid variable name.
! as_tr_sh="sed y%*+%pp%;s%[^_$as_cr_alnum]%_%g"
! 
! 
! # IFS
! # We need space, tab and new line, in precisely that order.
! as_nl='
! '
! IFS=" 	$as_nl"
! 
! # CDPATH.
! $as_unset CDPATH || test "${CDPATH+set}" != set || { CDPATH=$PATH_SEPARATOR; export CDPATH; }
! 
! exec 6>&1
! 
! # Open the log real soon, to keep \$[0] and so on meaningful, and to
! # report actual input values of CONFIG_FILES etc. instead of their
! # values after options handling.  Logging --version etc. is OK.
! exec 5>>config.log
! {
!   echo
!   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
! ## Running $as_me. ##
! _ASBOX
! } >&5
! cat >&5 <<_CSEOF
! 
! This file was extended by $as_me, which was
! generated by GNU Autoconf 2.53.  Invocation command line was
! 
!   CONFIG_FILES    = $CONFIG_FILES
!   CONFIG_HEADERS  = $CONFIG_HEADERS
!   CONFIG_LINKS    = $CONFIG_LINKS
!   CONFIG_COMMANDS = $CONFIG_COMMANDS
!   $ $0 $@
! 
! _CSEOF
! echo "on `(hostname || uname -n) 2>/dev/null | sed 1q`" >&5
! echo >&5
! _ACEOF
! 
! # Files that config.status was made for.
! if test -n "$ac_config_files"; then
!   echo "config_files=\"$ac_config_files\"" >>$CONFIG_STATUS
! fi
! 
! if test -n "$ac_config_headers"; then
!   echo "config_headers=\"$ac_config_headers\"" >>$CONFIG_STATUS
! fi
! 
! if test -n "$ac_config_links"; then
!   echo "config_links=\"$ac_config_links\"" >>$CONFIG_STATUS
! fi
! 
! if test -n "$ac_config_commands"; then
!   echo "config_commands=\"$ac_config_commands\"" >>$CONFIG_STATUS
! fi
! 
! cat >>$CONFIG_STATUS <<\_ACEOF
! 
! ac_cs_usage="\
! \`$as_me' instantiates files from templates according to the
! current configuration.
! 
! Usage: $0 [OPTIONS] [FILE]...
! 
!   -h, --help       print this help, then exit
!   -V, --version    print version number, then exit
!   -d, --debug      don't remove temporary files
!       --recheck    update $as_me by reconfiguring in the same conditions
!   --file=FILE[:TEMPLATE]
!                    instantiate the configuration file FILE
!   --header=FILE[:TEMPLATE]
!                    instantiate the configuration header FILE
! 
! Configuration files:
! $config_files
! 
! Configuration headers:
! $config_headers
! 
! Configuration commands:
! $config_commands
! 
! Report bugs to <bug-autoconf@gnu.org>."
! _ACEOF
! 
! cat >>$CONFIG_STATUS <<_ACEOF
! ac_cs_version="\\
! config.status
! configured by $0, generated by GNU Autoconf 2.53,
!   with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
! 
! Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
! Free Software Foundation, Inc.
! This config.status script is free software; the Free Software Foundation
! gives unlimited permission to copy, distribute and modify it."
! srcdir=$srcdir
! INSTALL="$INSTALL"
! _ACEOF
! 
! cat >>$CONFIG_STATUS <<\_ACEOF
! # If no file are specified by the user, then we need to provide default
! # value.  By we need to know if files were specified by the user.
! ac_need_defaults=:
! while test $# != 0
! do
!   case $1 in
!   --*=*)
!     ac_option=`expr "x$1" : 'x\([^=]*\)='`
!     ac_optarg=`expr "x$1" : 'x[^=]*=\(.*\)'`
!     shift
!     set dummy "$ac_option" "$ac_optarg" ${1+"$@"}
!     shift
!     ;;
!   -*);;
!   *) # This is not an option, so the user has probably given explicit
!      # arguments.
!      ac_need_defaults=false;;
    esac
  
!   case $1 in
!   # Handling of the options.
! _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF
!   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
!     echo "running $SHELL $0 " $ac_configure_args " --no-create --no-recursion"
!     exec $SHELL $0 $ac_configure_args --no-create --no-recursion ;;
! _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF
!   --version | --vers* | -V )
!     echo "$ac_cs_version"; exit 0 ;;
!   --he | --h)
!     # Conflict between --help and --header
!     { { echo "$as_me:$LINENO: error: ambiguous option: $1
! Try \`$0 --help' for more information." >&5
! echo "$as_me: error: ambiguous option: $1
! Try \`$0 --help' for more information." >&2;}
!    { (exit 1); exit 1; }; };;
!   --help | --hel | -h )
!     echo "$ac_cs_usage"; exit 0 ;;
!   --debug | --d* | -d )
!     debug=: ;;
!   --file | --fil | --fi | --f )
!     shift
!     CONFIG_FILES="$CONFIG_FILES $1"
!     ac_need_defaults=false;;
!   --header | --heade | --head | --hea )
!     shift
!     CONFIG_HEADERS="$CONFIG_HEADERS $1"
!     ac_need_defaults=false;;
  
!   # This is an error.
!   -*) { { echo "$as_me:$LINENO: error: unrecognized option: $1
! Try \`$0 --help' for more information." >&5
! echo "$as_me: error: unrecognized option: $1
! Try \`$0 --help' for more information." >&2;}
!    { (exit 1); exit 1; }; } ;;
! 
!   *) ac_config_targets="$ac_config_targets $1" ;;
! 
!   esac
!   shift
! done
! 
! _ACEOF
! 
! cat >>$CONFIG_STATUS <<_ACEOF
! #
! # INIT-COMMANDS section.
! #
! 
! AMDEP_TRUE="$AMDEP_TRUE"
! ac_aux_dir="$ac_aux_dir"
! 
! _ACEOF
! 
! 
! 
! cat >>$CONFIG_STATUS <<\_ACEOF
! for ac_config_target in $ac_config_targets
! do
!   case "$ac_config_target" in
!   # Handling of arguments.
!   "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
!   "bin/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/Makefile" ;;
!   "bin/adv1tov2/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/adv1tov2/Makefile" ;;
!   "bin/aecho/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/aecho/Makefile" ;;
!   "bin/afile/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/afile/Makefile" ;;
!   "bin/afppasswd/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/afppasswd/Makefile" ;;
!   "bin/cnid/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/cnid/Makefile" ;;
!   "bin/cnid/cnid_maint" ) CONFIG_FILES="$CONFIG_FILES bin/cnid/cnid_maint" ;;
!   "bin/getzones/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/getzones/Makefile" ;;
!   "bin/megatron/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/megatron/Makefile" ;;
!   "bin/nbp/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/nbp/Makefile" ;;
!   "bin/pap/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/pap/Makefile" ;;
!   "bin/psorder/Makefile" ) CONFIG_FILES="$CONFIG_FILES bin/psorder/Makefile" ;;
!   "config/Makefile" ) CONFIG_FILES="$CONFIG_FILES config/Makefile" ;;
!   "contrib/Makefile" ) CONFIG_FILES="$CONFIG_FILES contrib/Makefile" ;;
!   "contrib/macusers/Makefile" ) CONFIG_FILES="$CONFIG_FILES contrib/macusers/Makefile" ;;
!   "contrib/macusers/macusers" ) CONFIG_FILES="$CONFIG_FILES contrib/macusers/macusers" ;;
!   "contrib/nu/Makefile" ) CONFIG_FILES="$CONFIG_FILES contrib/nu/Makefile" ;;
!   "contrib/nu/nu" ) CONFIG_FILES="$CONFIG_FILES contrib/nu/nu" ;;
!   "contrib/printing/Makefile" ) CONFIG_FILES="$CONFIG_FILES contrib/printing/Makefile" ;;
!   "contrib/shell_utils/Makefile" ) CONFIG_FILES="$CONFIG_FILES contrib/shell_utils/Makefile" ;;
!   "contrib/shell_utils/afpd-mtab.pl" ) CONFIG_FILES="$CONFIG_FILES contrib/shell_utils/afpd-mtab.pl" ;;
!   "contrib/shell_utils/apple_cp" ) CONFIG_FILES="$CONFIG_FILES contrib/shell_utils/apple_cp" ;;
!   "contrib/shell_utils/apple_mv" ) CONFIG_FILES="$CONFIG_FILES contrib/shell_utils/apple_mv" ;;
!   "contrib/shell_utils/apple_rm" ) CONFIG_FILES="$CONFIG_FILES contrib/shell_utils/apple_rm" ;;
!   "contrib/shell_utils/cleanappledouble.pl" ) CONFIG_FILES="$CONFIG_FILES contrib/shell_utils/cleanappledouble.pl" ;;
!   "contrib/shell_utils/netatalkshorternamelinks.pl" ) CONFIG_FILES="$CONFIG_FILES contrib/shell_utils/netatalkshorternamelinks.pl" ;;
!   "contrib/timelord/Makefile" ) CONFIG_FILES="$CONFIG_FILES contrib/timelord/Makefile" ;;
!   "distrib/Makefile" ) CONFIG_FILES="$CONFIG_FILES distrib/Makefile" ;;
!   "distrib/config/Makefile" ) CONFIG_FILES="$CONFIG_FILES distrib/config/Makefile" ;;
!   "distrib/config/netatalk-config" ) CONFIG_FILES="$CONFIG_FILES distrib/config/netatalk-config" ;;
!   "distrib/initscripts/Makefile" ) CONFIG_FILES="$CONFIG_FILES distrib/initscripts/Makefile" ;;
!   "distrib/m4/Makefile" ) CONFIG_FILES="$CONFIG_FILES distrib/m4/Makefile" ;;
!   "doc/Makefile" ) CONFIG_FILES="$CONFIG_FILES doc/Makefile" ;;
!   "etc/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/Makefile" ;;
!   "etc/afpd/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/afpd/Makefile" ;;
!   "etc/afpd/nls/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/afpd/nls/Makefile" ;;
!   "etc/atalkd/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/atalkd/Makefile" ;;
!   "etc/uams/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/uams/Makefile" ;;
!   "etc/uams/uams_krb4/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/uams/uams_krb4/Makefile" ;;
!   "etc/papd/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/papd/Makefile" ;;
!   "etc/psf/Makefile" ) CONFIG_FILES="$CONFIG_FILES etc/psf/Makefile" ;;
!   "include/Makefile" ) CONFIG_FILES="$CONFIG_FILES include/Makefile" ;;
!   "include/atalk/Makefile" ) CONFIG_FILES="$CONFIG_FILES include/atalk/Makefile" ;;
!   "libatalk/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/Makefile" ;;
!   "libatalk/adouble/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/adouble/Makefile" ;;
!   "libatalk/asp/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/asp/Makefile" ;;
!   "libatalk/atp/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/atp/Makefile" ;;
!   "libatalk/cnid/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/cnid/Makefile" ;;
!   "libatalk/compat/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/compat/Makefile" ;;
!   "libatalk/dsi/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/dsi/Makefile" ;;
!   "libatalk/nbp/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/nbp/Makefile" ;;
!   "libatalk/netddp/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/netddp/Makefile" ;;
!   "libatalk/util/Makefile" ) CONFIG_FILES="$CONFIG_FILES libatalk/util/Makefile" ;;
!   "macros/Makefile" ) CONFIG_FILES="$CONFIG_FILES macros/Makefile" ;;
!   "man/Makefile" ) CONFIG_FILES="$CONFIG_FILES man/Makefile" ;;
!   "man/man1/Makefile" ) CONFIG_FILES="$CONFIG_FILES man/man1/Makefile" ;;
!   "man/man3/Makefile" ) CONFIG_FILES="$CONFIG_FILES man/man3/Makefile" ;;
!   "man/man4/Makefile" ) CONFIG_FILES="$CONFIG_FILES man/man4/Makefile" ;;
!   "man/man5/Makefile" ) CONFIG_FILES="$CONFIG_FILES man/man5/Makefile" ;;
!   "man/man8/Makefile" ) CONFIG_FILES="$CONFIG_FILES man/man8/Makefile" ;;
!   "sys/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/Makefile" ;;
!   "sys/generic/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/generic/Makefile" ;;
!   "sys/generic/sys/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/generic/sys/Makefile" ;;
!   "sys/netatalk/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/netatalk/Makefile" ;;
!   "sys/netbsd/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/netbsd/Makefile" ;;
!   "sys/netbsd/netatalk/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/netbsd/netatalk/Makefile" ;;
!   "sys/solaris/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/solaris/Makefile" ;;
!   "sys/solaris/Makefile.kernel" ) CONFIG_FILES="$CONFIG_FILES sys/solaris/Makefile.kernel" ;;
!   "sys/sunos/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/sunos/Makefile" ;;
!   "sys/ultrix/Makefile" ) CONFIG_FILES="$CONFIG_FILES sys/ultrix/Makefile" ;;
!   "default-1" ) CONFIG_COMMANDS="$CONFIG_COMMANDS default-1" ;;
!   "default" ) CONFIG_COMMANDS="$CONFIG_COMMANDS default" ;;
!   "config.h" ) CONFIG_HEADERS="$CONFIG_HEADERS config.h" ;;
!   *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
! echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
!    { (exit 1); exit 1; }; };;
!   esac
! done
! 
! # If the user did not use the arguments to specify the items to instantiate,
! # then the envvar interface is used.  Set only those that are not.
! # We use the long form for the default assignment because of an extremely
! # bizarre bug on SunOS 4.1.3.
! if $ac_need_defaults; then
!   test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
!   test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
!   test "${CONFIG_COMMANDS+set}" = set || CONFIG_COMMANDS=$config_commands
! fi
! 
! # Create a temporary directory, and hook for its removal unless debugging.
! $debug ||
! {
!   trap 'exit_status=$?; rm -rf $tmp && exit $exit_status' 0
!   trap '{ (exit 1); exit 1; }' 1 2 13 15
! }
! 
! # Create a (secure) tmp directory for tmp files.
! : ${TMPDIR=/tmp}
! {
!   tmp=`(umask 077 && mktemp -d -q "$TMPDIR/csXXXXXX") 2>/dev/null` &&
!   test -n "$tmp" && test -d "$tmp"
! }  ||
! {
!   tmp=$TMPDIR/cs$$-$RANDOM
!   (umask 077 && mkdir $tmp)
! } ||
! {
!    echo "$me: cannot create a temporary directory in $TMPDIR" >&2
!    { (exit 1); exit 1; }
! }
! 
! _ACEOF
! 
! cat >>$CONFIG_STATUS <<_ACEOF
! 
! #
! # CONFIG_FILES section.
! #
! 
! # No need to generate the scripts if there are no CONFIG_FILES.
! # This happens for instance when ./config.status config.h
! if test -n "\$CONFIG_FILES"; then
!   # Protect against being on the right side of a sed subst in config.status.
!   sed 's/,@/@@/; s/@,/@@/; s/,;t t\$/@;t t/; /@;t t\$/s/[\\\\&,]/\\\\&/g;
!    s/@@/,@/; s/@@/@,/; s/@;t t\$/,;t t/' >\$tmp/subs.sed <<\\CEOF
! s,@PERL@,$PERL,;t t
! s,@GREP@,$GREP,;t t
! s,@PS@,$PS,;t t
! s,@SHELL@,$SHELL,;t t
! s,@PATH_SEPARATOR@,$PATH_SEPARATOR,;t t
! s,@PACKAGE_NAME@,$PACKAGE_NAME,;t t
! s,@PACKAGE_TARNAME@,$PACKAGE_TARNAME,;t t
! s,@PACKAGE_VERSION@,$PACKAGE_VERSION,;t t
! s,@PACKAGE_STRING@,$PACKAGE_STRING,;t t
! s,@PACKAGE_BUGREPORT@,$PACKAGE_BUGREPORT,;t t
! s,@exec_prefix@,$exec_prefix,;t t
! s,@prefix@,$prefix,;t t
! s,@program_transform_name@,$program_transform_name,;t t
! s,@bindir@,$bindir,;t t
! s,@sbindir@,$sbindir,;t t
! s,@libexecdir@,$libexecdir,;t t
! s,@datadir@,$datadir,;t t
! s,@sysconfdir@,$sysconfdir,;t t
! s,@sharedstatedir@,$sharedstatedir,;t t
! s,@localstatedir@,$localstatedir,;t t
! s,@libdir@,$libdir,;t t
! s,@includedir@,$includedir,;t t
! s,@oldincludedir@,$oldincludedir,;t t
! s,@infodir@,$infodir,;t t
! s,@mandir@,$mandir,;t t
! s,@build_alias@,$build_alias,;t t
! s,@host_alias@,$host_alias,;t t
! s,@target_alias@,$target_alias,;t t
! s,@DEFS@,$DEFS,;t t
! s,@ECHO_C@,$ECHO_C,;t t
! s,@ECHO_N@,$ECHO_N,;t t
! s,@ECHO_T@,$ECHO_T,;t t
! s,@LIBS@,$LIBS,;t t
! s,@NETATALK_VERSION@,$NETATALK_VERSION,;t t
! s,@build@,$build,;t t
! s,@build_cpu@,$build_cpu,;t t
! s,@build_vendor@,$build_vendor,;t t
! s,@build_os@,$build_os,;t t
! s,@host@,$host,;t t
! s,@host_cpu@,$host_cpu,;t t
! s,@host_vendor@,$host_vendor,;t t
! s,@host_os@,$host_os,;t t
! s,@target@,$target,;t t
! s,@target_cpu@,$target_cpu,;t t
! s,@target_vendor@,$target_vendor,;t t
! s,@target_os@,$target_os,;t t
! s,@INSTALL_PROGRAM@,$INSTALL_PROGRAM,;t t
! s,@INSTALL_SCRIPT@,$INSTALL_SCRIPT,;t t
! s,@INSTALL_DATA@,$INSTALL_DATA,;t t
! s,@PACKAGE@,$PACKAGE,;t t
! s,@VERSION@,$VERSION,;t t
! s,@EXEEXT@,$EXEEXT,;t t
! s,@OBJEXT@,$OBJEXT,;t t
! s,@ACLOCAL@,$ACLOCAL,;t t
! s,@AUTOCONF@,$AUTOCONF,;t t
! s,@AUTOMAKE@,$AUTOMAKE,;t t
! s,@AUTOHEADER@,$AUTOHEADER,;t t
! s,@MAKEINFO@,$MAKEINFO,;t t
! s,@AMTAR@,$AMTAR,;t t
! s,@install_sh@,$install_sh,;t t
! s,@INSTALL_STRIP_PROGRAM@,$INSTALL_STRIP_PROGRAM,;t t
! s,@AWK@,$AWK,;t t
! s,@SET_MAKE@,$SET_MAKE,;t t
! s,@AMDEP_TRUE@,$AMDEP_TRUE,;t t
! s,@AMDEP_FALSE@,$AMDEP_FALSE,;t t
! s,@AMDEPBACKSLASH@,$AMDEPBACKSLASH,;t t
! s,@DEPDIR@,$DEPDIR,;t t
! s,@CC@,$CC,;t t
! s,@CFLAGS@,$CFLAGS,;t t
! s,@LDFLAGS@,$LDFLAGS,;t t
! s,@CPPFLAGS@,$CPPFLAGS,;t t
! s,@ac_ct_CC@,$ac_ct_CC,;t t
! s,@am__include@,$am__include,;t t
! s,@am__quote@,$am__quote,;t t
! s,@CCDEPMODE@,$CCDEPMODE,;t t
! s,@LN_S@,$LN_S,;t t
! s,@ECHO@,$ECHO,;t t
! s,@RANLIB@,$RANLIB,;t t
! s,@ac_ct_RANLIB@,$ac_ct_RANLIB,;t t
! s,@STRIP@,$STRIP,;t t
! s,@ac_ct_STRIP@,$ac_ct_STRIP,;t t
! s,@CPP@,$CPP,;t t
! s,@LIBTOOL@,$LIBTOOL,;t t
! s,@LIBOBJS@,$LIBOBJS,;t t
! s,@AFS_LIBS@,$AFS_LIBS,;t t
! s,@AFS_CFLAGS@,$AFS_CFLAGS,;t t
! s,@PKGCONFDIR@,$PKGCONFDIR,;t t
! s,@NLSDIR@,$NLSDIR,;t t
! s,@COMPILE_CNID_TRUE@,$COMPILE_CNID_TRUE,;t t
! s,@COMPILE_CNID_FALSE@,$COMPILE_CNID_FALSE,;t t
! s,@DB3_CFLAGS@,$DB3_CFLAGS,;t t
! s,@DB3_LIBS@,$DB3_LIBS,;t t
! s,@DB3_PATH@,$DB3_PATH,;t t
! s,@QUOTA_LIBS@,$QUOTA_LIBS,;t t
! s,@SERVERTEXT@,$SERVERTEXT,;t t
! s,@SLP_LIBS@,$SLP_LIBS,;t t
! s,@SLP_CFLAGS@,$SLP_CFLAGS,;t t
! s,@PAMDIR@,$PAMDIR,;t t
! s,@PAM_CFLAGS@,$PAM_CFLAGS,;t t
! s,@PAM_LIBS@,$PAM_LIBS,;t t
! s,@UAMS_PATH@,$UAMS_PATH,;t t
! s,@SSL_CFLAGS@,$SSL_CFLAGS,;t t
! s,@SSL_LIBS@,$SSL_LIBS,;t t
! s,@AFPD_LIBS@,$AFPD_LIBS,;t t
! s,@PAPD_LIBS@,$PAPD_LIBS,;t t
! s,@OVERWRITE_CONFIG@,$OVERWRITE_CONFIG,;t t
! s,@SOLARIS_MODULE_TRUE@,$SOLARIS_MODULE_TRUE,;t t
! s,@SOLARIS_MODULE_FALSE@,$SOLARIS_MODULE_FALSE,;t t
! s,@COMPILE_TIMELORD_TRUE@,$COMPILE_TIMELORD_TRUE,;t t
! s,@COMPILE_TIMELORD_FALSE@,$COMPILE_TIMELORD_FALSE,;t t
! s,@USE_DHX_TRUE@,$USE_DHX_TRUE,;t t
! s,@USE_DHX_FALSE@,$USE_DHX_FALSE,;t t
! s,@USE_KERBEROS_TRUE@,$USE_KERBEROS_TRUE,;t t
! s,@USE_KERBEROS_FALSE@,$USE_KERBEROS_FALSE,;t t
! s,@USE_PAM_SO_TRUE@,$USE_PAM_SO_TRUE,;t t
! s,@USE_PAM_SO_FALSE@,$USE_PAM_SO_FALSE,;t t
! s,@USE_PAM_TRUE@,$USE_PAM_TRUE,;t t
! s,@USE_PAM_FALSE@,$USE_PAM_FALSE,;t t
! s,@BUILD_PAM_TRUE@,$BUILD_PAM_TRUE,;t t
! s,@BUILD_PAM_FALSE@,$BUILD_PAM_FALSE,;t t
! s,@USE_PGP_TRUE@,$USE_PGP_TRUE,;t t
! s,@USE_PGP_FALSE@,$USE_PGP_FALSE,;t t
! s,@USE_COBALT_TRUE@,$USE_COBALT_TRUE,;t t
! s,@USE_COBALT_FALSE@,$USE_COBALT_FALSE,;t t
! s,@USE_NETBSD_TRUE@,$USE_NETBSD_TRUE,;t t
! s,@USE_NETBSD_FALSE@,$USE_NETBSD_FALSE,;t t
! s,@USE_REDHAT_TRUE@,$USE_REDHAT_TRUE,;t t
! s,@USE_REDHAT_FALSE@,$USE_REDHAT_FALSE,;t t
! s,@USE_SUSE_TRUE@,$USE_SUSE_TRUE,;t t
! s,@USE_SUSE_FALSE@,$USE_SUSE_FALSE,;t t
! s,@USE_SHADOWPW_TRUE@,$USE_SHADOWPW_TRUE,;t t
! s,@USE_SHADOWPW_FALSE@,$USE_SHADOWPW_FALSE,;t t
! s,@USE_TRU64_TRUE@,$USE_TRU64_TRUE,;t t
! s,@USE_TRU64_FALSE@,$USE_TRU64_FALSE,;t t
! CEOF
! 
! _ACEOF
! 
!   cat >>$CONFIG_STATUS <<\_ACEOF
!   # Split the substitutions into bite-sized pieces for seds with
!   # small command number limits, like on Digital OSF/1 and HP-UX.
!   ac_max_sed_lines=48
!   ac_sed_frag=1 # Number of current file.
!   ac_beg=1 # First line for current file.
!   ac_end=$ac_max_sed_lines # Line after last line for current file.
!   ac_more_lines=:
!   ac_sed_cmds=
!   while $ac_more_lines; do
!     if test $ac_beg -gt 1; then
!       sed "1,${ac_beg}d; ${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
!     else
!       sed "${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
!     fi
!     if test ! -s $tmp/subs.frag; then
!       ac_more_lines=false
!     else
!       # The purpose of the label and of the branching condition is to
!       # speed up the sed processing (if there are no `@' at all, there
!       # is no need to browse any of the substitutions).
!       # These are the two extra sed commands mentioned above.
!       (echo ':t
!   /@[a-zA-Z_][a-zA-Z_0-9]*@/!b' && cat $tmp/subs.frag) >$tmp/subs-$ac_sed_frag.sed
!       if test -z "$ac_sed_cmds"; then
!   	ac_sed_cmds="sed -f $tmp/subs-$ac_sed_frag.sed"
!       else
!   	ac_sed_cmds="$ac_sed_cmds | sed -f $tmp/subs-$ac_sed_frag.sed"
!       fi
!       ac_sed_frag=`expr $ac_sed_frag + 1`
!       ac_beg=$ac_end
!       ac_end=`expr $ac_end + $ac_max_sed_lines`
!     fi
!   done
!   if test -z "$ac_sed_cmds"; then
!     ac_sed_cmds=cat
    fi
+ fi # test -n "$CONFIG_FILES"
  
! _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF
! for ac_file in : $CONFIG_FILES; do test "x$ac_file" = x: && continue
!   # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
!   case $ac_file in
!   - | *:- | *:-:* ) # input from stdin
!         cat >$tmp/stdin
!         ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
!         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
!   *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
!         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
!   * )   ac_file_in=$ac_file.in ;;
    esac
  
!   # Compute @srcdir@, @top_srcdir@, and @INSTALL@ for subdirectories.
!   ac_dir=`(dirname "$ac_file") 2>/dev/null ||
! $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
!          X"$ac_file" : 'X\(//\)[^/]' \| \
!          X"$ac_file" : 'X\(//\)$' \| \
!          X"$ac_file" : 'X\(/\)' \| \
!          .     : '\(.\)' 2>/dev/null ||
! echo X"$ac_file" |
!     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
!   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
!   	  /^X\(\/\/\)$/{ s//\1/; q; }
!   	  /^X\(\/\).*/{ s//\1/; q; }
!   	  s/.*/./; q'`
!   { case "$ac_dir" in
!   [\\/]* | ?:[\\/]* ) as_incr_dir=;;
!   *)                      as_incr_dir=.;;
! esac
! as_dummy="$ac_dir"
! for as_mkdir_dir in `IFS='/\\'; set X $as_dummy; shift; echo "$@"`; do
!   case $as_mkdir_dir in
!     # Skip DOS drivespec
!     ?:) as_incr_dir=$as_mkdir_dir ;;
!     *)
!       as_incr_dir=$as_incr_dir/$as_mkdir_dir
!       test -d "$as_incr_dir" ||
!         mkdir "$as_incr_dir" ||
! 	{ { echo "$as_me:$LINENO: error: cannot create \"$ac_dir\"" >&5
! echo "$as_me: error: cannot create \"$ac_dir\"" >&2;}
!    { (exit 1); exit 1; }; }
!     ;;
    esac
+ done; }
  
!   ac_builddir=.
! 
! if test "$ac_dir" != .; then
!   ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
!   # A "../" for each directory in $ac_dir_suffix.
!   ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
! else
!   ac_dir_suffix= ac_top_builddir=
! fi
! 
! case $srcdir in
!   .)  # No --srcdir option.  We are building in place.
!     ac_srcdir=.
!     if test -z "$ac_top_builddir"; then
!        ac_top_srcdir=.
!     else
!        ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
!     fi ;;
!   [\\/]* | ?:[\\/]* )  # Absolute path.
!     ac_srcdir=$srcdir$ac_dir_suffix;
!     ac_top_srcdir=$srcdir ;;
!   *) # Relative path.
!     ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
!     ac_top_srcdir=$ac_top_builddir$srcdir ;;
! esac
! # Don't blindly perform a `cd "$ac_dir"/$ac_foo && pwd` since $ac_foo can be
! # absolute.
! ac_abs_builddir=`cd "$ac_dir" && cd $ac_builddir && pwd`
! ac_abs_top_builddir=`cd "$ac_dir" && cd $ac_top_builddir && pwd`
! ac_abs_srcdir=`cd "$ac_dir" && cd $ac_srcdir && pwd`
! ac_abs_top_srcdir=`cd "$ac_dir" && cd $ac_top_srcdir && pwd`
! 
! 
!   case $INSTALL in
!   [\\/$]* | ?:[\\/]* ) ac_INSTALL=$INSTALL ;;
!   *) ac_INSTALL=$ac_top_builddir$INSTALL ;;
    esac
  
!   if test x"$ac_file" != x-; then
!     { echo "$as_me:$LINENO: creating $ac_file" >&5
! echo "$as_me: creating $ac_file" >&6;}
!     rm -f "$ac_file"
!   fi
!   # Let's still pretend it is `configure' which instantiates (i.e., don't
!   # use $as_me), people would be surprised to read:
!   #    /* config.h.  Generated by config.status.  */
!   if test x"$ac_file" = x-; then
!     configure_input=
!   else
!     configure_input="$ac_file.  "
!   fi
!   configure_input=$configure_input"Generated from `echo $ac_file_in |
!                                      sed 's,.*/,,'` by configure."
! 
!   # First look for the input files in the build tree, otherwise in the
!   # src tree.
!   ac_file_inputs=`IFS=:
!     for f in $ac_file_in; do
!       case $f in
!       -) echo $tmp/stdin ;;
!       [\\/$]*)
!          # Absolute (can't be DOS-style, as IFS=:)
!          test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
! echo "$as_me: error: cannot find input file: $f" >&2;}
!    { (exit 1); exit 1; }; }
!          echo $f;;
!       *) # Relative
!          if test -f "$f"; then
!            # Build tree
!            echo $f
!          elif test -f "$srcdir/$f"; then
!            # Source tree
!            echo $srcdir/$f
!          else
!            # /dev/null tree
!            { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
! echo "$as_me: error: cannot find input file: $f" >&2;}
!    { (exit 1); exit 1; }; }
!          fi;;
!       esac
!     done` || { (exit 1); exit 1; }
! _ACEOF
! cat >>$CONFIG_STATUS <<_ACEOF
!   sed "$ac_vpsub
! $extrasub
! _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF
! :t
! /@[a-zA-Z_][a-zA-Z_0-9]*@/!b
! s,@configure_input@,$configure_input,;t t
! s,@srcdir@,$ac_srcdir,;t t
! s,@abs_srcdir@,$ac_abs_srcdir,;t t
! s,@top_srcdir@,$ac_top_srcdir,;t t
! s,@abs_top_srcdir@,$ac_abs_top_srcdir,;t t
! s,@builddir@,$ac_builddir,;t t
! s,@abs_builddir@,$ac_abs_builddir,;t t
! s,@top_builddir@,$ac_top_builddir,;t t
! s,@abs_top_builddir@,$ac_abs_top_builddir,;t t
! s,@INSTALL@,$ac_INSTALL,;t t
! " $ac_file_inputs | (eval "$ac_sed_cmds") >$tmp/out
!   rm -f $tmp/stdin
!   if test x"$ac_file" != x-; then
!     mv $tmp/out $ac_file
!   else
!     cat $tmp/out
!     rm -f $tmp/out
!   fi
! 
! done
! _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF
! 
! #
! # CONFIG_HEADER section.
! #
  
  # These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
  # NAME is the cpp macro being defined and VALUE is the value it is being given.
  #
  # ac_d sets the value in "#define NAME VALUE" lines.
! ac_dA='s,^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
! ac_dB='[ 	].*$,\1#\2'
! ac_dC=' '
! ac_dD=',;t'
! # ac_u turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
! ac_uA='s,^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
! ac_uB='$,\1#\2define\3'
  ac_uC=' '
! ac_uD=',;t'
  
! for ac_file in : $CONFIG_HEADERS; do test "x$ac_file" = x: && continue
    # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
!   case $ac_file in
!   - | *:- | *:-:* ) # input from stdin
!         cat >$tmp/stdin
!         ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
!         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
!   *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
!         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
!   * )   ac_file_in=$ac_file.in ;;
    esac
  
!   test x"$ac_file" != x- && { echo "$as_me:$LINENO: creating $ac_file" >&5
! echo "$as_me: creating $ac_file" >&6;}
  
!   # First look for the input files in the build tree, otherwise in the
!   # src tree.
!   ac_file_inputs=`IFS=:
!     for f in $ac_file_in; do
!       case $f in
!       -) echo $tmp/stdin ;;
!       [\\/$]*)
!          # Absolute (can't be DOS-style, as IFS=:)
!          test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
! echo "$as_me: error: cannot find input file: $f" >&2;}
!    { (exit 1); exit 1; }; }
!          echo $f;;
!       *) # Relative
!          if test -f "$f"; then
!            # Build tree
!            echo $f
!          elif test -f "$srcdir/$f"; then
!            # Source tree
!            echo $srcdir/$f
!          else
!            # /dev/null tree
!            { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
! echo "$as_me: error: cannot find input file: $f" >&2;}
!    { (exit 1); exit 1; }; }
!          fi;;
!       esac
!     done` || { (exit 1); exit 1; }
!   # Remove the trailing spaces.
!   sed 's/[ 	]*$//' $ac_file_inputs >$tmp/in
  
! _ACEOF
  
! # Transform confdefs.h into two sed scripts, `conftest.defines' and
! # `conftest.undefs', that substitutes the proper values into
! # config.h.in to produce config.h.  The first handles `#define'
! # templates, and the second `#undef' templates.
! # And first: Protect against being on the right side of a sed subst in
! # config.status.  Protect against being in an unquoted here document
! # in config.status.
! rm -f conftest.defines conftest.undefs
! # Using a here document instead of a string reduces the quoting nightmare.
! # Putting comments in sed scripts is not portable.
! #
! # `end' is used to avoid that the second main sed command (meant for
! # 0-ary CPP macros) applies to n-ary macro definitions.
! # See the Autoconf documentation for `clear'.
! cat >confdef2sed.sed <<\_ACEOF
! s/[\\&,]/\\&/g
! s,[\\$`],\\&,g
! t clear
! : clear
! s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	(][^ 	(]*\)\(([^)]*)\)[ 	]*\(.*\)$,${ac_dA}\1${ac_dB}\1\2${ac_dC}\3${ac_dD},gp
! t end
! s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	][^ 	]*\)[ 	]*\(.*\)$,${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD},gp
! : end
! _ACEOF
! # If some macros were called several times there might be several times
! # the same #defines, which is useless.  Nevertheless, we may not want to
! # sort them, since we want the *last* AC-DEFINE to be honored.
! uniq confdefs.h | sed -n -f confdef2sed.sed >conftest.defines
! sed 's/ac_d/ac_u/g' conftest.defines >conftest.undefs
! rm -f confdef2sed.sed
  
  # This sed command replaces #undef with comments.  This is necessary, for
  # example, in the case of _POSIX_SOURCE, which is predefined and required
  # on some systems where configure will not decide to define it.
! cat >>conftest.undefs <<\_ACEOF
! s,^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*,/* & */,
! _ACEOF
  
! # Break up conftest.defines because some shells have a limit on the size
! # of here documents, and old seds have small limits too (100 cmds).
! echo '  # Handle all the #define templates only if necessary.' >>$CONFIG_STATUS
! echo '  if egrep "^[ 	]*#[ 	]*define" $tmp/in >/dev/null; then' >>$CONFIG_STATUS
! echo '  # If there are no defines, we may have an empty if/fi' >>$CONFIG_STATUS
! echo '  :' >>$CONFIG_STATUS
! rm -f conftest.tail
! while grep . conftest.defines >/dev/null
! do
!   # Write a limited-size here document to $tmp/defines.sed.
!   echo '  cat >$tmp/defines.sed <<CEOF' >>$CONFIG_STATUS
!   # Speed up: don't consider the non `#define' lines.
!   echo '/^[ 	]*#[ 	]*define/!b' >>$CONFIG_STATUS
!   # Work around the forget-to-reset-the-flag bug.
!   echo 't clr' >>$CONFIG_STATUS
!   echo ': clr' >>$CONFIG_STATUS
!   sed ${ac_max_here_lines}q conftest.defines >>$CONFIG_STATUS
!   echo 'CEOF
!   sed -f $tmp/defines.sed $tmp/in >$tmp/out
!   rm -f $tmp/in
!   mv $tmp/out $tmp/in
! ' >>$CONFIG_STATUS
!   sed 1,${ac_max_here_lines}d conftest.defines >conftest.tail
!   rm -f conftest.defines
!   mv conftest.tail conftest.defines
! done
! rm -f conftest.defines
! echo '  fi # egrep' >>$CONFIG_STATUS
! echo >>$CONFIG_STATUS
  
+ # Break up conftest.undefs because some shells have a limit on the size
+ # of here documents, and old seds have small limits too (100 cmds).
+ echo '  # Handle all the #undef templates' >>$CONFIG_STATUS
  rm -f conftest.tail
! while grep . conftest.undefs >/dev/null
  do
!   # Write a limited-size here document to $tmp/undefs.sed.
!   echo '  cat >$tmp/undefs.sed <<CEOF' >>$CONFIG_STATUS
!   # Speed up: don't consider the non `#undef'
!   echo '/^[ 	]*#[ 	]*undef/!b' >>$CONFIG_STATUS
!   # Work around the forget-to-reset-the-flag bug.
!   echo 't clr' >>$CONFIG_STATUS
!   echo ': clr' >>$CONFIG_STATUS
!   sed ${ac_max_here_lines}q conftest.undefs >>$CONFIG_STATUS
    echo 'CEOF
!   sed -f $tmp/undefs.sed $tmp/in >$tmp/out
!   rm -f $tmp/in
!   mv $tmp/out $tmp/in
! ' >>$CONFIG_STATUS
!   sed 1,${ac_max_here_lines}d conftest.undefs >conftest.tail
!   rm -f conftest.undefs
!   mv conftest.tail conftest.undefs
  done
! rm -f conftest.undefs
  
! cat >>$CONFIG_STATUS <<\_ACEOF
!   # Let's still pretend it is `configure' which instantiates (i.e., don't
!   # use $as_me), people would be surprised to read:
!   #    /* config.h.  Generated by config.status.  */
!   if test x"$ac_file" = x-; then
!     echo "/* Generated by configure.  */" >$tmp/config.h
    else
!     echo "/* $ac_file.  Generated by configure.  */" >$tmp/config.h
    fi
!   cat $tmp/in >>$tmp/config.h
!   rm -f $tmp/in
!   if test x"$ac_file" != x-; then
!     if cmp -s $ac_file $tmp/config.h 2>/dev/null; then
!       { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
! echo "$as_me: $ac_file is unchanged" >&6;}
!     else
!       ac_dir=`(dirname "$ac_file") 2>/dev/null ||
! $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
!          X"$ac_file" : 'X\(//\)[^/]' \| \
!          X"$ac_file" : 'X\(//\)$' \| \
!          X"$ac_file" : 'X\(/\)' \| \
!          .     : '\(.\)' 2>/dev/null ||
! echo X"$ac_file" |
!     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
!   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
!   	  /^X\(\/\/\)$/{ s//\1/; q; }
!   	  /^X\(\/\).*/{ s//\1/; q; }
!   	  s/.*/./; q'`
!       { case "$ac_dir" in
!   [\\/]* | ?:[\\/]* ) as_incr_dir=;;
!   *)                      as_incr_dir=.;;
! esac
! as_dummy="$ac_dir"
! for as_mkdir_dir in `IFS='/\\'; set X $as_dummy; shift; echo "$@"`; do
!   case $as_mkdir_dir in
!     # Skip DOS drivespec
!     ?:) as_incr_dir=$as_mkdir_dir ;;
!     *)
!       as_incr_dir=$as_incr_dir/$as_mkdir_dir
!       test -d "$as_incr_dir" ||
!         mkdir "$as_incr_dir" ||
! 	{ { echo "$as_me:$LINENO: error: cannot create \"$ac_dir\"" >&5
! echo "$as_me: error: cannot create \"$ac_dir\"" >&2;}
!    { (exit 1); exit 1; }; }
!     ;;
!   esac
! done; }
  
!       rm -f $ac_file
!       mv $tmp/config.h $ac_file
      fi
!   else
!     cat $tmp/config.h
!     rm -f $tmp/config.h
!   fi
!   # Run the commands associated with the file.
!   case $ac_file in
!     config.h ) # update the timestamp
! echo timestamp >"./stamp-h1"
!  ;;
    esac
  done
! _ACEOF
! cat >>$CONFIG_STATUS <<\_ACEOF
! 
! #
! # CONFIG_COMMANDS section.
! #
! for ac_file in : $CONFIG_COMMANDS; do test "x$ac_file" = x: && continue
!   ac_dest=`echo "$ac_file" | sed 's,:.*,,'`
!   ac_source=`echo "$ac_file" | sed 's,[^:]*:,,'`
!   ac_dir=`(dirname "$ac_dest") 2>/dev/null ||
! $as_expr X"$ac_dest" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
!          X"$ac_dest" : 'X\(//\)[^/]' \| \
!          X"$ac_dest" : 'X\(//\)$' \| \
!          X"$ac_dest" : 'X\(/\)' \| \
!          .     : '\(.\)' 2>/dev/null ||
! echo X"$ac_dest" |
!     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
!   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
!   	  /^X\(\/\/\)$/{ s//\1/; q; }
!   	  /^X\(\/\).*/{ s//\1/; q; }
!   	  s/.*/./; q'`
!   ac_builddir=.
! 
! if test "$ac_dir" != .; then
!   ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
!   # A "../" for each directory in $ac_dir_suffix.
!   ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
! else
!   ac_dir_suffix= ac_top_builddir=
! fi
! 
! case $srcdir in
!   .)  # No --srcdir option.  We are building in place.
!     ac_srcdir=.
!     if test -z "$ac_top_builddir"; then
!        ac_top_srcdir=.
!     else
!        ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
!     fi ;;
!   [\\/]* | ?:[\\/]* )  # Absolute path.
!     ac_srcdir=$srcdir$ac_dir_suffix;
!     ac_top_srcdir=$srcdir ;;
!   *) # Relative path.
!     ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
!     ac_top_srcdir=$ac_top_builddir$srcdir ;;
! esac
! # Don't blindly perform a `cd "$ac_dir"/$ac_foo && pwd` since $ac_foo can be
! # absolute.
! ac_abs_builddir=`cd "$ac_dir" && cd $ac_builddir && pwd`
! ac_abs_top_builddir=`cd "$ac_dir" && cd $ac_top_builddir && pwd`
! ac_abs_srcdir=`cd "$ac_dir" && cd $ac_srcdir && pwd`
! ac_abs_top_srcdir=`cd "$ac_dir" && cd $ac_top_srcdir && pwd`
  
  
+   { echo "$as_me:$LINENO: executing $ac_dest commands" >&5
+ echo "$as_me: executing $ac_dest commands" >&6;}
+   case $ac_dest in
+     default-1 )
  test x"$AMDEP_TRUE" != x"" ||
  for mf in $CONFIG_FILES; do
    case "$mf" in
***************
*** 10401,10413 ****
      echo '# dummy' > "$dirpart/$file"
    done
  done
  
! chmod a+x distrib/config/netatalk-config contrib/shell_utils/apple_*
  
! exit 0
! EOF
  chmod +x $CONFIG_STATUS
! rm -fr confdefs* $ac_clean_files
! test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1
  
  
--- 14756,14792 ----
      echo '# dummy' > "$dirpart/$file"
    done
  done
+  ;;
+     default ) chmod a+x distrib/config/netatalk-config contrib/shell_utils/apple_*
+  ;;
+   esac
+ done
+ _ACEOF
  
! cat >>$CONFIG_STATUS <<\_ACEOF
  
! { (exit 0); exit 0; }
! _ACEOF
  chmod +x $CONFIG_STATUS
! ac_clean_files=$ac_clean_files_save
! 
! 
! # configure is writing to config.log, and then calls config.status.
! # config.status does its own redirection, appending to config.log.
! # Unfortunately, on DOS this fails, as config.log is still kept open
! # by configure, so config.status won't be able to write to it; its
! # output is simply discarded.  So we exec the FD to /dev/null,
! # effectively closing config.log, so it can be properly (re)opened and
! # appended to by config.status.  When coming back to configure, we
! # need to make the FD available again.
! if test "$no_create" != yes; then
!   ac_cs_success=:
!   exec 5>/dev/null
!   $SHELL $CONFIG_STATUS || ac_cs_success=false
!   exec 5>>config.log
!   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
!   # would make configure fail if this is the last instruction.
!   $ac_cs_success || { (exit 1); exit 1; }
! fi
  
  
diff -d -r -c netatalk-1.5.3.1/configure.in netatalk-1.5.3.1-dce-3.0/configure.in
*** netatalk-1.5.3.1/configure.in	Wed Mar 13 12:50:08 2002
--- netatalk-1.5.3.1-dce-3.0/configure.in	Mon Jun  3 16:55:36 2002
***************
*** 546,551 ****
--- 546,640 ----
  	sysv_style=tru64
  fi
  
+ dnl --------------------- check for DCE plaintext authentication support
+ AC_MSG_CHECKING(whether to use DCE plaintext authentication)
+ AC_ARG_WITH(dce,
+ [  --with-dce     Include DCE plaintext authentication support
+   --without-dce  Don't include DCE plaintext authentication support (default)],
+ [ case "$withval" in
+   yes)
+     AC_MSG_RESULT(yes)
+     AC_DEFINE(WITH_DCE)
+     LIBS="$LIBS -ldce -lpthread"
+     CFLAGS="$CFLAGS -D_REENTRANT"
+     ;;
+   *)
+     AC_MSG_RESULT(no)
+     ;;
+   esac ],
+   AC_MSG_RESULT(no)
+ )
+ 
+ dnl --------------------- check for DCE encrypted authentication support
+ AC_MSG_CHECKING(whether to use DCE encrypted authentication)
+ AC_ARG_WITH(dce-encrypted,
+ [  --with-dce-encrypted     Include DCE encrypted authentication support
+   --without-dce-encrypted  Don't include DCE encrypted authentication support (default)],
+ [ case "$withval" in
+   yes)
+     AC_MSG_RESULT(yes)
+     AC_DEFINE(WITH_DCE_ENCRYPTED)
+     LIBS="$LIBS -lsec_auth"
+     ;;
+   *)
+     AC_MSG_RESULT(no)
+     ;;
+   esac ],
+   AC_MSG_RESULT(no)
+ )
+ 
+ dnl --------------------- check for DCE context refresh support
+ AC_MSG_CHECKING(whether to use DCE context refresh)
+ AC_ARG_WITH(dce-refresh,
+ [  --with-dce-refresh     Include DCE context refresh support
+   --without-dce-refresh  Don't include DCE context refresh support (default)],
+ [ case "$withval" in
+   yes)
+     AC_MSG_RESULT(yes)
+     AC_DEFINE(WITH_DCE_REFRESH)
+     ;;
+   *)
+     AC_MSG_RESULT(no)
+     ;;
+   esac ],
+   AC_MSG_RESULT(no)
+ )
+ 
+ dnl --------------------- check for DCE IBM kludge support
+ AC_MSG_CHECKING(whether to work around broken IBM DCE security API)
+ AC_ARG_WITH(dce-ibm-kludge,
+ [  --with-dce-ibm-kludge  Work around broken IBM DCE security API
+   --without-dce-ibm-kludge Don't work around broken IBM DCE security API (default)],
+ [ case "$withval" in
+   yes)
+     AC_MSG_RESULT(yes)
+     AC_DEFINE(WITH_DCE_IBM_KLUDGE)
+     ;;
+   *)
+     AC_MSG_RESULT(no)
+     ;;
+   esac ],
+   AC_MSG_RESULT(no)
+ )
+ 
+ dnl --------------------- check for DFS support
+ AC_MSG_CHECKING(whether to use DFS)
+ AC_ARG_WITH(dfs,
+ [  --with-dfs  Include DFS support
+   --without-dfs Don't include DFS support (default)],
+ [ case "$withval" in
+   yes)
+     AC_MSG_RESULT(yes)
+     AC_DEFINE(WITH_DFS)
+     LIBS="$LIBS -ldcedfs"
+     ;;
+   *)
+     AC_MSG_RESULT(no)
+     ;;
+   esac ],
+   AC_MSG_RESULT(no)
+ )
+ 
  dnl -- look for openssl
  AC_PATH_SSL
  
diff -d -r -c netatalk-1.5.3.1/doc/README.DCEDFS netatalk-1.5.3.1-dce-3.0/doc/README.DCEDFS
*** netatalk-1.5.3.1/doc/README.DCEDFS	Wed Jun 12 15:31:00 2002
--- netatalk-1.5.3.1-dce-3.0/doc/README.DCEDFS	Wed Jun 12 15:34:35 2002
***************
*** 0 ****
--- 1,146 ----
+ netatalk-1.5.3.1 DCE/DFS patch (version 3.0)
+ --------------------------------------------
+ 
+ This patch adds support for DCE authentication (using either plaintext
+ or encrypted passwords) and DFS filesets to netatalk. Since you're
+ reading this file, I trust you've already applied the patch to the
+ netatalk source, and are ready to configure/compile.
+ 
+ There are five configure options available:
+ 
+ 
+ --with-dce
+ 
+   This option enables support for DCE authentication using
+   plaintext passwords.
+ 
+ 
+ --with-dce-encrypted
+ 
+   This option, when used along with --with-dce, adds support for DCE
+   authentication using encrypted passwords. It requires the sec_auth
+   package, available from:
+ 
+   http://www.csupomona.edu/~henson/www/projects/sec_auth/
+ 
+   This option will also update necessary data for encrypted password
+   support when a plaintext password login is is successful.
+ 
+ 
+ --with-dce-refresh
+ 
+   Include support for automatically refreshing DCE credentials.
+   This requires storing the password in memory, so is a security
+   vs. convenience tradeoff.
+ 
+ 
+ --with-dce-ibm-kludge
+ 
+   Include a workaround for the broken sec_login_valid_and_cert_ident()
+   call in newer versions of IBM DCE, including DCE 3.1 for Solaris 7/8
+   and AIX, and some earlier versions of DCE for AIX. If credentials
+   are stored some place other than /opt/dcelocal/var/security/creds
+   on your platform, edit the file etc/afpd/dcedfs.c and update the
+   DCE_CREDS_DIR definition.
+ 
+ 
+ --with-dfs
+ 
+   This option adds support for DFS fileset quota reporting and
+   ACL interpretation. This option requires the availability of a DFS
+   API development kit.  Kits for Solaris and AIX are available from
+ 
+     http://www.transarc.ibm.com/Product/EFS/DFS/libdcedfs/
+ 
+   Note that as distributed, the kit names the library libdfs. netatalk
+   expects this library to be named libdcedfs. Rename it, symlink it,
+   or update the netatalk Makefile.
+ 
+ 
+ Note that either your OS must support DCE as a naming service, or you need
+ to replicate your registry in local files. Solaris users can use my
+ nss_dce package to integrate DCE into the Solaris naming services switch:
+ 
+     http://www.csupomona.edu/~henson/www/projects/nss_dce/
+ 
+ 
+ Changes
+ -------
+ 
+ 3.0 - Updated for netatalk-1.5.3.1.
+ 
+     - Added support for Diffie-Hellman Key Exchange. Never tested...
+       Still looking for a client that does it.
+ 
+ 
+ 2.5 - Updated for netatalk-1.5pre6.
+ 
+     - Added --with-dce-refresh option.
+ 
+     - Added --with-ibm-kludge option.
+ 
+ 
+ 2.2 - Updated encrypted password authentication support to be compliant
+       with sec_auth 1.0 API.
+ 
+     - Improved encrypted password fault tolerance when multiple sec_auth
+       servers are available.
+ 
+ 
+ 2.0 - Updated to support the asun-enhanced version of netatalk.
+ 
+     - Added support for encrypted password authentication.
+ 
+     - Fixed potential deadlock when forking.
+ 
+     - Fixed incorrect inheritance of parent directory permissions when
+       using DFS.
+ 
+ 
+ 1.2 - If DFS is enabled, don't call chmod, because it mangles DFS ACLs.
+ 
+ 
+ 1.1 - If an RPC error occurs during an flserver call, the binding
+       handle must be reset before it will work again.
+ 
+ 
+ 1.0 - Improved flserver load balancing and exception handling. Previous
+       versions of this patch would only communicate with the first
+       flserver found, and die horribly on any errors. Now, requests are
+       distributed over all available flservers, and flserver errors are
+       handled more gracefully.
+ 
+     - Added support for longer passwords. netatalk normally truncates
+       passwords to 8 characters. DCE, of course, can handle much longer
+       passwords, and with the appropriate UAM (for example, the Digital
+       VMS UAM), a Macintosh client can send them.
+ 
+ 
+ 0.8 - Fixed incorrect assumption that the object UUID of the flserver was
+       constant. The UUID is now determined at runtime.
+ 
+     - Added code to report correct access permissions on a directory in
+       DFS.
+ 
+ 
+ 0.5 - First publicly released version.
+ 
+ 
+ ---------------------------------------------------------------------------
+    Copyright (C) 1997-2002 Paul B. Henson <henson@acm.org>
+ 
+    This patch is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 1, or (at your option)
+    any later version.
+ 
+    This patch is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+ 
+    For a copy of the GNU General Public License, write to the Free
+    Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+ 
+    The GNU General Public License is, as of this writing, also available
+    at http://www.gnu.org/copyleft/gpl.html
diff -d -r -c netatalk-1.5.3.1/etc/afpd/Makefile.in netatalk-1.5.3.1-dce-3.0/etc/afpd/Makefile.in
*** netatalk-1.5.3.1/etc/afpd/Makefile.in	Wed Mar 27 14:20:47 2002
--- netatalk-1.5.3.1-dce-3.0/etc/afpd/Makefile.in	Mon Jun  3 17:35:51 2002
***************
*** 134,140 ****
  afpd_SOURCES = unix.c ofork.c main.c switch.c auth.c volume.c directory.c \
  	 file.c enumerate.c desktop.c filedir.c fork.c appl.c gettok.c \
  	 status.c afp_options.c afp_asp.c afp_dsi.c messages.c afp_config.c \
! 	 nfsquota.c codepage.c quota.c uam.c afs.c uid.c parse_mtab.c
  
  
  test_parse_mtab_SOURCES = test_parse_mtab.c parse_mtab.c
--- 134,140 ----
  afpd_SOURCES = unix.c ofork.c main.c switch.c auth.c volume.c directory.c \
  	 file.c enumerate.c desktop.c filedir.c fork.c appl.c gettok.c \
  	 status.c afp_options.c afp_asp.c afp_dsi.c messages.c afp_config.c \
! 	 nfsquota.c codepage.c quota.c uam.c afs.c uid.c parse_mtab.c dcedfs.c
  
  
  test_parse_mtab_SOURCES = test_parse_mtab.c parse_mtab.c
***************
*** 163,169 ****
  	afp_options.$(OBJEXT) afp_asp.$(OBJEXT) afp_dsi.$(OBJEXT) \
  	messages.$(OBJEXT) afp_config.$(OBJEXT) nfsquota.$(OBJEXT) \
  	codepage.$(OBJEXT) quota.$(OBJEXT) uam.$(OBJEXT) afs.$(OBJEXT) \
! 	uid.$(OBJEXT) parse_mtab.$(OBJEXT)
  afpd_OBJECTS = $(am_afpd_OBJECTS)
  afpd_DEPENDENCIES = $(top_builddir)/libatalk/libatalk.la
  am_test_parse_mtab_OBJECTS = test_parse_mtab.$(OBJEXT) \
--- 163,169 ----
  	afp_options.$(OBJEXT) afp_asp.$(OBJEXT) afp_dsi.$(OBJEXT) \
  	messages.$(OBJEXT) afp_config.$(OBJEXT) nfsquota.$(OBJEXT) \
  	codepage.$(OBJEXT) quota.$(OBJEXT) uam.$(OBJEXT) afs.$(OBJEXT) \
! 	uid.$(OBJEXT) parse_mtab.$(OBJEXT) dcedfs.$(OBJEXT)
  afpd_OBJECTS = $(am_afpd_OBJECTS)
  afpd_DEPENDENCIES = $(top_builddir)/libatalk/libatalk.la
  am_test_parse_mtab_OBJECTS = test_parse_mtab.$(OBJEXT) \
diff -d -r -c netatalk-1.5.3.1/etc/afpd/auth.c netatalk-1.5.3.1-dce-3.0/etc/afpd/auth.c
*** netatalk-1.5.3.1/etc/afpd/auth.c	Thu Mar  7 16:25:55 2002
--- netatalk-1.5.3.1-dce-3.0/etc/afpd/auth.c	Fri Jun  7 15:48:28 2002
***************
*** 377,382 ****
--- 377,387 ----
  int        ibuflen, *rbuflen;
  {
      syslog(LOG_INFO, "logout %s", obj->username);
+ 
+ #ifdef WITH_DCE
+   dce_logout();
+ #endif
+ 
      obj->exit(0);
      return AFP_OK;
  }
diff -d -r -c netatalk-1.5.3.1/etc/afpd/dcedfs.c netatalk-1.5.3.1-dce-3.0/etc/afpd/dcedfs.c
*** netatalk-1.5.3.1/etc/afpd/dcedfs.c	Wed Jun 12 15:30:39 2002
--- netatalk-1.5.3.1-dce-3.0/etc/afpd/dcedfs.c	Tue Jun  4 14:27:04 2002
***************
*** 0 ****
--- 1,762 ----
+ /*
+  * DCE/DFS support for Netatalk
+  *
+  * Paul Henson <henson@acm.org>
+  * California State Polytechnic University, Pomona
+  *
+  * Copyright (c) 1997-2002 Paul Henson -- see README.DCEDFS file for details
+  *
+  */
+ #include "config.h"
+ 
+ #ifdef WITH_DCE
+ 
+ #define DCE_CREDS_DIR "/opt/dcelocal/var/security/creds"
+ 
+ #include <syslog.h>
+ #include <pwd.h>
+ #include <stdlib.h>
+ #include <strings.h>
+ #include <sys/param.h>
+ #include <dce/dce_error.h>
+ #include <dce/rpc.h>
+ #include <dce/secsts.h>
+ #include <dce/sec_login.h>
+ #include <dce/pthread.h>
+ #include <dce/rgybase.h>
+ 
+ sec_login_handle_t dce_login_context = NULL;
+ 
+ #ifdef WITH_DCE_REFRESH
+ static sec_passwd_des_key_t dce_refresh_deskey;
+ sec_passwd_str_t dce_refresh_plaintext;
+ sec_passwd_type_t dce_passwd_type;
+ #endif
+ 
+ void dce_logout() {
+ 
+   error_status_t dce_st;
+ 
+   if (dce_login_context)
+     sec_login_purge_context(&dce_login_context, &dce_st);
+ }
+ 
+ #ifdef WITH_DCE_REFRESH
+ 
+ pthread_addr_t dce_refresh_context() {
+   
+   signed32 expiration_time;
+   time_t now;
+   struct timespec sleep_interval;
+   error_status_t dce_st;
+   dce_error_string_t dce_error;
+   int dce_error_st;
+   sec_login_auth_src_t auth_src;
+   unsigned32 kvno_worked;
+   boolean32 reset_passwd;
+   sec_passwd_str_t tmp_pw;
+   sec_passwd_rec_t passwd_rec;
+ 
+   while (1) {
+     now = time(NULL);
+ 
+     sec_login_get_expiration(dce_login_context, &expiration_time, &dce_st);
+     if (dce_st && (dce_st != sec_login_s_not_certified)) {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "refresh_context: sec_login_get_expiration failed - %s (%d)\n", dce_error, dce_st);
+       expiration_time = now + 20 * 60;
+     }
+ 
+     sleep_interval.tv_sec = expiration_time - now - 10 * 60;
+     sleep_interval.tv_nsec = 0;
+     
+     pthread_delay_np(&sleep_interval);
+     
+     sec_login_refresh_identity(dce_login_context, &dce_st);
+     if (dce_st) {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "refresh_context: sec_login_refresh_identity failed - %s (%d)\n", dce_error, dce_st);
+     }
+       
+     if (dce_passwd_type == sec_passwd_plain) {
+       passwd_rec.key.key_type = sec_passwd_plain;
+       strncpy( (char *)tmp_pw, dce_refresh_plaintext, sec_passwd_str_max_len);
+       tmp_pw[sec_passwd_str_max_len] = '\0';
+       passwd_rec.key.tagged_union.plain = &(tmp_pw[0]);
+     }
+     else {
+       passwd_rec.key.key_type = sec_passwd_des;
+       memcpy(passwd_rec.key.tagged_union.des_key, dce_refresh_deskey, sec_passwd_c_des_key_size);
+     }
+ 
+     sec_login_validate_identity(dce_login_context, &passwd_rec, &reset_passwd, &auth_src, &dce_st);
+     if (dce_st) {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "refresh_context: sec_login_validate_identity failed - %s (%d)\n", dce_error, dce_st);
+     }
+   }              
+ }
+ #endif
+ 
+ #ifdef WITH_DCE_ENCRYPTED
+ 
+ #include <sec_auth.h>
+ 
+ int dce_randnum_login(struct passwd *pwd, char challenge[8], char response[8]) {
+ 
+   error_status_t dce_st;
+   dce_error_string_t dce_error;
+   int dce_error_st;
+   sec_login_auth_src_t auth_src;
+   sec_passwd_rec_t pw_entry;
+   boolean32 reset_passwd;
+   sec_passwd_str_t tmp_pw;
+   rpc_ns_handle_t lookup_context;
+   rpc_binding_vector_t *binding_vec;
+   rpc_binding_handle_t handle;
+   unsigned_char_t *server_princ_name;
+   sec_rgy_name_t princ_name;
+ 
+ #ifdef WITH_DCE_REFRESH
+   pthread_t refresh_thread;
+ #endif
+   
+   rpc_ns_binding_lookup_begin(rpc_c_ns_syntax_default, SEC_AUTH_RPC_GROUP_NAME,
+ 			      SEC_AUTH_C_IFSPEC, NULL, 5, &lookup_context,
+ 			      &dce_st);
+   
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_randnum_login: rpc_ns_binding_lookup_begin failed - %s\n", dce_error);
+     return 0;
+   }
+ 
+   rpc_ns_binding_lookup_next(lookup_context, &binding_vec, &dce_st);
+ 
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_randnum_login: rpc_ns_binding_lookup_next failed - %s\n", dce_error);
+     return 0;
+   }
+  
+   rpc_ns_binding_lookup_done(&lookup_context, &dce_st);
+ 
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_randnum_login: rpc_ns_binding_lookup_done failed - %s\n", dce_error);
+     return 0;
+   }
+ 
+   while (1) {
+     rpc_ns_binding_select(binding_vec, &handle, &dce_st);
+     
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_randnum_login: rpc_ns_binding_select failed - %s\n", dce_error);
+       rpc_binding_vector_free(&binding_vec, &dce_st);
+       return 0;
+     }
+       
+     rpc_ep_resolve_binding(handle, SEC_AUTH_C_IFSPEC, &dce_st);
+ 
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_randnum_login: rpc_ep_resolve_binding failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+   
+     rpc_mgmt_inq_server_princ_name(handle, rpc_c_authn_dce_secret, &server_princ_name, &dce_st);
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_randnum_login: rpc_mgmt_inq_server_princ_name failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+ 
+     sec_id_parse_name(sec_rgy_default_handle, server_princ_name, NULL, NULL, princ_name, NULL, &dce_st);
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_randnum_login: sec_id_parse_name failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+ 
+     {
+       int is_member = sec_rgy_pgo_is_member(sec_rgy_default_handle, sec_rgy_domain_group, "sec_auth", princ_name, &dce_st);
+       if (dce_st) {
+ 	dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+ 	syslog(LOG_NOTICE, "dce_randnum_login: sec_rgy_pgo_is_member failed - %s\n", dce_error);
+ 	rpc_binding_free(&handle, &dce_st);
+ 	continue;
+       }
+ 	
+       if (!is_member) {
+ 	syslog(LOG_NOTICE, "dce_randnum_login: %s not valid sec_auth server\n", princ_name);
+ 	rpc_binding_free(&handle, &dce_st);
+ 	continue;
+       }
+     }
+       
+     rpc_binding_set_auth_info(handle, server_princ_name,
+ 			      rpc_c_protect_level_pkt_privacy, rpc_c_authn_dce_secret,
+ 			      NULL, rpc_c_authz_name, &dce_st);
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_randnum_login: rpc_binding_set_auth_info failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+   
+     sec_auth_apple_randnum(handle, pwd->pw_name, challenge, response, (idl_byte *)&pw_entry.key.tagged_union.des_key, &dce_st);
+     if (dce_st == error_status_ok) {
+       rpc_binding_vector_free(&binding_vec, &dce_st);
+       rpc_binding_free(&handle, &dce_st);
+       break;
+     }
+     else if (dce_st == sec_rgy_passwd_invalid || dce_st == sec_rgy_not_authorized || dce_st == sec_rgy_not_implemented)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_randnum_login: sec_auth failed for %s - %s\n", pwd->pw_name, dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       rpc_binding_vector_free(&binding_vec, &dce_st);
+       return 0;
+     }
+     else {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_randnum_login: sec_auth failed for %s - %s\n", pwd->pw_name, dce_error);
+       rpc_binding_free(&handle, &dce_st);
+     }
+   }
+ 
+   if (!sec_login_setup_identity(pwd->pw_name, sec_login_no_flags, &dce_login_context, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_randnum_login: sec_login_setup_identity failed for %s - %s\n", pwd->pw_name, dce_error);
+     return 0;
+   }
+ 
+   pw_entry.pepper = NULL;
+   pw_entry.key.key_type = sec_passwd_des;
+   pw_entry.version_number = sec_passwd_c_version_none;
+   
+ #ifdef WITH_DCE_REFRESH
+   dce_passwd_type = sec_passwd_des;
+   memcpy(dce_refresh_deskey, pw_entry.key.tagged_union.des_key, sec_passwd_c_des_key_size);
+ #endif  
+   
+   if (!sec_login_valid_and_cert_ident(dce_login_context, &pw_entry, &reset_passwd, &auth_src, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_randnum_login: sec_login_valid_and_cert_ident failed for %s - %s\n", pwd->pw_name, dce_error);
+     return 0;
+   }
+ 
+   if (auth_src != sec_login_auth_src_network) {
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     syslog(LOG_NOTICE, "dce_randnum_login: no network credentials for %s\n", pwd->pw_name);
+     return 0;
+   }
+ 
+   sec_login_set_context(dce_login_context, &dce_st);
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_randnum_login: sec_login_set_context failed for %s - %s\n", pwd->pw_name, dce_error);
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     return 0;
+   }
+ 
+ #ifdef WITH_DCE_IBM_KLUDGE
+   {
+     char path[MAXPATHLEN];
+     char *krb5ccname;
+     char *pag_str;
+     unsigned long pag;
+     
+     if (krb5ccname = getenv("KRB5CCNAME"))
+       if (pag_str = strrchr(krb5ccname, '_')) {
+ 	pag = strtol(pag_str+1, NULL, 16);
+ 	
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+ 	
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+ 	
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data.db", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+ 	
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.nc", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+       }
+   }
+ #endif
+ 
+ #ifdef WITH_DCE_REFRESH
+   if (pthread_create(&refresh_thread, pthread_attr_default, dce_refresh_context, (void *)NULL))
+     syslog(LOG_NOTICE, "dce_randnum_login: pthread_create failed");
+ 
+   pthread_detach(&refresh_thread);
+ #endif
+   
+   return 1;
+ }
+ 
+ 
+ int dce_rand2num_login(struct passwd *pwd, char s_challenge[8], char c_response[8], char c_challenge[8], char s_response[8]) {
+ 
+   error_status_t dce_st;
+   dce_error_string_t dce_error;
+   int dce_error_st;
+   sec_login_auth_src_t auth_src;
+   sec_passwd_rec_t pw_entry;
+   boolean32 reset_passwd;
+   sec_passwd_str_t tmp_pw;
+   rpc_ns_handle_t lookup_context;
+   rpc_binding_vector_t *binding_vec;
+   rpc_binding_handle_t handle;
+   unsigned_char_t *server_princ_name;
+   sec_rgy_name_t princ_name;
+ 
+ #ifdef WITH_DCE_REFRESH
+   pthread_t refresh_thread;
+ #endif
+ 
+   rpc_ns_binding_lookup_begin(rpc_c_ns_syntax_default, SEC_AUTH_RPC_GROUP_NAME,
+ 			      SEC_AUTH_C_IFSPEC, NULL, 5, &lookup_context,
+ 			      &dce_st);
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_rand2num_login: rpc_ns_binding_lookup_begin failed - %s\n", dce_error);
+     return 0;
+   }
+ 
+   rpc_ns_binding_lookup_next(lookup_context, &binding_vec, &dce_st);
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_rand2num_login: rpc_ns_binding_lookup_next failed - %s\n", dce_error);
+     return 0;
+   }
+  
+   rpc_ns_binding_lookup_done(&lookup_context, &dce_st);
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_rand2num_login: rpc_ns_binding_lookup_done failed - %s\n", dce_error);
+     return 0;
+   }
+ 
+   while (1) {
+     rpc_ns_binding_select(binding_vec, &handle, &dce_st);
+     
+     if (dce_st) {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_rand2num_login: rpc_ns_binding_select failed - %s\n", dce_error);
+       rpc_binding_vector_free(&binding_vec, &dce_st);
+       return 0;
+     }
+       
+     rpc_ep_resolve_binding(handle, SEC_AUTH_C_IFSPEC, &dce_st);
+ 
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_rand2num_login: rpc_ep_resolve_binding failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+   
+     rpc_mgmt_inq_server_princ_name(handle, rpc_c_authn_dce_secret, &server_princ_name, &dce_st);
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_rand2num_login: rpc_mgmt_inq_server_princ_name failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+ 
+     sec_id_parse_name(sec_rgy_default_handle, server_princ_name, NULL, NULL, princ_name, NULL, &dce_st);
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_rand2num_login: sec_id_parse_name failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+ 
+     {
+       int is_member = sec_rgy_pgo_is_member(sec_rgy_default_handle, sec_rgy_domain_group, "sec_auth", princ_name, &dce_st);
+       if (dce_st) {
+ 	dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+ 	syslog(LOG_NOTICE, "dce_rand2num_login: sec_rgy_pgo_is_member failed - %s\n", dce_error);
+ 	rpc_binding_free(&handle, &dce_st);
+ 	continue;
+       }
+ 	
+       if (!is_member) {
+ 	syslog(LOG_NOTICE, "dce_rand2num_login: %s not valid sec_auth server\n", princ_name);
+ 	rpc_binding_free(&handle, &dce_st);
+ 	continue;
+       }
+     }
+       
+     rpc_binding_set_auth_info(handle, server_princ_name,
+ 			      rpc_c_protect_level_pkt_privacy, rpc_c_authn_dce_secret,
+ 			      NULL, rpc_c_authz_name, &dce_st);
+     if (dce_st)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_rand2num_login: rpc_binding_set_auth_info failed - %s\n", dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       continue;
+     }
+   
+     sec_auth_apple_rand2num(handle, pwd->pw_name, s_challenge, c_response, c_challenge, s_response,
+ 			    (idl_byte *)&pw_entry.key.tagged_union.des_key, &dce_st);
+     if (dce_st == error_status_ok) {
+       rpc_binding_vector_free(&binding_vec, &dce_st);
+       rpc_binding_free(&handle, &dce_st);
+       break;
+     }
+     else if (dce_st == sec_rgy_passwd_invalid || dce_st == sec_rgy_not_authorized || dce_st == sec_rgy_not_implemented)	{
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_rand2num_login: sec_auth failed for %s - %s\n", pwd->pw_name, dce_error);
+       rpc_binding_free(&handle, &dce_st);
+       rpc_binding_vector_free(&binding_vec, &dce_st);
+       return 0;
+     }
+     else {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_rand2num_login: sec_auth failed for %s - %s\n", pwd->pw_name, dce_error);
+       rpc_binding_free(&handle, &dce_st);
+     }
+   }
+ 
+   if (!sec_login_setup_identity(pwd->pw_name, sec_login_no_flags, &dce_login_context, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_rand2num_login: sec_login_setup_identity failed for %s - %s\n", pwd->pw_name, dce_error);
+     return 0;
+   }
+   
+   pw_entry.pepper = NULL;
+   pw_entry.key.key_type = sec_passwd_des;
+   pw_entry.version_number = sec_passwd_c_version_none;
+   
+ #ifdef WITH_DCE_REFRESH
+   dce_passwd_type = sec_passwd_des;
+   memcpy(dce_refresh_deskey, pw_entry.key.tagged_union.des_key, sec_passwd_c_des_key_size);
+ #endif  
+   
+   if (!sec_login_valid_and_cert_ident(dce_login_context, &pw_entry, &reset_passwd, &auth_src, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_rand2num_login: sec_login_valid_and_cert_ident failed for %s - %s\n", pwd->pw_name, dce_error);
+     return 0;
+   }
+ 
+   if (auth_src != sec_login_auth_src_network) {
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     syslog(LOG_NOTICE, "dce_rand2num_login: no network credentials for %s\n", pwd->pw_name);
+     return 0;
+   }
+   
+   sec_login_set_context(dce_login_context, &dce_st);
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "dce_rand2num_login: sec_login_set_context failed for %s - %s\n", pwd->pw_name, dce_error);
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     return 0;
+   }
+ 
+ #ifdef WITH_DCE_IBM_KLUDGE
+   {
+     char path[MAXPATHLEN];
+     char *krb5ccname;
+     char *pag_str;
+     unsigned long pag;
+     
+     if (krb5ccname = getenv("KRB5CCNAME"))
+       if (pag_str = strrchr(krb5ccname, '_')) {
+ 	pag = strtol(pag_str+1, NULL, 16);
+ 	  
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+ 	
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+ 	
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data.db", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+ 	
+ 	snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.nc", DCE_CREDS_DIR, pag);
+ 	path[MAXPATHLEN-1] = '\0';
+ 	chown(path, pwd->pw_uid, pwd->pw_gid);
+       }
+   }
+ #endif
+ 
+ #ifdef WITH_DCE_REFRESH
+   if (pthread_create(&refresh_thread, pthread_attr_default, dce_refresh_context, (void *)NULL))
+     syslog(LOG_NOTICE, "dce_randnum_login: pthread_create failed");
+   
+   pthread_detach(&refresh_thread);
+ #endif
+ 
+   return 1;
+ }
+ 
+ #endif
+ 
+ #ifdef WITH_DFS
+ 
+ #include <netinet/in.h>
+ #include <arpa/inet.h>
+ #include <dcedfs/param.h>
+ #include <dcedfs/afsvl_proc.h>
+ #include <dcedfs/aggr.h>
+ #include <dcedfs/cm.h>
+ #include <dcedfs/fldb_proc.h>
+ #include <dcedfs/flserver.h>
+ #include <dcedfs/ftserver.h>
+ #include <dcedfs/ftserver_proc.h>
+ #include <dcedfs/ioctl.h>
+ #include <dcedfs/vol_init.h>
+ #include <dcedfs/rep_errs.h>
+ #include <dcedfs/vol_errs.h>
+ 
+ #include "directory.h"
+ #include "volume.h"
+ 
+ #define FLSERVER_H_SIZE 5
+ static rpc_binding_handle_t flserver_h[FLSERVER_H_SIZE];
+ static int flserver_h_count = 0;
+ static int flserver_h_index = 0;
+ 
+ static int path_to_fid(char *path, struct afsFid *fidp) {
+   
+   struct afs_ioctl ioctl_data;
+   
+   ioctl_data.in_size = 0;
+   ioctl_data.out_size = sizeof(afsFid);
+   ioctl_data.out = (caddr_t) fidp;
+   
+   return (!pioctl(path, VIOCGETFID, &ioctl_data, 1));
+ }  
+ 
+ static int bind_flservers() {
+   
+   unsigned32 import_status, group_status, rpc_status;
+   rpc_ns_handle_t import_context;
+   rpc_ns_handle_t group_context;
+   unsigned_char_t *name, *string_binding, *protseq, *network_addr;
+   uuid_t obj_uuid;
+   unsigned_char_t *string_uuid;
+   rpc_binding_handle_t temp_h;
+   dce_error_string_t dce_error;
+   int dce_error_st;
+   
+   rpc_ns_entry_object_inq_begin(rpc_c_ns_syntax_default, "/.:/fs", &import_context, &import_status);
+   if (import_status) {
+     dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+     syslog(LOG_NOTICE, "bind_flservers.entry_object_inq_begin failed - %s", dce_error);
+     return 0;
+   }
+ 
+   rpc_ns_entry_object_inq_next(import_context, &obj_uuid, &import_status);
+   if (import_status) {
+     dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+     syslog(LOG_NOTICE, "bind_flservers.entry_object_inq_next failed - %s", dce_error);
+     return 0;
+   }
+ 
+   rpc_ns_entry_object_inq_done(&import_context, &import_status);
+ 
+   uuid_to_string(&obj_uuid, &string_uuid, &import_status);
+   if (import_status) {
+     dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+     syslog(LOG_NOTICE, "bind_flservers.uuid_to_string failed - %s", dce_error);
+     return 0;
+   }
+ 
+   rpc_ns_group_mbr_inq_begin(rpc_c_ns_syntax_default, "/.:/fs", rpc_c_ns_syntax_default, &group_context, &group_status);
+   if (group_status) {
+     dce_error_inq_text(group_status, dce_error, &dce_error_st);      
+     syslog(LOG_NOTICE, "bind_flservers.group_mbr_inq_begin failed - %s", dce_error);
+     return 0;
+   }
+   
+   while ((!group_status) &&  (flserver_h_count < FLSERVER_H_SIZE)) {
+     rpc_ns_group_mbr_inq_next(group_context, &name, &group_status);
+ 
+     if (group_status) {
+       if (group_status != rpc_s_no_more_members) {
+ 	dce_error_inq_text(group_status, dce_error, &dce_error_st);      
+ 	syslog(LOG_NOTICE, "bind_flservers.group_mbr_inq_next failed - %s", dce_error);
+       }
+       continue;
+     }
+       
+     rpc_ns_binding_import_begin(rpc_c_ns_syntax_default, name, NULL, NULL, &import_context, &import_status);
+     if (import_status) {
+       dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+       syslog(LOG_NOTICE, "bind_flservers.binding_import_begin failed - %s", dce_error);
+       rpc_ns_binding_import_done(&import_context, &import_status);
+       continue;
+     }
+       
+     rpc_ns_binding_import_next(import_context, &temp_h, &import_status);
+       
+     if (import_status) {
+       dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+       syslog(LOG_NOTICE, "bind_flservers.binding_import_next failed - %s", dce_error);
+       rpc_ns_binding_import_done(&import_context, &import_status);
+       continue;
+     }
+       
+     rpc_binding_to_string_binding(temp_h, &string_binding, &import_status);
+     rpc_binding_free(&temp_h, &rpc_status);
+     
+     if (import_status) {
+       dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+       syslog(LOG_NOTICE, "bind_flservers.to_string_binding failed - %s", dce_error);
+       rpc_ns_binding_import_done(&import_context, &import_status);
+       continue;
+     }
+       
+     rpc_string_binding_parse(string_binding, NULL, &protseq, &network_addr, NULL, NULL, &import_status);
+     rpc_string_free(&string_binding, &rpc_status);
+ 
+     if (import_status) {
+       dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+       syslog(LOG_NOTICE, "bind_flservers.binding_parse failed - %s", dce_error);
+       rpc_ns_binding_import_done(&import_context, &import_status);
+       continue;
+     }
+       
+     rpc_string_binding_compose(string_uuid, protseq, network_addr, NULL, NULL, &string_binding, &import_status);
+     rpc_string_free(&protseq, &rpc_status);
+     rpc_string_free(&network_addr, &rpc_status);
+     
+     if (import_status) {
+       dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+       syslog(LOG_NOTICE, "bind_flservers.binding_compose failed - %s", dce_error);
+       rpc_ns_binding_import_done(&import_context, &import_status);
+       continue;
+     }
+       
+     rpc_binding_from_string_binding(string_binding, &flserver_h[flserver_h_count], &import_status);
+     rpc_string_free(&string_binding, &rpc_status);
+       
+     if (import_status) {
+       dce_error_inq_text(import_status, dce_error, &dce_error_st);      
+       syslog(LOG_NOTICE, "bind_flservers.from_string_binding failed - %s", dce_error);
+     }
+     else
+       flserver_h_count++;
+     
+     rpc_ns_binding_import_done(&import_context, &import_status);
+   }
+   rpc_ns_group_mbr_inq_done(&group_context, &group_status);
+   rpc_string_free(&string_uuid, &import_status);
+ 
+   return flserver_h_count;
+ }
+ 
+ 
+ int dfsquota(char *path, int *quota, int *used) {
+   
+   struct afsFid fidp;
+   struct vldbentry fl_entry;
+   unsigned32 status, status2;
+   unsigned_char_t *string_binding;
+   rpc_binding_handle_t ftserver_h;
+   struct ftserver_status ft_status;
+   struct afsHyper hyper;
+   int index;
+   
+   if (flserver_h_count == 0)
+     if (!bind_flservers())
+       if (!bind_flservers()) {
+ 	syslog(LOG_NOTICE, "dfsquota - unable to bind to any flservers");
+ 	return 0;
+       }
+   
+   if (!path_to_fid(path, &fidp)) {
+     syslog(LOG_NOTICE, "dfsquota - path_to_fid failed for %s", path);
+     return 0;
+   }
+ 
+   for(index = 0; index < flserver_h_count; index++) {
+     
+     error_status_t reset_status;
+     
+     status = VL_GetEntryByID(flserver_h[flserver_h_index], &fidp.Volume, -1, &fl_entry);
+ 
+     if (!(status >= rpc_s_mod && status <= rpc_s_mod+4096))
+       break;
+     
+     rpc_binding_reset(flserver_h[flserver_h_index], &reset_status);
+     flserver_h_index = ((flserver_h_index + 1) % flserver_h_count);
+   }
+   
+   if (status) {
+     syslog(LOG_NOTICE, "dfsquota - all flservers failed");
+     return 0;
+   }
+   
+   flserver_h_index = ((flserver_h_index + 1) % flserver_h_count);
+   
+   rpc_string_binding_compose(NULL, "ncadg_ip_udp",
+                              inet_ntoa(((struct sockaddr_in *)(&fl_entry.siteAddr[0]))->sin_addr),
+                              NULL, NULL, &string_binding, &status);
+   if (status)
+     return 0;
+   
+   rpc_binding_from_string_binding(string_binding, &ftserver_h, &status);
+   rpc_string_free(&string_binding, &status2);
+   
+   if (status)
+     return 0;
+ 
+   status = FTSERVER_GetOneVolStatus(ftserver_h, &fidp.Volume, fl_entry.sitePartition[0], 0, &ft_status);
+ 
+   rpc_binding_free(&ftserver_h, &status2);
+   if (status) {
+     syslog(LOG_NOTICE, "dfsquota - ftserver call failed - %d", status);
+     return 0;
+   }
+ 
+   *quota = ((0xffc00000 & (AFS_hgethi(ft_status.vsd.visQuotaLimit) << 22)) | (0x003fffff & (AFS_hgetlo(ft_status.vsd.visQuotaLimit) >> 10)));
+ 
+   *used = ((0xffc00000 & (AFS_hgethi(ft_status.vsd.visQuotaUsage) << 22)) | (0x003fffff & (AFS_hgetlo(ft_status.vsd.visQuotaUsage) >> 10)));
+   
+   return 1;
+ }
+ 
+ void dfsmode(char *path, struct maccess *ma, struct dir *dir)
+ {
+   if (!access(path, R_OK | W_OK | X_OK)) {
+     ma->ma_user = AR_UREAD | AR_UWRITE | AR_USEARCH | AR_UOWN;
+     ma->ma_owner = AR_UREAD | AR_UWRITE | AR_USEARCH;
+   }
+   else if (!access(path, R_OK | X_OK)) {
+     ma->ma_user = AR_UREAD | AR_USEARCH;
+     ma->ma_owner = AR_UREAD | AR_USEARCH;
+   }
+   else {
+     ma->ma_user = ma->ma_owner = 0;
+     if (!access(path, R_OK)) {
+       ma->ma_user |= AR_UREAD;
+       ma->ma_owner |= AR_UREAD;
+     }
+     if (!access(path, X_OK)) {
+       ma->ma_user |= AR_USEARCH;
+       ma->ma_owner |= AR_USEARCH;
+     }
+     if (!access(path, W_OK)) {
+       ma->ma_user |= AR_UWRITE|AR_UOWN;
+       ma->ma_owner |= AR_UWRITE;
+     }
+   }
+ }
+ 
+ #endif
+ #endif
diff -d -r -c netatalk-1.5.3.1/etc/afpd/directory.c netatalk-1.5.3.1-dce-3.0/etc/afpd/directory.c
*** netatalk-1.5.3.1/etc/afpd/directory.c	Wed Mar 13 12:50:23 2002
--- netatalk-1.5.3.1-dce-3.0/etc/afpd/directory.c	Tue Jun  4 14:25:57 2002
***************
*** 822,827 ****
--- 822,831 ----
      return( 0 );
  }
  
+ #ifdef WITH_DFS
+ extern void dfsmode(char *path, struct maccess *ma, struct dir *dir);
+ #endif
+ 
  int getdirparams(const struct vol *vol,
                   u_int16_t bitmap,
                   char *upath, struct dir *dir, struct stat *st,
***************
*** 992,997 ****
--- 996,1006 ----
  #ifdef AFS	/* If only AFS defined, access() works only for AFS filesystems */ 
              afsmode( upath, &ma, dir );
  #endif /* AFS */
+ 
+ #ifdef WITH_DFS
+             dfsmode( upath, &ma, dir );
+ #endif WITH_DFS
+ 
              *data++ = ma.ma_user;
              *data++ = ma.ma_world;
              *data++ = ma.ma_group;
diff -d -r -c netatalk-1.5.3.1/etc/afpd/unix.c netatalk-1.5.3.1-dce-3.0/etc/afpd/unix.c
*** netatalk-1.5.3.1/etc/afpd/unix.c	Wed Mar 13 12:56:58 2002
--- netatalk-1.5.3.1-dce-3.0/etc/afpd/unix.c	Mon Jun  3 16:59:47 2002
***************
*** 45,50 ****
--- 45,57 ----
  #include "volume.h"
  #include "unix.h"
  
+ #ifdef WITH_DFS
+ /* chmod screws up DFS ACLs */
+ #define chmod(X, Y) (0)
+ /* why chown stuff? */
+ #define chown(X, Y, Z) (0)
+ #endif
+ 
  /*
   * Get the free space on a partition.
   */
diff -d -r -c netatalk-1.5.3.1/etc/afpd/volume.c netatalk-1.5.3.1-dce-3.0/etc/afpd/volume.c
*** netatalk-1.5.3.1/etc/afpd/volume.c	Fri Feb 15 14:09:31 2002
--- netatalk-1.5.3.1-dce-3.0/etc/afpd/volume.c	Mon Jun  3 17:02:08 2002
***************
*** 806,811 ****
--- 806,815 ----
      }
  }
  
+ #ifdef WITH_DFS
+ extern int dfsquota(char *path, int *quota, int *used);
+ #endif
+ 
  static int getvolspace( vol, bfree, btotal, xbfree, xbtotal, bsize )
  struct vol	*vol;
  u_int32_t	*bfree, *btotal, *bsize;
***************
*** 817,828 ****
--- 821,847 ----
      VolSpace	qfree, qtotal;
  #endif /* ! NO_QUOTA_SUPPORT */
  
+ #ifdef WITH_DFS
+     int quota, used;
+ #endif
+ 
      spaceflag = AFPVOL_GVSMASK & vol->v_flags;
      /* report up to 2GB if afp version is < 2.2 (4GB if not) */
      maxsize = (vol->v_flags & AFPVOL_A2VOL) ? 0x01fffe00 :
                (((afp_version < 22) || (vol->v_flags & AFPVOL_LIMITSIZE))
                 ? 0x7fffffffL : 0xffffffffL);
  
+ #define min(a,b)      ((a)<(b)?(a):(b))
+ #ifdef WITH_DFS
+     if (dfsquota(vol->v_path, &quota, &used))
+       {
+       *bsize = 1024;
+         *xbfree = *bfree = min((quota - used) * 1024, (unsigned int)maxsize);
+         *xbtotal = *btotal = min(quota * 1024, (unsigned int)maxsize);
+         return (AFP_OK);
+       }
+ #endif
+ 
  #ifdef AFS
      if ( spaceflag == AFPVOL_NONE || spaceflag == AFPVOL_AFSGVS ) {
          if ( afs_getvolspace( vol, xbfree, xbtotal, bsize ) == AFP_OK ) {
***************
*** 837,843 ****
          return( rc );
      }
  
- #define min(a,b)	((a)<(b)?(a):(b))
  #ifndef NO_QUOTA_SUPPORT
      if ( spaceflag == AFPVOL_NONE || spaceflag == AFPVOL_UQUOTA ) {
          if ( uquota_getvolspace( vol, &qfree, &qtotal, *bsize ) == AFP_OK ) {
--- 856,861 ----
diff -d -r -c netatalk-1.5.3.1/etc/uams/uams_dhx_passwd.c netatalk-1.5.3.1-dce-3.0/etc/uams/uams_dhx_passwd.c
*** netatalk-1.5.3.1/etc/uams/uams_dhx_passwd.c	Wed Mar 13 12:50:31 2002
--- netatalk-1.5.3.1-dce-3.0/etc/uams/uams_dhx_passwd.c	Mon Jun  3 18:37:17 2002
***************
*** 60,65 ****
--- 60,211 ----
  static char *clientname;
  #endif /* TRU64 */
  
+ #ifdef WITH_DCE
+ 
+ #define DCE_CREDS_DIR "/opt/dcelocal/var/security/creds"
+ 
+ #include <dce/sec_login.h>
+ #include <dce/dce_error.h>
+ #include <dce/acct.h>
+ 
+ extern sec_login_handle_t dce_login_context;
+ 
+ #ifdef WITH_DCE_REFRESH
+ 
+ #include <dce/pthread.h>
+ 
+ extern sec_passwd_str_t dce_refresh_plaintext;
+ extern sec_passwd_type_t dce_passwd_type;
+ 
+ pthread_addr_t dce_refresh_context();
+ #endif
+ 
+ int dce_login(struct passwd *pwd, char *password) {
+   
+   error_status_t dce_st;
+   dce_error_string_t dce_error;
+   int dce_error_st;
+   sec_login_auth_src_t auth_src;
+   sec_passwd_rec_t pw_entry;
+   boolean32 reset_passwd;
+   sec_passwd_str_t tmp_pw;
+ 
+ #ifdef WITH_DCE_REFRESH
+   pthread_t refresh_thread;
+ #endif
+   
+   if (!sec_login_setup_identity(pwd->pw_name, sec_login_no_flags, &dce_login_context, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "unable to setup identity for %s - %s", pwd->pw_name, dce_error);
+     return 0;
+   }
+ 
+   pw_entry.version_number = sec_passwd_c_version_none;
+   pw_entry.pepper = NULL;
+   pw_entry.key.key_type = sec_passwd_plain;
+   strncpy( (char *)tmp_pw, password, sec_passwd_str_max_len);
+   tmp_pw[sec_passwd_str_max_len] = '\0';
+   pw_entry.key.tagged_union.plain = &(tmp_pw[0]);
+ 
+   if (!sec_login_valid_and_cert_ident(dce_login_context, &pw_entry, &reset_passwd, &auth_src, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "unable to validate identity for %s - %s", pwd->pw_name, dce_error);
+     return 0;
+   }
+ 
+   if (auth_src != sec_login_auth_src_network) {
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     syslog(LOG_NOTICE, "no network credentials for %s", pwd->pw_name);
+     return 0;
+   }
+ 
+   sec_login_set_context(dce_login_context, &dce_st);
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "unable to set context for %s - %s", pwd->pw_name, dce_error);
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     return 0;
+   }
+   
+ #ifdef WITH_DCE_IBM_KLUDGE
+   {
+     char path[MAXPATHLEN];
+     char *krb5ccname;
+     char *pag_str;
+     unsigned long pag;
+ 
+     if (krb5ccname = getenv("KRB5CCNAME"))
+       if (pag_str = strrchr(krb5ccname, '_')) {
+       pag = strtol(pag_str+1, NULL, 16);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data.db", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.nc", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       }
+   }
+ #endif
+   
+ #ifdef WITH_DCE_ENCRYPTED
+   {
+     sec_rgy_login_name_t login_name;
+     sec_passwd_version_t new_version;
+     sec_passwd_rec_t key;
+     error_status_t dce_st;
+     sec_passwd_str_t pw;
+     sec_rgy_handle_t rgy_handle;
+     dce_error_string_t dce_error;
+     int dce_error_st;
+     
+     strncpy(login_name.pname, pwd->pw_name, sec_rgy_name_max_len);
+     strncpy(login_name.gname, "", sec_rgy_name_max_len);
+     strncpy(login_name.oname, "", sec_rgy_name_max_len);
+     
+     key.version_number = sec_passwd_c_version_none;
+     key.pepper = NULL;
+     key.key.key_type = sec_passwd_plain;
+     strncpy( (char *)pw, password, sec_passwd_str_max_len);
+     pw[sec_passwd_str_max_len] = '\0';
+     key.key.tagged_union.plain = &(pw[0]);
+     
+     sec_rgy_site_open_update(NULL, &rgy_handle, &dce_st);
+     
+     sec_rgy_acct_passwd(rgy_handle, &login_name, &key, &key, sec_passwd_des, &new_version, &dce_st);
+     
+     if (dce_st != error_status_ok) {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_login: sec_rgy_account_password failed for %s - %s\n", pwd->pw_name, dce_error);
+       return 0;
+     }
+   }
+ #endif
+ 
+ #ifdef WITH_DCE_REFRESH
+   dce_passwd_type = sec_passwd_plain;
+   strncpy( (char *)dce_refresh_plaintext, password, sec_passwd_str_max_len);
+   dce_refresh_plaintext[sec_passwd_str_max_len] = '\0';
+ 
+   if (pthread_create(&refresh_thread, pthread_attr_default, dce_refresh_context, (void *)NULL))
+     syslog(LOG_NOTICE, "dce_login: pthread_create failed\n");
+ 
+   pthread_detach(&refresh_thread);
+ #endif
+   
+   return 1;
+ }
+ #endif
+ 
  /* dhx passwd */
  static int passwd_login(void *obj, struct passwd **uam_pwd,
  			char *ibuf, int ibuflen,
***************
*** 279,287 ****
--- 425,437 ----
          return AFP_OK;
      }
  #else /* TRU64 */
+ #ifdef WITH_DCE
+     if (dce_login(dhxpwd, rbuf)) {
+ #else
      p = crypt( rbuf, dhxpwd->pw_passwd );
      memset(rbuf, 0, PASSWDLEN);
      if ( strcmp( p, dhxpwd->pw_passwd ) == 0 ) {
+ #endif
        *uam_pwd = dhxpwd;
        return AFP_OK;
      }
diff -d -r -c netatalk-1.5.3.1/etc/uams/uams_passwd.c netatalk-1.5.3.1-dce-3.0/etc/uams/uams_passwd.c
*** netatalk-1.5.3.1/etc/uams/uams_passwd.c	Wed Mar 13 12:50:31 2002
--- netatalk-1.5.3.1-dce-3.0/etc/uams/uams_passwd.c	Mon Jun  3 17:07:23 2002
***************
*** 57,62 ****
--- 57,208 ----
  static char *clientname;
  #endif /* TRU64 */
  
+ #ifdef WITH_DCE
+ 
+ #define DCE_CREDS_DIR "/opt/dcelocal/var/security/creds"
+ 
+ #include <dce/sec_login.h>
+ #include <dce/dce_error.h>
+ #include <dce/acct.h>
+ 
+ extern sec_login_handle_t dce_login_context;
+ 
+ #ifdef WITH_DCE_REFRESH
+ 
+ #include <dce/pthread.h>
+ 
+ extern sec_passwd_str_t dce_refresh_plaintext;
+ extern sec_passwd_type_t dce_passwd_type;
+ 
+ pthread_addr_t dce_refresh_context();
+ #endif
+ 
+ int dce_login(struct passwd *pwd, char *password) {
+   
+   error_status_t dce_st;
+   dce_error_string_t dce_error;
+   int dce_error_st;
+   sec_login_auth_src_t auth_src;
+   sec_passwd_rec_t pw_entry;
+   boolean32 reset_passwd;
+   sec_passwd_str_t tmp_pw;
+ 
+ #ifdef WITH_DCE_REFRESH
+   pthread_t refresh_thread;
+ #endif
+   
+   if (!sec_login_setup_identity(pwd->pw_name, sec_login_no_flags, &dce_login_context, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "unable to setup identity for %s - %s", pwd->pw_name, dce_error);
+     return 0;
+   }
+ 
+   pw_entry.version_number = sec_passwd_c_version_none;
+   pw_entry.pepper = NULL;
+   pw_entry.key.key_type = sec_passwd_plain;
+   strncpy( (char *)tmp_pw, password, sec_passwd_str_max_len);
+   tmp_pw[sec_passwd_str_max_len] = '\0';
+   pw_entry.key.tagged_union.plain = &(tmp_pw[0]);
+ 
+   if (!sec_login_valid_and_cert_ident(dce_login_context, &pw_entry, &reset_passwd, &auth_src, &dce_st)) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "unable to validate identity for %s - %s", pwd->pw_name, dce_error);
+     return 0;
+   }
+ 
+   if (auth_src != sec_login_auth_src_network) {
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     syslog(LOG_NOTICE, "no network credentials for %s", pwd->pw_name);
+     return 0;
+   }
+ 
+   sec_login_set_context(dce_login_context, &dce_st);
+   if (dce_st) {
+     dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+     syslog(LOG_NOTICE, "unable to set context for %s - %s", pwd->pw_name, dce_error);
+     sec_login_purge_context(&dce_login_context, &dce_st);
+     return 0;
+   }
+   
+ #ifdef WITH_DCE_IBM_KLUDGE
+   {
+     char path[MAXPATHLEN];
+     char *krb5ccname;
+     char *pag_str;
+     unsigned long pag;
+ 
+     if (krb5ccname = getenv("KRB5CCNAME"))
+       if (pag_str = strrchr(krb5ccname, '_')) {
+       pag = strtol(pag_str+1, NULL, 16);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.data.db", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       
+       snprintf(path, MAXPATHLEN, "%s/dcecred_%08x.nc", DCE_CREDS_DIR, pag);
+       path[MAXPATHLEN-1] = '\0';
+       chown(path, pwd->pw_uid, pwd->pw_gid);
+       }
+   }
+ #endif
+   
+ #ifdef WITH_DCE_ENCRYPTED
+   {
+     sec_rgy_login_name_t login_name;
+     sec_passwd_version_t new_version;
+     sec_passwd_rec_t key;
+     error_status_t dce_st;
+     sec_passwd_str_t pw;
+     sec_rgy_handle_t rgy_handle;
+     dce_error_string_t dce_error;
+     int dce_error_st;
+     
+     strncpy(login_name.pname, pwd->pw_name, sec_rgy_name_max_len);
+     strncpy(login_name.gname, "", sec_rgy_name_max_len);
+     strncpy(login_name.oname, "", sec_rgy_name_max_len);
+     
+     key.version_number = sec_passwd_c_version_none;
+     key.pepper = NULL;
+     key.key.key_type = sec_passwd_plain;
+     strncpy( (char *)pw, password, sec_passwd_str_max_len);
+     pw[sec_passwd_str_max_len] = '\0';
+     key.key.tagged_union.plain = &(pw[0]);
+     
+     sec_rgy_site_open_update(NULL, &rgy_handle, &dce_st);
+     
+     sec_rgy_acct_passwd(rgy_handle, &login_name, &key, &key, sec_passwd_des, &new_version, &dce_st);
+     
+     if (dce_st != error_status_ok) {
+       dce_error_inq_text(dce_st, dce_error, &dce_error_st);
+       syslog(LOG_NOTICE, "dce_login: sec_rgy_account_password failed for %s - %s\n", pwd->pw_name, dce_error);
+       return 0;
+     }
+   }
+ #endif
+ 
+ #ifdef WITH_DCE_REFRESH
+   dce_passwd_type = sec_passwd_plain;
+   strncpy( (char *)dce_refresh_plaintext, password, sec_passwd_str_max_len);
+   dce_refresh_plaintext[sec_passwd_str_max_len] = '\0';
+ 
+   if (pthread_create(&refresh_thread, pthread_attr_default, dce_refresh_context, (void *)NULL))
+     syslog(LOG_NOTICE, "dce_login: pthread_create failed\n");
+ 
+   pthread_detach(&refresh_thread);
+ #endif
+   
+   return 1;
+ }
+ #endif
+ 
  /* cleartxt login */
  static int passwd_login(void *obj, struct passwd **uam_pwd,
                          char *ibuf, int ibuflen,
***************
*** 144,151 ****
--- 290,301 ----
          return AFP_OK;
      }
  #else /* TRU64 */
+ #ifdef WITH_DCE
+     if (dce_login(pwd, ibuf))
+ #else
      p = crypt( ibuf, pwd->pw_passwd );
      if ( strcmp( p, pwd->pw_passwd ) == 0 )
+ #endif
          return AFP_OK;
  #endif /* TRU64 */
  
diff -d -r -c netatalk-1.5.3.1/etc/uams/uams_randnum.c netatalk-1.5.3.1-dce-3.0/etc/uams/uams_randnum.c
*** netatalk-1.5.3.1/etc/uams/uams_randnum.c	Sat Nov 17 04:56:11 2001
--- netatalk-1.5.3.1-dce-3.0/etc/uams/uams_randnum.c	Mon Jun  3 17:10:25 2002
***************
*** 338,346 ****
--- 338,348 ----
    if (uam_checkuser(randpwd) < 0)
      return AFPERR_NOTAUTH;
  
+ #ifndef WITH_DCE_ENCRYPTED
    if ((err = randpass(randpwd, passwdfile, seskey,
  		      sizeof(seskey), 0)) != AFP_OK)
      return err;
+ #endif
  
    /* get a random number */
    len = sizeof(randbuf);
***************
*** 360,365 ****
--- 362,371 ----
    return AFPERR_AUTHCONT;
  }
  
+ #ifdef WITH_DCE_ENCRYPTED
+ int dce_randnum_login(struct passwd *pwd, char challenge[8], char response[8]);
+ int dce_rand2num_login(struct passwd *pwd, char s_challenge[8], char c_response[8], char c_challenge[8], char s_response[8]);
+ #endif
  
  /* check encrypted reply. we actually setup the encryption stuff
   * here as the first part of randnum and rand2num are identical. */
***************
*** 377,382 ****
--- 383,393 ----
  
    ibuf += sizeof(sessid);
  
+ #ifdef WITH_DCE_ENCRYPTED
+   if (!dce_randnum_login(randpwd, randbuf, ibuf))
+     return AFPERR_NOTAUTH;
+ #else
+ 
    /* encrypt. this saves a little space by using the fact that
     * des can encrypt in-place without side-effects. */
    key_sched((C_Block *) seskey, seskeysched);
***************
*** 391,396 ****
--- 402,409 ----
      return AFPERR_NOTAUTH;
    }
  
+ #endif
+ 
    memset(randbuf, 0, sizeof(randbuf));
    *uam_pwd = randpwd;
    return AFP_OK;
***************
*** 418,423 ****
--- 431,443 ----
  
    ibuf += sizeof(sessid);
  
+ #ifdef WITH_DCE_ENCRYPTED
+   if (!dce_rand2num_login(randpwd, randbuf, ibuf, ibuf+8, rbuf))
+     return AFPERR_NOTAUTH;
+   else
+     *rbuflen = 8;
+ #else
+ 
    /* shift key elements left one bit */
    for (i = 0; i < sizeof(seskey); i++)
      seskey[i] <<= 1;
***************
*** 443,448 ****
--- 463,470 ----
    memset(seskeysched, 0, sizeof(seskeysched));
    *rbuflen = sizeof(randbuf);
    
+ #endif
+ 
    *uam_pwd = randpwd;
    return AFP_OK;
  }
diff -d -r -c netatalk-1.5.3.1/libatalk/adouble/ad_open.c netatalk-1.5.3.1-dce-3.0/libatalk/adouble/ad_open.c
*** netatalk-1.5.3.1/libatalk/adouble/ad_open.c	Wed Mar 13 12:50:31 2002
--- netatalk-1.5.3.1-dce-3.0/libatalk/adouble/ad_open.c	Mon Jun  3 17:11:32 2002
***************
*** 539,544 ****
--- 539,548 ----
      struct stat		stbuf;
      char 		*slash;
  
+ #ifdef WITH_DFS
+     return mode;
+ #else
+ 
      if ( mode == 0 ) {
  	return( mode );		/* save on syscalls */
      }
***************
*** 565,570 ****
--- 569,575 ----
      }
  
      return( mode & stbuf.st_mode );
+ #endif
  }
  
  /*
diff -d -r -c netatalk-1.5.3.1/libatalk/dsi/dsi_tcp.c netatalk-1.5.3.1-dce-3.0/libatalk/dsi/dsi_tcp.c
*** netatalk-1.5.3.1/libatalk/dsi/dsi_tcp.c	Thu Feb  7 16:03:55 2002
--- netatalk-1.5.3.1-dce-3.0/libatalk/dsi/dsi_tcp.c	Mon Jun  3 17:14:20 2002
***************
*** 98,103 ****
--- 98,104 ----
  {
    pid_t pid;
    SOCKLEN_T len;
+   sigset_t sigs;
  
    len = sizeof(dsi->client);
    dsi->socket = accept(dsi->serversock, (struct sockaddr *) &dsi->client,
***************
*** 120,131 ****
--- 121,138 ----
    if (dsi->socket < 0)
      return -1;
  
+   sigemptyset(&sigs);
+   sigaddset(&sigs, SIGCHLD);
+   sigprocmask(SIG_BLOCK, &sigs, NULL);
+ 
    if ((pid = fork()) == 0) { /* child */
      static const struct itimerval timer = {{0, 0}, {DSI_TCPTIMEOUT, 0}};
      struct sigaction newact, oldact;
      u_int8_t block[DSI_BLOCKSIZ];
      size_t stored;
      
+     sigprocmask(SIG_UNBLOCK, &sigs, NULL);
+ 
      /* reset a couple signals */
      signal(SIGTERM, SIG_DFL); 
      signal(SIGHUP, SIG_DFL);
***************
*** 198,203 ****
--- 205,212 ----
  	   dsi->socket);
    }
    
+   sigprocmask(SIG_UNBLOCK, &sigs, NULL);
+ 
    /* send back our pid */
    return pid;
  }
